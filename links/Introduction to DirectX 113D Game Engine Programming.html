<!DOCTYPE html>
<!-- saved from url=(0069)https://www.3dgep.com/introduction-to-directx-11/#DirectX_11_Pipeline -->
<html lang="en-US" prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb#"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<meta name="viewport" content="width=device-width">
<title>Introduction to DirectX 113D Game Engine Programming</title>
<link rel="profile" href="http://gmpg.org/xfn/11">
<link rel="stylesheet" type="text/css" media="all" href="./Introduction to DirectX 113D Game Engine Programming_files/style.css">
<link rel="pingback" href="https://www.3dgep.com/xmlrpc.php">
<!--[if lt IE 9]>
<script src="https://www.3dgep.com/wp-content/themes/twentyeleven/js/html5.js" type="text/javascript"></script>
<![endif]-->

<meta name="description" content="In this article, I will introduce the reader to DirectX 11. We will create a simple demo application that can be used to create more complex DirectX examples and demos.">
<meta name="robots" content="noodp">
<link rel="canonical" href="https://www.3dgep.com/introduction-to-directx-11/">
<link rel="publisher" href="https://www.google.com/+3dgep">
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="Introduction to DirectX 11">
<meta property="og:description" content="In this article, I will introduce the reader to DirectX 11. We will create a simple demo application that can be used to create more complex DirectX examples and demos.">
<meta property="og:url" content="https://www.3dgep.com/introduction-to-directx-11/">
<meta property="og:site_name" content="3D Game Engine Programming">
<meta property="article:publisher" content="https://www.facebook.com/3DGameEngineProgramming">
<meta property="article:tag" content="3D">
<meta property="article:tag" content="Constant Buffer">
<meta property="article:tag" content="Direct3D">
<meta property="article:tag" content="DirectX 11">
<meta property="article:tag" content="games">
<meta property="article:tag" content="Graphics">
<meta property="article:tag" content="HLSL">
<meta property="article:tag" content="Index Buffer">
<meta property="article:tag" content="Input-Assembler">
<meta property="article:tag" content="Pixel Shader">
<meta property="article:tag" content="Programming">
<meta property="article:tag" content="Vertex Buffer">
<meta property="article:tag" content="Vertex Shader">
<meta property="article:section" content="DirectX">
<meta property="article:published_time" content="2014-03-21T17:09:00+02:00">
<meta property="article:modified_time" content="2017-03-07T12:57:54+02:00">
<meta property="og:updated_time" content="2017-03-07T12:57:54+02:00">
<meta property="fb:admins" content="514753860">
<meta property="og:image" content="https://www.3dgep.com/wp-content/uploads/2014/03/2000px-Microsoft-DirectX-11-Logo-wordmark.svg_.png">
<meta property="og:image:width" content="2000">
<meta property="og:image:height" content="667">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:description" content="In this article, I will introduce the reader to DirectX 11. We will create a simple demo application that can be used to create more complex DirectX examples and demos.">
<meta name="twitter:title" content="Introduction to DirectX 11">
<meta name="twitter:site" content="@3dgep">
<meta name="twitter:image" content="https://www.3dgep.com/wp-content/uploads/2014/03/2000px-Microsoft-DirectX-11-Logo-wordmark.svg_.png">
<meta name="twitter:creator" content="@3dgep">

<link rel="dns-prefetch" href="https://s.w.org/">
<link rel="alternate" type="application/rss+xml" title="3D Game Engine Programming » Feed" href="https://www.3dgep.com/feed/">
<link rel="alternate" type="application/rss+xml" title="3D Game Engine Programming » Comments Feed" href="https://www.3dgep.com/comments/feed/">
<link rel="alternate" type="application/rss+xml" title="3D Game Engine Programming » Introduction to DirectX 11 Comments Feed" href="https://www.3dgep.com/introduction-to-directx-11/feed/">
<script async="" src="./Introduction to DirectX 113D Game Engine Programming_files/analytics.js.download"></script><script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2.3\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2.3\/svg\/","svgExt":".svg","source":{"concatemoji":"https:\/\/www.3dgep.com\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.8.1"}};
			!function(a,b,c){function d(a){var b,c,d,e,f=String.fromCharCode;if(!k||!k.fillText)return!1;switch(k.clearRect(0,0,j.width,j.height),k.textBaseline="top",k.font="600 32px Arial",a){case"flag":return k.fillText(f(55356,56826,55356,56819),0,0),b=j.toDataURL(),k.clearRect(0,0,j.width,j.height),k.fillText(f(55356,56826,8203,55356,56819),0,0),c=j.toDataURL(),b===c&&(k.clearRect(0,0,j.width,j.height),k.fillText(f(55356,57332,56128,56423,56128,56418,56128,56421,56128,56430,56128,56423,56128,56447),0,0),b=j.toDataURL(),k.clearRect(0,0,j.width,j.height),k.fillText(f(55356,57332,8203,56128,56423,8203,56128,56418,8203,56128,56421,8203,56128,56430,8203,56128,56423,8203,56128,56447),0,0),c=j.toDataURL(),b!==c);case"emoji4":return k.fillText(f(55358,56794,8205,9794,65039),0,0),d=j.toDataURL(),k.clearRect(0,0,j.width,j.height),k.fillText(f(55358,56794,8203,9794,65039),0,0),e=j.toDataURL(),d!==e}return!1}function e(a){var c=b.createElement("script");c.src=a,c.defer=c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g,h,i,j=b.createElement("canvas"),k=j.getContext&&j.getContext("2d");for(i=Array("flag","emoji4"),c.supports={everything:!0,everythingExceptFlag:!0},h=0;h<i.length;h++)c.supports[i[h]]=d(i[h]),c.supports.everything=c.supports.everything&&c.supports[i[h]],"flag"!==i[h]&&(c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&c.supports[i[h]]);c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&!c.supports.flag,c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.everything||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);
		</script><script src="./Introduction to DirectX 113D Game Engine Programming_files/wp-emoji-release.min.js.download" type="text/javascript" defer=""></script>
<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
<link rel="stylesheet" id="prettyphoto-css" href="./Introduction to DirectX 113D Game Engine Programming_files/prettyPhoto.css" type="text/css" media="screen">
<link rel="stylesheet" id="mt-shcore-style-css" href="./Introduction to DirectX 113D Game Engine Programming_files/shCore.css" type="text/css" media="all">
<link rel="stylesheet" id="mt-theme-style-css" href="./Introduction to DirectX 113D Game Engine Programming_files/shThemeDefault.css" type="text/css" media="all">

<script type="text/javascript" data-cfasync="false">
	/* Function to detect opted out users */
	function __gaTrackerIsOptedOut() {
		return document.cookie.indexOf(disableStr + '=true') > -1;
	}

	/* Disable tracking if the opt-out cookie exists. */
	var disableStr = 'ga-disable-UA-21362652-4';
	if ( __gaTrackerIsOptedOut() ) {
		window[disableStr] = true;
	}

	/* Opt-out function */
	function __gaTrackerOptout() {
	  document.cookie = disableStr + '=true; expires=Thu, 31 Dec 2099 23:59:59 UTC; path=/';
	  window[disableStr] = true;
	}

	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','//www.google-analytics.com/analytics.js','__gaTracker');

	__gaTracker('create', 'UA-21362652-4', 'auto');
	__gaTracker('set', 'forceSSL', true);
	__gaTracker('require', 'displayfeatures');
	__gaTracker('send','pageview');
</script>

<script type="text/javascript" src="./Introduction to DirectX 113D Game Engine Programming_files/jquery.js.download"></script>
<script type="text/javascript" src="./Introduction to DirectX 113D Game Engine Programming_files/jquery-migrate.min.js.download"></script>
<script type="text/javascript">
/* <![CDATA[ */
var monsterinsights_frontend = {"js_events_tracking":"true","is_debug_mode":"false","download_extensions":"","inbound_paths":"","home_url":"https:\/\/www.3dgep.com","track_download_as":"event","internal_label":"int","hash_tracking":"false"};
/* ]]> */
</script>
<script type="text/javascript" src="./Introduction to DirectX 113D Game Engine Programming_files/frontend.min.js.download"></script>
<script type="text/javascript" src="./Introduction to DirectX 113D Game Engine Programming_files/shCore.js.download"></script>
<script type="text/javascript" src="./Introduction to DirectX 113D Game Engine Programming_files/shAutoloader.js.download"></script>
<link rel="https://api.w.org/" href="https://www.3dgep.com/wp-json/">
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="https://www.3dgep.com/xmlrpc.php?rsd">
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="https://www.3dgep.com/wp-includes/wlwmanifest.xml">
<meta name="generator" content="WordPress 4.8.1">
<link rel="shortlink" href="https://www.3dgep.com/?p=5553">
<link rel="alternate" type="application/json+oembed" href="https://www.3dgep.com/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fwww.3dgep.com%2Fintroduction-to-directx-11%2F">
<link rel="alternate" type="text/xml+oembed" href="https://www.3dgep.com/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fwww.3dgep.com%2Fintroduction-to-directx-11%2F&amp;format=xml">
<style type="text/css">
	.wptoc {
		border: 1px solid #AAAAAA;
		padding: 5px;
		float: left;
		font-size: 0.95em;
	}
	.wptoc h2 {
		text-align: center;
		font-size: 1em;
		font-weight: bold;
	}
	.wptoc ul, .wptoc ol {
		list-style: none;
		padding: 0;
	}
	.wptoc ul ul, .wptoc ol ol {
		margin: 0 0 0 2em;
	}
	.wptoc-end {
		clear: both;
	}
</style>
<style data-context="foundation-flickity-css">/*! Flickity v2.0.2
http://flickity.metafizzy.co
---------------------------------------------- */.flickity-enabled{position:relative}.flickity-enabled:focus{outline:0}.flickity-viewport{overflow:hidden;position:relative;height:100%}.flickity-slider{position:absolute;width:100%;height:100%}.flickity-enabled.is-draggable{-webkit-tap-highlight-color:transparent;tap-highlight-color:transparent;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.flickity-enabled.is-draggable .flickity-viewport{cursor:move;cursor:-webkit-grab;cursor:grab}.flickity-enabled.is-draggable .flickity-viewport.is-pointer-down{cursor:-webkit-grabbing;cursor:grabbing}.flickity-prev-next-button{position:absolute;top:50%;width:44px;height:44px;border:none;border-radius:50%;background:#fff;background:hsla(0,0%,100%,.75);cursor:pointer;-webkit-transform:translateY(-50%);transform:translateY(-50%)}.flickity-prev-next-button:hover{background:#fff}.flickity-prev-next-button:focus{outline:0;box-shadow:0 0 0 5px #09F}.flickity-prev-next-button:active{opacity:.6}.flickity-prev-next-button.previous{left:10px}.flickity-prev-next-button.next{right:10px}.flickity-rtl .flickity-prev-next-button.previous{left:auto;right:10px}.flickity-rtl .flickity-prev-next-button.next{right:auto;left:10px}.flickity-prev-next-button:disabled{opacity:.3;cursor:auto}.flickity-prev-next-button svg{position:absolute;left:20%;top:20%;width:60%;height:60%}.flickity-prev-next-button .arrow{fill:#333}.flickity-page-dots{position:absolute;width:100%;bottom:-25px;padding:0;margin:0;list-style:none;text-align:center;line-height:1}.flickity-rtl .flickity-page-dots{direction:rtl}.flickity-page-dots .dot{display:inline-block;width:10px;height:10px;margin:0 8px;background:#333;border-radius:50%;opacity:.25;cursor:pointer}.flickity-page-dots .dot.is-selected{opacity:1}</style><style data-context="foundation-slideout-css">.slideout-menu{position:fixed;left:0;top:0;bottom:0;right:auto;z-index:0;width:256px;overflow-y:auto;-webkit-overflow-scrolling:touch;display:none}.slideout-menu.pushit-right{left:auto;right:0}.slideout-panel{position:relative;z-index:1;will-change:transform}.slideout-open,.slideout-open .slideout-panel,.slideout-open body{overflow:hidden}.slideout-open .slideout-menu{display:block}.pushit{display:none}</style><link rel="shortcut icon" href="https://3dgep.com/wp-content/uploads/2014/03/favicon.ico">
<link rel="icon" href="https://3dgep.com/wp-content/uploads/2014/03/favicon.png" type="image/png">
<link rel="icon" href="https://3dgep.com/wp-content/uploads/2014/03/favicon.gif" type="image/gif">
<style type="text/css">
.my-note
{
font-size:0.7em;
background-color:#efefef;
text-align:justify;
border-style:solid none solid none;
border-width:1px;
margin-bottom: 1.625em;
}

.unselectable
{
-webkit-touch-callout: none;
-webkit-user-select: none;
-khtml-user-select: none;
-moz-user-select: none;
-ms-user-select: none;
user-select: none;
}
</style><style>.ios7.web-app-mode.has-fixed header{ background-color: rgba(3,122,221,.88);}</style></head>
<body class="post-template-default single single-post postid-5553 single-format-standard singular two-column right-sidebar">
<div id="page" class="hfeed">
<header id="branding" role="banner">
<hgroup>
<h1 id="site-title"><span><a href="https://www.3dgep.com/" rel="home">3D Game Engine Programming</a></span></h1>
<h2 id="site-description">Helping you build your dream game engine.</h2>
</hgroup>
<a href="https://www.3dgep.com/">
<img width="1000" height="288" src="./Introduction to DirectX 113D Game Engine Programming_files/2000px-Microsoft-DirectX-11-Logo-wordmark.svg_-1000x288.png" class="attachment-post-thumbnail size-post-thumbnail wp-post-image" alt=""> </a>
<form method="get" id="searchform" action="https://www.3dgep.com/">
<label for="s" class="assistive-text">Search</label>
<input type="text" class="field" name="s" id="s" placeholder="Search">
<input type="submit" class="submit" name="submit" id="searchsubmit" value="Search">
</form>
<nav id="access" role="navigation">
<h3 class="assistive-text">Main menu</h3>
<div class="skip-link"><a class="assistive-text" href="https://www.3dgep.com/introduction-to-directx-11/#content">Skip to primary content</a></div>
<div class="menu-main-menu-container"><ul id="menu-main-menu" class="menu"><li id="menu-item-928" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-928"><a href="https://www.3dgep.com/">Home</a></li>
<li id="menu-item-932" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-932"><a href="https://www.3dgep.com/category/math/">Math</a></li>
<li id="menu-item-3703" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3703"><a href="https://www.3dgep.com/category/unity/">Unity</a></li>
<li id="menu-item-931" class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor current-menu-parent current-post-parent menu-item-has-children menu-item-931"><a href="https://www.3dgep.com/category/graphics-programming/">Graphics Programming</a>
<ul class="sub-menu">
<li id="menu-item-2641" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-2641"><a href="https://www.3dgep.com/category/graphics-programming/opengl/">OpenGL</a></li>
<li id="menu-item-5758" class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor current-menu-parent current-post-parent menu-item-5758"><a href="https://www.3dgep.com/category/graphics-programming/directx/">DirectX</a></li>
<li id="menu-item-2659" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-2659"><a href="https://www.3dgep.com/category/graphics-programming/cg/">Cg</a></li>
</ul>
</li>
<li id="menu-item-2104" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-2104"><a href="https://www.3dgep.com/category/cuda/">CUDA</a></li>
<li id="menu-item-1568" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1568"><a href="https://www.3dgep.com/about-3d-game-engine-programming/">About</a></li>
<li id="menu-item-4599" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-4599"><a href="https://www.3dgep.com/courses/">Courses</a>
<ul class="sub-menu">
<li id="menu-item-4604" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4604"><a href="https://www.3dgep.com/game-engines-1-ge1/">Game Engines 1 (GE1/GEA1)</a></li>
<li id="menu-item-4602" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4602"><a href="https://www.3dgep.com/graphics-programming-3-grp3/">Graphics Programming 3 (GRP3)</a></li>
<li id="menu-item-4601" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4601"><a href="https://www.3dgep.com/graphics-programming-4-grp4/">Graphics Programming 4 (GRP4)</a></li>
<li id="menu-item-4600" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4600"><a href="https://www.3dgep.com/advanced-game-technology-6-agt6/">Advanced Game Technology 6 (AGT6)</a></li>
</ul>
</li>
</ul></div> </nav>
</header>
<div id="main">
<div id="primary">
<div id="content" role="main">
<nav id="nav-single">
<h3 class="assistive-text">Post navigation</h3>
<span class="nav-previous"><a href="https://www.3dgep.com/texturing-and-lighting-with-opengl-and-glsl/" rel="prev"><span class="meta-nav">←</span> Previous</a></span>
<span class="nav-next"><a href="https://www.3dgep.com/texturing-lighting-directx-11/" rel="next">Next <span class="meta-nav">→</span></a></span>
</nav>
<article id="post-5553" class="post-5553 post type-post status-publish format-standard has-post-thumbnail hentry category-directx category-graphics-programming tag-3d tag-constant-buffer tag-direct3d tag-directx-11 tag-games tag-graphics tag-hlsl tag-index-buffer tag-input-assembler tag-pixel-shader tag-programming tag-vertex-buffer tag-vertex-shader">
<header class="entry-header">
<h1 class="entry-title">Introduction to DirectX 11</h1>
<div class="entry-meta">
<span class="sep">Posted on </span><a href="https://www.3dgep.com/introduction-to-directx-11/" title="5:09 pm" rel="bookmark"><time class="entry-date" datetime="2014-03-21T17:09:00+00:00">March 21, 2014</time></a><span class="by-author"> <span class="sep"> by </span> <span class="author vcard"><a class="url fn n" href="https://www.3dgep.com/author/jeremiah/" title="View all posts by Jeremiah van Oosten" rel="author">Jeremiah van Oosten</a></span></span> </div>
</header>
<div class="entry-content">
<div id="attachment_5754" style="width: 160px" class="wp-caption alignleft"><a href="http://en.wikipedia.org/wiki/File:Directx9.png"><img src="./Introduction to DirectX 113D Game Engine Programming_files/Directx9-150x150.png" alt="DirectX" width="150" height="150" class="size-thumbnail wp-image-5754" srcset="https://www.3dgep.com/wp-content/uploads/2014/03/Directx9-150x150.png 150w, https://www.3dgep.com/wp-content/uploads/2014/03/Directx9-144x144.png 144w, https://www.3dgep.com/wp-content/uploads/2014/03/Directx9.png 163w" sizes="(max-width: 150px) 100vw, 150px"></a><p class="wp-caption-text">DirectX</p></div>
<p>In this article, I will introduce the reader to DirectX 11. We will create a simple demo application that can be used to create more complex DirectX examples and demos. After reading this article, you should be able to create a DirectX application and render geometry using a simple vertex shader and pixel shader.</p>
<p><span id="more-5553"></span></p>
<div style="clear: both;"><div class="toc wptoc">
<h2>Table of Contents</h2>
<ol class="toc-odd level-1">
<li>
<a href="https://www.3dgep.com/introduction-to-directx-11/#Introduction">Introduction</a>
</li>
<li>
<a href="https://www.3dgep.com/introduction-to-directx-11/#DirectX_11_Components">DirectX 11 Components</a>
<ol class="toc-even level-2">
<li>
<a href="https://www.3dgep.com/introduction-to-directx-11/#Direct2D">Direct2D</a>
</li>
<li>
<a href="https://www.3dgep.com/introduction-to-directx-11/#Direct3D">Direct3D</a>
</li>
<li>
<a href="https://www.3dgep.com/introduction-to-directx-11/#DirectWrite">DirectWrite</a>
</li>
<li>
<a href="https://www.3dgep.com/introduction-to-directx-11/#DirectXMath">DirectXMath</a>
</li>
<li>
<a href="https://www.3dgep.com/introduction-to-directx-11/#XAudio2">XAudio2</a>
</li>
<li>
<a href="https://www.3dgep.com/introduction-to-directx-11/#XInput">XInput</a>
</li>
<li>
<a href="https://www.3dgep.com/introduction-to-directx-11/#DXGI">DXGI</a>
</li>
</ol>
</li><li>
<a href="https://www.3dgep.com/introduction-to-directx-11/#DirectX_11_Pipeline">DirectX 11 Pipeline</a>
<ol class="toc-even level-2">
<li>
<a href="https://www.3dgep.com/introduction-to-directx-11/#Input-Assembler_Stage">Input-Assembler Stage</a>
</li>
<li>
<a href="https://www.3dgep.com/introduction-to-directx-11/#Vertex_Shader_Stage">Vertex Shader Stage</a>
</li>
<li>
<a href="https://www.3dgep.com/introduction-to-directx-11/#Hull_Shader_Stage">Hull Shader Stage</a>
</li>
<li>
<a href="https://www.3dgep.com/introduction-to-directx-11/#Tessellator_Stage">Tessellator Stage</a>
</li>
<li>
<a href="https://www.3dgep.com/introduction-to-directx-11/#Domain_Shader_Stage">Domain Shader Stage</a>
</li>
<li>
<a href="https://www.3dgep.com/introduction-to-directx-11/#Geometry_Shader_Stage">Geometry Shader Stage</a>
</li>
<li>
<a href="https://www.3dgep.com/introduction-to-directx-11/#Stream_Output_Stage">Stream Output Stage</a>
</li>
<li>
<a href="https://www.3dgep.com/introduction-to-directx-11/#Rasterizer_Stage">Rasterizer Stage</a>
</li>
<li>
<a href="https://www.3dgep.com/introduction-to-directx-11/#Pixel_Shader_Stage">Pixel Shader Stage</a>
</li>
<li>
<a href="https://www.3dgep.com/introduction-to-directx-11/#Output-Merger_Stage">Output-Merger Stage</a>
</li>
</ol>
</li><li>
<a href="https://www.3dgep.com/introduction-to-directx-11/#DirectX_Demo">DirectX Demo</a>
<ol class="toc-even level-2">
<li>
<a href="https://www.3dgep.com/introduction-to-directx-11/#DirectX_Project">DirectX Project</a>
</li>
<li>
<a href="https://www.3dgep.com/introduction-to-directx-11/#Project_Configuration">Project Configuration</a>
</li>
<li>
<a href="https://www.3dgep.com/introduction-to-directx-11/#Precompiled_Header">Precompiled Header</a>
</li>
<li>
<a href="https://www.3dgep.com/introduction-to-directx-11/#Global_Header">Global Header</a>
</li>
<li>
<a href="https://www.3dgep.com/introduction-to-directx-11/#Preamble">Preamble</a>
</li>
<li>
<a href="https://www.3dgep.com/introduction-to-directx-11/#The_Main_Window">The Main Window</a>
</li>
<li>
<a href="https://www.3dgep.com/introduction-to-directx-11/#Windows_Procedure_Function">Windows Procedure Function</a>
</li>
<li>
<a href="https://www.3dgep.com/introduction-to-directx-11/#The_Run_Method">The Run Method</a>
</li>
<li>
<a href="https://www.3dgep.com/introduction-to-directx-11/#The_Main_Function">The Main Function</a>
</li>
<li>
<a href="https://www.3dgep.com/introduction-to-directx-11/#Initialize_DirectX">Initialize DirectX</a>
<ol class="toc-odd level-3">
<li>
<a href="https://www.3dgep.com/introduction-to-directx-11/#Create_Device_and_Swap_Chain">Create Device and Swap Chain</a>
</li>
<li>
<a href="https://www.3dgep.com/introduction-to-directx-11/#Create_a_RenderTargetView">Create a RenderTargetView</a>
</li>
<li>
<a href="https://www.3dgep.com/introduction-to-directx-11/#Create_a_Depth-Stencil_Buffer">Create a Depth-Stencil Buffer</a>
</li>
<li>
<a href="https://www.3dgep.com/introduction-to-directx-11/#Create_a_Depth-Stencil_View">Create a Depth-Stencil View</a>
</li>
<li>
<a href="https://www.3dgep.com/introduction-to-directx-11/#Create_a_Depth-Stencil_State_Object">Create a Depth-Stencil State Object</a>
</li>
<li>
<a href="https://www.3dgep.com/introduction-to-directx-11/#Create_a_Rasterizer_State_Object">Create a Rasterizer State Object</a>
</li>
<li>
<a href="https://www.3dgep.com/introduction-to-directx-11/#Initialize_the_Viewport">Initialize the Viewport</a>
</li>
</ol>
</li><li>
<a href="https://www.3dgep.com/introduction-to-directx-11/#Update_the_Main_Function">Update the Main Function</a>
</li>
</ol>
</li><li>
<a href="https://www.3dgep.com/introduction-to-directx-11/#Shaders">Shaders</a>
<ol class="toc-even level-2">
<li>
<a href="https://www.3dgep.com/introduction-to-directx-11/#Vertex_Shader">Vertex Shader</a>
</li>
<li>
<a href="https://www.3dgep.com/introduction-to-directx-11/#Pixel_Shader">Pixel Shader</a>
</li>
<li>
<a href="https://www.3dgep.com/introduction-to-directx-11/#Compiling_Shaders">Compiling Shaders</a>
<ol class="toc-odd level-3">
<li>
<a href="https://www.3dgep.com/introduction-to-directx-11/#Precompiled_Shaders">Precompiled Shaders</a>
</li>
<li>
<a href="https://www.3dgep.com/introduction-to-directx-11/#Runtime_Compiled_Shader">Runtime Compiled Shader</a>
<ol class="toc-even level-4">
<li>
<a href="https://www.3dgep.com/introduction-to-directx-11/#Get_the_Latest_Profile">Get the Latest Profile</a>
</li>
<li>
<a href="https://www.3dgep.com/introduction-to-directx-11/#Create_a_Shader_Object">Create a Shader Object</a>
</li>
<li>
<a href="https://www.3dgep.com/introduction-to-directx-11/#Load_a_Shader">Load a Shader</a>
</li>
</ol>
</li></ol>
</li></ol>
</li><li>
<a href="https://www.3dgep.com/introduction-to-directx-11/#DirectX_Demo_Cont...">DirectX Demo Cont...</a>
<ol class="toc-even level-2">
<li>
<a href="https://www.3dgep.com/introduction-to-directx-11/#Load_Demo_Content">Load Demo Content</a>
<ol class="toc-odd level-3">
<li>
<a href="https://www.3dgep.com/introduction-to-directx-11/#Vertex_Buffer">Vertex Buffer</a>
</li>
<li>
<a href="https://www.3dgep.com/introduction-to-directx-11/#Index_Buffer">Index Buffer</a>
</li>
<li>
<a href="https://www.3dgep.com/introduction-to-directx-11/#Constant_Buffers">Constant Buffers</a>
</li>
<li>
<a href="https://www.3dgep.com/introduction-to-directx-11/#Load_Shaders">Load Shaders</a>
<ol class="toc-even level-4">
<li>
<a href="https://www.3dgep.com/introduction-to-directx-11/#Load_and_Compile_at_Runtime">Load and Compile at Runtime</a>
</li>
<li>
<a href="https://www.3dgep.com/introduction-to-directx-11/#Load_a_Precompiled_Shader_Object">Load a Precompiled Shader Object</a>
</li>
<li>
<a href="https://www.3dgep.com/introduction-to-directx-11/#Load_from_Byte_Array">Load from Byte Array</a>
</li>
</ol>
</li><li>
<a href="https://www.3dgep.com/introduction-to-directx-11/#Input_Layout">Input Layout</a>
</li>
<li>
<a href="https://www.3dgep.com/introduction-to-directx-11/#Load_Pixel_Shader">Load Pixel Shader</a>
</li>
<li>
<a href="https://www.3dgep.com/introduction-to-directx-11/#Projection_Matrix">Projection Matrix</a>
</li>
</ol>
</li><li>
<a href="https://www.3dgep.com/introduction-to-directx-11/#The_Update_Function">The Update Function</a>
</li>
<li>
<a href="https://www.3dgep.com/introduction-to-directx-11/#Clear">Clear</a>
</li>
<li>
<a href="https://www.3dgep.com/introduction-to-directx-11/#Present">Present</a>
</li>
<li>
<a href="https://www.3dgep.com/introduction-to-directx-11/#Render">Render</a>
<ol class="toc-odd level-3">
<li>
<a href="https://www.3dgep.com/introduction-to-directx-11/#Clear_the_Screen">Clear the Screen</a>
</li>
<li>
<a href="https://www.3dgep.com/introduction-to-directx-11/#Setup_the_Input_Assembler_Stage">Setup the Input Assembler Stage</a>
</li>
<li>
<a href="https://www.3dgep.com/introduction-to-directx-11/#Setup_the_Vertex_Shader_Stage">Setup the Vertex Shader Stage</a>
</li>
<li>
<a href="https://www.3dgep.com/introduction-to-directx-11/#Setup_the_Rasterizer_Stage">Setup the Rasterizer Stage</a>
</li>
<li>
<a href="https://www.3dgep.com/introduction-to-directx-11/#Setup_the_Pixel_Shader_Stage">Setup the Pixel Shader Stage</a>
</li>
<li>
<a href="https://www.3dgep.com/introduction-to-directx-11/#Setup_the_Output_Merger_Stage">Setup the Output Merger Stage</a>
</li>
<li>
<a href="https://www.3dgep.com/introduction-to-directx-11/#Draw_the_Cube">Draw the Cube</a>
</li>
<li>
<a href="https://www.3dgep.com/introduction-to-directx-11/#Present_1">Present</a>
</li>
</ol>
</li><li>
<a href="https://www.3dgep.com/introduction-to-directx-11/#Cleanup">Cleanup</a>
<ol class="toc-odd level-3">
<li>
<a href="https://www.3dgep.com/introduction-to-directx-11/#UnloadContent">UnloadContent</a>
</li>
<li>
<a href="https://www.3dgep.com/introduction-to-directx-11/#Cleanup_1">Cleanup</a>
</li>
</ol>
</li><li>
<a href="https://www.3dgep.com/introduction-to-directx-11/#Update_the_Run_Function">Update the Run Function</a>
</li>
<li>
<a href="https://www.3dgep.com/introduction-to-directx-11/#Update_the_Main_Function_1">Update the Main Function</a>
</li>
<li>
<a href="https://www.3dgep.com/introduction-to-directx-11/#Run_the_Demo">Run the Demo</a>
</li>
</ol>
</li><li>
<a href="https://www.3dgep.com/introduction-to-directx-11/#Download_the_Demo">Download the Demo</a>
</li>
<li>
<a href="https://www.3dgep.com/introduction-to-directx-11/#References">References</a>
</li>
</ol>
</div>
<div class="wptoc-end">&nbsp;</div></div>
<span id="Introduction"><h1>Introduction</h1></span>
<p><strong>DirectX</strong> is a collection of application programming interfaces (API). The components of the DirectX API provides low-level access to the hardware running on a Windows based Operating System <a href="https://www.3dgep.com/introduction-to-directx-11/#DirectX">[1]</a>.</p>
<p>Prior to the release of Windows 95, application programmers had direct access to low-level hardware devices such as video, mouse, and keyboards. In Windows 95, access to these low-level hardware devices was restricted <a href="https://www.3dgep.com/introduction-to-directx-11/#Windows_95">[2]</a>. The developers at Microsoft realized that in order to facilitate access to these low-level devices, APIs needed to be developed to provide an abstract way to access these low-level hardware devices <a href="https://www.3dgep.com/introduction-to-directx-11/#DirectX">[1]</a>.</p>
<p>The first version of DirectX was released in September 1995 shortly after the release of Windows 95 under the name <strong>Windows Game SDK</strong> <a href="https://www.3dgep.com/introduction-to-directx-11/#DirectX">[1]</a>. Through the period of 1995-1997, the DirectX library went through several version changes to reach version 5. Subsequent major revisions saw a release on an annual schedule until DirectX 9 which wasn’t introduced until two years after DirectX 8 <a href="https://www.3dgep.com/introduction-to-directx-11/#DirectX">[1]</a>.</p>
<p>Prior to <strong>DirectX 8.0</strong>, the graphics programmer was restricted to a fixed-function rendering pipeline. This meant that the implementation of the rendering algorithms were fixed in the graphics hardware. DirectX 8 introduced the first versions of a programmable shading language with <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/bb509654(v=vs.85).aspx" title="Shader Model 1" target="_blank">Shader Model 1</a> <a id="#ShaderModels">[4]</a>. Shader Model 1 featured a single shader profile for creating a very simple vertex shader and did not provide a shader profile for pixel shading.</p>
<p><strong>DirectX 9.0</strong> was released in December 2002 <a href="https://www.3dgep.com/introduction-to-directx-11/#DirectX">[1]</a> and introduced <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/bb509655(v=vs.85).aspx" title="Shader Model 2.0" target="_blank">Shader Model 2.0</a>. Shader Model 2.0 introduced a new vertex shader profile as well as a pixel shader profile. Pixel shaders provided the ability to create per-pixel lighting.</p>
<p><strong>DirectX 9.0c</strong> was released in August 2004 <a href="https://www.3dgep.com/introduction-to-directx-11/#DirectX">[1]</a> together with the introduction of <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/bb509656(v=vs.85).aspx" title="Shader Model 3.0" target="_blank">Shader Model 3.0</a>. Shader Model 3.0 extended the existing vertex shader and pixel shader profiles increasing the number of instructions and allowing for more complex shaders.</p>
<p>In November 2006, <strong>DirectX 10</strong> was released <a href="https://www.3dgep.com/introduction-to-directx-11/#DirectX">[1]</a> which introduced <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/bb509657(v=vs.85).aspx" title="Shader Model 4.0" target="_blank">Shader Model 4.0</a>. Shader Model 4.0 extended the functionality of the vertex shader and the pixel shader as well as introduced a new shader profile called the geometry shader. Shader Model 4.0 also introduced the Effect Framework which allowed the graphics programmer to create effect files (.fx) that combined vertex, pixel, and geometry shaders in a single file. Support for the effect files was subsequently dropped in later versions of the Direct3D API.</p>
<p><strong>DirectX 11</strong> was released in October 2009 <a href="https://www.3dgep.com/introduction-to-directx-11/#DirectX">[1]</a> together with <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff471356(v=vs.85).aspx" title="Shader Model 5.0" target="_blank">Shader Model 5.0</a>. Shader Model 5.0 extended the vertex, pixel, and geometry shaders of Shader Model 4.0 as well as introduce tessellation and compute shader profiles. Tessellation shaders provide the functionality to progressively refine the detail of a mesh at run-time while the compute shaders provide a general-purpose compute language that is executed on the GPU instead of the CPU.</p>
<p>On March 20, 2014, Microsoft will announce the release of <strong>DirectX 12</strong> <a href="https://www.3dgep.com/introduction-to-directx-11/#DirectX12">[5]</a> which will no doubt require me to rewrite this entire article.</p>
<p>The table below shows the various releases of DirectX and the corresponding shader model and shader profiles <a href="https://www.3dgep.com/introduction-to-directx-11/#DirectX">[1]</a><a href="https://www.3dgep.com/introduction-to-directx-11/#Direct3D">[2]</a><a href="https://www.3dgep.com/introduction-to-directx-11/#ShaderModels">[4]</a>.</p>
<table>
<tbody><tr>
<th>DirectX</th>
<th>Release Date</th>
<th>Shader Model</th>
<th>Shader Profile(s)</th>
</tr>
<tr>
<td>DirectX 8.0</td>
<td>November 12, 2000</td>
<td>Shader Model 1.0</td>
<td>vs_1_1</td>
</tr>
<tr>
<td>DirectX 9.0</td>
<td>November 19, 2002</td>
<td>Shader Model 2.0</td>
<td>vs_2_0, vs_2_x, ps_2_0, ps_2_x</td>
</tr>
<tr>
<td>DirectX 9.0c</td>
<td>August 4, 2004</td>
<td>Shader Model 3.0</td>
<td>vs_3_0, ps_3_0</td>
</tr>
<tr>
<td>DirectX 10.0</td>
<td>November 30, 2006</td>
<td>Shader Model 4.0</td>
<td>vs_4_0, ps_4_0, gs_4_0</td>
</tr>
<tr>
<td>DirectX 10.1</td>
<td>February 4, 2008</td>
<td>Shader Model 4.1</td>
<td>vs_4_1, ps_4_1, gs_4_1</td>
</tr>
<tr>
<td>DirectX 11.0</td>
<td>October 22, 2009</td>
<td>Shader Model 5.0</td>
<td>vs_5_0, ps_5_0, gs_5_0, ds_5_0, hs_5_0, cs_5_0</td>
</tr>
</tbody></table>
<span id="DirectX_11_Components"><h1>DirectX 11 Components</h1></span>
<p>As previously mentioned, the DirectX SDK is actually a collection of programming API’s. The DirectX API that deals with hardware accelerated 3D graphics is the Direc3D API (and the subject of this article) however there are several more API’s which make up the DirectX SDK.</p>
<span id="Direct2D"><h2>Direct2D</h2></span>
<p><strong>Direct2D</strong> is a hardware accelerated 2D graphics API which provides high-performance and high-quality rendering for 2D geometry, bitmaps, and text <a href="https://www.3dgep.com/introduction-to-directx-11/#Direct2D">[6]</a>.</p>
<span id="Direct3D"><h2>Direct3D</h2></span>
<p><strong>Direct3D</strong> is a hardware accelerated 3D graphics API <a href="https://www.3dgep.com/introduction-to-directx-11/#Direct3D_2">[7]</a>. This API is the subject of this article.</p>
<span id="DirectWrite"><h2>DirectWrite</h2></span>
<p><strong>DirectWrite</strong> API provides support for high-quality sub-pixel text rendering that can use <strong>Direct2D</strong>, <strong>GDI</strong> or application-specific rendering technology <a href="https://www.3dgep.com/introduction-to-directx-11/#DirectWrite">[8]</a>.</p>
<span id="DirectXMath"><h2>DirectXMath</h2></span>
<p>The <strong>DirectXMath</strong> API provides SIMD-friendly C++ types and functions for common linear algebra and graphics math operations common to DirectX applications <a href="https://www.3dgep.com/introduction-to-directx-11/#DirectXMath">[9]</a>. We will be using this math library for some simple math operations in the application code.</p>
<span id="XAudio2"><h2>XAudio2</h2></span>
<p><strong>XAudio2</strong> is a low-level audio API that provides signal processing and mixing foundation for developing high performance audio engines for games <a href="https://www.3dgep.com/introduction-to-directx-11/#XAudio2">[10]</a>.</p>
<span id="XInput"><h2>XInput</h2></span>
<p>XInput Game Controller API enables applications to receive input from the Xbox 360 Controller for Windows <a href="https://www.3dgep.com/introduction-to-directx-11/XInput">[11]</a>.</p>
<span id="DXGI"><h2>DXGI</h2></span>
<p>The purpose of the Microsoft DirectX Graphics Infrastructure (<strong>DXGI</strong>) is to manage low-level tasks that can be independent of the DirectX graphics runtime. You may want to work with DXGI directly if your application needs to enumerate devices or control how data is presented to an output <a href="https://www.3dgep.com/introduction-to-directx-11/#DXGI">[12]</a>. In this article, we will be using DXGI to enumerate the display devices in order to determine the optimal refresh rate of the screen.</p>
<span id="DirectX_11_Pipeline"><h1>DirectX 11 Pipeline</h1></span>
<p>The DirectX 11 Graphics pipeline consists of several stages. The following diagram illustrates the different stages of the DirectX 11 rendering pipeline. The arrow indicates the flow of data from each stage as well as the flow of data from memory resources such as buffers, textures, and constant buffers that are available on the GPU.</p>
<div id="attachment_5571" style="width: 698px" class="wp-caption alignnone"><a href="./Introduction to DirectX 113D Game Engine Programming_files/DirectX-11-Rendering-Pipeline.png"><img src="./Introduction to DirectX 113D Game Engine Programming_files/DirectX-11-Rendering-Pipeline.png" alt="DirectX 11 Rendering Pipeline" width="688" height="1234" class="size-full wp-image-5571" srcset="https://www.3dgep.com/wp-content/uploads/2014/03/DirectX-11-Rendering-Pipeline.png 688w, https://www.3dgep.com/wp-content/uploads/2014/03/DirectX-11-Rendering-Pipeline-167x300.png 167w" sizes="(max-width: 688px) 100vw, 688px"></a><p class="wp-caption-text">DirectX 11 Rendering Pipeline <a href="https://www.3dgep.com/introduction-to-directx-11/#DirectX_Pipeline">[13]</a></p></div>
<p>The image illustrates the 10 stages of the DirectX 11 rendering pipeline. The rectangular blocks are fixed-function stages and cannot be modified programmatically. The rounded-rectangular blocks indicate programmable stages of the pipeline.</p>
<span id="Input-Assembler_Stage"><h2>Input-Assembler Stage</h2></span>
<p>The first stage of the DirectX graphics pipeline is the <strong>Input-Assembler</strong> (<strong>IA</strong>) stage. In this stage, the geometry is specified and the layout of the data which is expected by the vertex shader is configured <a href="https://www.3dgep.com/introduction-to-directx-11/#DirectX_Pipeline">[13]</a>.</p>
<span id="Vertex_Shader_Stage"><h2>Vertex Shader Stage</h2></span>
<p>The <strong>Vertex Shader</strong> (<strong>VS</strong>) stage is usually responsible for transforming the vertex position from object space into clip space but it can also be used for performing skinning of skeletal animated meshes or per-vertex lighting <a href="https://www.3dgep.com/introduction-to-directx-11/#DirectX_Pipeline">[13]</a>. The input to the vertex shader is a single vertex and the minimum output from the vertex shader is a single vertex position in clip-space (the transformation to clip-space can also be performed by the tessellation stage or the geometry shader if either is active).</p>
<span id="Hull_Shader_Stage"><h2>Hull Shader Stage</h2></span>
<p>The <strong>Hull Shader</strong> (<strong>HS</strong>) stage is an optional shader stage and is responsible for determining how much an input control patch should be tessellated by the tessellation stage <a href="https://www.3dgep.com/introduction-to-directx-11/#Tessellation">[14]</a>.</p>
<span id="Tessellator_Stage"><h2>Tessellator Stage</h2></span>
<p>The <strong>Tessellator Stage</strong> is a fixed-function stage that subdivides a patch primitive into smaller primitives according to the tessellation factors specified by the hull shader stage <a href="https://www.3dgep.com/introduction-to-directx-11/#Tessellation">[14]</a>.</p>
<span id="Domain_Shader_Stage"><h2>Domain Shader Stage</h2></span>
<p>The <strong>Domain Shader</strong> (<strong>DS</strong>) stage is an optional shader stage and it computes the final vertex attributes based on the output control points from the hull shader and the interpolation coordinates from the tesselator stage <a href="https://www.3dgep.com/introduction-to-directx-11/#Tessellation">[14]</a>. The input to the domain shader is a single output point from the tessellator stage and the output is the computed attributes of the tessellated primitive.</p>
<span id="Geometry_Shader_Stage"><h2>Geometry Shader Stage</h2></span>
<p>The <strong>Geometry Shader</strong> (<strong>GS</strong>) stage is an optional shader stage that takes a single geometric primitive (a single vertex for a point primitive, three vertices for a triangle primitive, and two vertices for a line primitive) as input and can either discard the primitive, transform the primitive into another primitive type (for example a point to a quad) or generate additional primitives <a href="https://www.3dgep.com/introduction-to-directx-11/#DirectX_Pipeline">[13]</a>. </p>
<span id="Stream_Output_Stage"><h2>Stream Output Stage</h2></span>
<p>The <strong>Stream Output</strong> (<strong>SO</strong>) stage is an optional fixed-function stage that can be used to feed primitive data back into GPU memory. This data can be recirculated back to the rendering pipeline to be processed by another set of shaders <a href="https://www.3dgep.com/introduction-to-directx-11/#DirectX_Pipeline">[13]</a>. This is useful for spawning or terminating particles in a particle effect. The geometry shader can discard particles that should be terminated or generate new particles if particles should be spawned.</p>
<span id="Rasterizer_Stage"><h2>Rasterizer Stage</h2></span>
<p>The <strong>Rasterizer Stage</strong> (<strong>RS</strong>) stage is a fixed-function stage which will clip primitives into the view frustum and perform primitive culling if either front-face or back-face culling is enabled <a href="https://www.3dgep.com/introduction-to-directx-11/#DirectX_Pipeline">[13]</a>. The rasterizer stage will also interpolate the per-vertex attributes across the face of each primitive and pass the interpolated values to the pixel shader.</p>
<span id="Pixel_Shader_Stage"><h2>Pixel Shader Stage</h2></span>
<p>The <strong>Pixel Shader</strong> (<strong>PS</strong>) stage takes the interpolated per-vertex values from the rasterizer stage and produces one (or more) per-pixel color values <a href="https://www.3dgep.com/introduction-to-directx-11/#DirectX_Pipeline">[13]</a>. The pixel shader can also optionally output a depth value of the current pixel by mapping a single component 32-bit floating-point value to the <strong>SV_Depth</strong> semantic but this is not a requirement of the pixel shader program. The pixel shader is invoked once for each pixel that is covered by a primitive <a href="https://www.3dgep.com/introduction-to-directx-11/#Shader_Stages">[15]</a>.</p>
<span id="Output-Merger_Stage"><h2>Output-Merger Stage</h2></span>
<p>The <strong>Output-Merger</strong> (<strong>OM</strong>) stage combines the various types of output data (pixel shader output values, depth values, and stencil information) together with the contents of the currently bound render targets to produce the final pipeline result <a href="https://www.3dgep.com/introduction-to-directx-11/#DirectX_Pipeline">[13]</a>.</p>
<span id="DirectX_Demo"><h1>DirectX Demo</h1></span>
<p>Now that we have a little bit of background information regarding the different stages of DirectX 11 let’s try to put it together to create a simple DirectX application that is capable of rendering 3D geometry using a minimal vertex shader and pixel shader.</p>
<p>In this tutorial I will be using <strong>Visual Studio 2012</strong> to create a template project that can be used to create subsequent DirectX 11 demos in the future. Starting with Visual Studio 2012 and the <a href="http://msdn.microsoft.com/en-us/windows/desktop/hh852363.aspx" title="Windows 8 SDK" target="_blank">Windows 8 SDK</a> the DirecX SDK is now part of the Windows SDK so you do not need to download and install the DirectX SDK seperatly. See <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ee663275(v=vs.85).aspx" title="Where is the DirectX SDK?" target="_blank">Where is the DirectX SDK?</a> for more information.</p>
<p>Visual Studio 2012 also has the ability to compile your HLSL shader code as part of the regular compilation step and you can then load the precompiled shader code directly instead of compiling the shader code at runtime. This enables your application to load faster especially if you have many shaders. In this article I will show how you can setup your project to make use of shader compilation but I will also show you how you can load and compile your shader at runtime.</p>
<p>In this demo, I will not be using any 3rd party dependencies. All included headers and libraries are part of the Windows 8 SDK that comes with Visual Studio 2012 however you should make sure that you have applied the latest updates to Visual Studio 2012 so that you are working with the newest version of the Windows 8 SDK.</p>
<span id="DirectX_Project"><h2>DirectX Project</h2></span>
<p>The first step to creating our DirectX demo is to setup an empty Win32 project in Visual Studio. First, let’s startup Visual Studio.</p>
<div id="attachment_5580" style="width: 1103px" class="wp-caption alignnone"><a href="./Introduction to DirectX 113D Game Engine Programming_files/Visual-Studio-2012-DirectX.png"><img src="./Introduction to DirectX 113D Game Engine Programming_files/Visual-Studio-2012-DirectX.png" alt="Visual Studio 2012" width="1093" height="875" class="size-full wp-image-5580" srcset="https://www.3dgep.com/wp-content/uploads/2014/03/Visual-Studio-2012-DirectX.png 1093w, https://www.3dgep.com/wp-content/uploads/2014/03/Visual-Studio-2012-DirectX-300x240.png 300w, https://www.3dgep.com/wp-content/uploads/2014/03/Visual-Studio-2012-DirectX-1024x819.png 1024w, https://www.3dgep.com/wp-content/uploads/2014/03/Visual-Studio-2012-DirectX-374x300.png 374w, https://www.3dgep.com/wp-content/uploads/2014/03/Visual-Studio-2012-DirectX-900x720.png 900w" sizes="(max-width: 1093px) 100vw, 1093px"></a><p class="wp-caption-text">Visual Studio 2012</p></div>
<p>Select <strong>File &gt; New Project</strong> from the main menu to bring up the <strong>New Project</strong> dialog box.</p>
<div id="attachment_5581" style="width: 965px" class="wp-caption alignnone"><a href="./Introduction to DirectX 113D Game Engine Programming_files/Visual-Studio-2012-New-Project.png"><img src="./Introduction to DirectX 113D Game Engine Programming_files/Visual-Studio-2012-New-Project.png" alt="Visual Studio 2012 (New Project)" width="955" height="660" class="size-full wp-image-5581" srcset="https://www.3dgep.com/wp-content/uploads/2014/03/Visual-Studio-2012-New-Project.png 955w, https://www.3dgep.com/wp-content/uploads/2014/03/Visual-Studio-2012-New-Project-300x207.png 300w, https://www.3dgep.com/wp-content/uploads/2014/03/Visual-Studio-2012-New-Project-434x300.png 434w, https://www.3dgep.com/wp-content/uploads/2014/03/Visual-Studio-2012-New-Project-900x621.png 900w" sizes="(max-width: 955px) 100vw, 955px"></a><p class="wp-caption-text">Visual Studio 2012 (New Project)</p></div>
<p>In the <strong>New Project</strong> dialog box, select the <strong>Visual C++ &gt; Empty Project</strong> template. Choose a <strong>Name</strong>, <strong>Location</strong> and optionally a <strong>Solution name</strong> (or accept the default) for your new project and press the <strong>OK</strong> button to create the new project.</p>
<div id="attachment_5583" style="width: 1103px" class="wp-caption alignnone"><a href="./Introduction to DirectX 113D Game Engine Programming_files/Visual-Studio-2012-DirectXTemplate.png"><img src="./Introduction to DirectX 113D Game Engine Programming_files/Visual-Studio-2012-DirectXTemplate.png" alt="Visual Studio 2012 (DirectXTemplate)" width="1093" height="875" class="size-full wp-image-5583" srcset="https://www.3dgep.com/wp-content/uploads/2014/03/Visual-Studio-2012-DirectXTemplate.png 1093w, https://www.3dgep.com/wp-content/uploads/2014/03/Visual-Studio-2012-DirectXTemplate-300x240.png 300w, https://www.3dgep.com/wp-content/uploads/2014/03/Visual-Studio-2012-DirectXTemplate-1024x819.png 1024w, https://www.3dgep.com/wp-content/uploads/2014/03/Visual-Studio-2012-DirectXTemplate-374x300.png 374w, https://www.3dgep.com/wp-content/uploads/2014/03/Visual-Studio-2012-DirectXTemplate-900x720.png 900w" sizes="(max-width: 1093px) 100vw, 1093px"></a><p class="wp-caption-text">Visual Studio 2012 (DirectXTemplate)</p></div>
<p>Before we continue configuring the project, let’s create a single CPP source file.</p>
<p>Select <strong>Project &gt; Add New Item…</strong> from the main menu.</p>
<div id="attachment_5584" style="width: 965px" class="wp-caption alignnone"><a href="./Introduction to DirectX 113D Game Engine Programming_files/Visual-Studio-2012-Add-New-Item.png"><img src="./Introduction to DirectX 113D Game Engine Programming_files/Visual-Studio-2012-Add-New-Item.png" alt="Visual Studio 2012 (Add New Item)" width="955" height="660" class="size-full wp-image-5584" srcset="https://www.3dgep.com/wp-content/uploads/2014/03/Visual-Studio-2012-Add-New-Item.png 955w, https://www.3dgep.com/wp-content/uploads/2014/03/Visual-Studio-2012-Add-New-Item-300x207.png 300w, https://www.3dgep.com/wp-content/uploads/2014/03/Visual-Studio-2012-Add-New-Item-434x300.png 434w, https://www.3dgep.com/wp-content/uploads/2014/03/Visual-Studio-2012-Add-New-Item-900x621.png 900w" sizes="(max-width: 955px) 100vw, 955px"></a><p class="wp-caption-text">Visual Studio 2012 (Add New Item)</p></div>
<p>Select the <strong>Visual C++ &gt; C++ File (.cpp)</strong> template and specify the name <strong>main.cpp</strong> and a location for the new source file. I prefer to put my C++ source files in subdirectory with the name <strong>src</strong> relative to the project folder. Press the OK button to create the file and add it to the project.</p>
<p>We need at least one CPP source file in the project in order to configure the project correctly. With the main.cpp file added to the project, we can now configure the project settings.</p>
<span id="Project_Configuration"><h2>Project Configuration</h2></span>
<p>Open the project properties dialog by selecting <strong>Project &gt; Properties</strong> from the main menu.</p>
<div id="attachment_5585" style="width: 862px" class="wp-caption alignnone"><a href="./Introduction to DirectX 113D Game Engine Programming_files/Visual-Studio-2012-Project-Properties.png"><img src="./Introduction to DirectX 113D Game Engine Programming_files/Visual-Studio-2012-Project-Properties.png" alt="Visual Studio 2012 (Project Properties)" width="852" height="604" class="size-full wp-image-5585" srcset="https://www.3dgep.com/wp-content/uploads/2014/03/Visual-Studio-2012-Project-Properties.png 852w, https://www.3dgep.com/wp-content/uploads/2014/03/Visual-Studio-2012-Project-Properties-300x212.png 300w, https://www.3dgep.com/wp-content/uploads/2014/03/Visual-Studio-2012-Project-Properties-423x300.png 423w" sizes="(max-width: 852px) 100vw, 852px"></a><p class="wp-caption-text">Visual Studio 2012 (Project Properties)</p></div>
<p>In the <strong>Configuration</strong> drop-down box, select <strong>All Configurations</strong>.</p>
<p>Select <strong>Configuration Properties &gt; General</strong> and change the <strong>Output Directory</strong> to <strong>bin\</strong>.</p>
<p>In the <strong>Debug</strong> configuration only, change the <strong>Target Name</strong> to <strong>$(ProjectName)d</strong>. With this configuration, both the debug and the release builds will go to the same folder. To ensure we don’t replace release builds with debug builds and visa-versa, we will append the letter “d” to the end of the debug builds.</p>
<p>Select <strong>Configuration Properties &gt; Debugging</strong> and change the Working Directory to <strong>$(OutDir)</strong> for both the <strong>Debug</strong> and <strong>Release</strong> configurations. Doing this will ensure that the current working directory will be correctly set to the location of our executable file so that we can express paths in the application relative to the executable (instead of relative to the project folder which usually is a major cause of confusion for beginning programmers).</p>
<div id="attachment_5587" style="width: 862px" class="wp-caption alignnone"><a href="./Introduction to DirectX 113D Game Engine Programming_files/Visual-Studio-2012-Project-Properties-2.png"><img src="./Introduction to DirectX 113D Game Engine Programming_files/Visual-Studio-2012-Project-Properties-2.png" alt="Visual Studio 2012 (Project Properties)" width="852" height="604" class="size-full wp-image-5587" srcset="https://www.3dgep.com/wp-content/uploads/2014/03/Visual-Studio-2012-Project-Properties-2.png 852w, https://www.3dgep.com/wp-content/uploads/2014/03/Visual-Studio-2012-Project-Properties-2-300x212.png 300w, https://www.3dgep.com/wp-content/uploads/2014/03/Visual-Studio-2012-Project-Properties-2-423x300.png 423w" sizes="(max-width: 852px) 100vw, 852px"></a><p class="wp-caption-text">Visual Studio 2012 (Project Properties)</p></div>
<p>If you want to place your public include folders in a separate directory then we need to tell the C++ compiler where our include files are located. In the <strong>C/C++ &gt; General</strong> options add the name of the public include folder to the <strong>Additional Include Directories</strong> options. In my case, I have a separate folder called <strong>inc</strong> relative to my project folder where I will keep the header files for the project.</p>
<div id="attachment_5589" style="width: 862px" class="wp-caption alignnone"><a href="./Introduction to DirectX 113D Game Engine Programming_files/Visual-Studio-2012-Project-Properties-C-C++.png"><img src="./Introduction to DirectX 113D Game Engine Programming_files/Visual-Studio-2012-Project-Properties-C-C++.png" alt="Visual Studio 2012 (Project Properties - C/C++)" width="852" height="604" class="size-full wp-image-5589" srcset="https://www.3dgep.com/wp-content/uploads/2014/03/Visual-Studio-2012-Project-Properties-C-C++.png 852w, https://www.3dgep.com/wp-content/uploads/2014/03/Visual-Studio-2012-Project-Properties-C-C++-300x212.png 300w, https://www.3dgep.com/wp-content/uploads/2014/03/Visual-Studio-2012-Project-Properties-C-C++-423x300.png 423w" sizes="(max-width: 852px) 100vw, 852px"></a><p class="wp-caption-text">Visual Studio 2012 (Project Properties – C/C++)</p></div>
<p>You will notice that we do not need to specify the location of the DirectX headers and libraries when using Visual Studio 2012. These paths are automatically included when we create a new project in Visual Studio 2012. </p>
<span id="Precompiled_Header"><h2>Precompiled Header</h2></span>
<p>Although not absolutely necessary, I find using precompiled headers useful as it reduces the overall compile time of the project. For this small project, it may not be necessary to use precompiled headers but for large projects it is definitely useful to know how to setup precompiled headers.</p>
<p>For more information on creating and using precompiled header files for your Visual Studio project, please refer to <a href="http://msdn.microsoft.com/en-us/library/szfdksca.aspx" title="Creating Precompiled Header Files" target="_blank">Creating Precompiled Header Files</a> in the MSDN documentation.</p>
<p>Create a new header file in your project with the name <strong>DirectXTemplatePCH.h</strong> or something similar. The <strong>PCH</strong> postfix indicates that this file will be used to generate the precompiled header file.</p>
<p>Create a new C++ file in your project with the name <strong>DirectXTemplatePCH.cpp</strong>. This file will be used to create the precompiled header.</p>
<p>The content of the <strong>DirectXTemplatePCH.cpp</strong> file should contain only a single include statement and nothing else! If you have other include directives in this file or any C++ code then you are doing it wrong.</p>
<div class="notranslate">
<div><div id="highlighter_436584" class="syntaxhighlighter  cpp"><table border="0" cellpadding="0" cellspacing="0"><caption>DirectXTemplatePCH.cpp</caption><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="cpp preprocessor">#include &lt;DirectXTemplatePCH.h&gt;</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>Now that we’ve added the initial files that will be used for precompiled headers, let’s configure our project to create and use the precompiled headers.</p>
<p>Select <strong>Project &gt; Properties</strong> from the main menu.</p>
<div id="attachment_5592" style="width: 862px" class="wp-caption alignnone"><a href="./Introduction to DirectX 113D Game Engine Programming_files/Visual-Studio-2012-Project-Properties-Precompiled-Headers.png"><img src="./Introduction to DirectX 113D Game Engine Programming_files/Visual-Studio-2012-Project-Properties-Precompiled-Headers.png" alt="Visual Studio 2012 (Project Properties - Precompiled Headers)" width="852" height="604" class="size-full wp-image-5592" srcset="https://www.3dgep.com/wp-content/uploads/2014/03/Visual-Studio-2012-Project-Properties-Precompiled-Headers.png 852w, https://www.3dgep.com/wp-content/uploads/2014/03/Visual-Studio-2012-Project-Properties-Precompiled-Headers-300x212.png 300w, https://www.3dgep.com/wp-content/uploads/2014/03/Visual-Studio-2012-Project-Properties-Precompiled-Headers-423x300.png 423w" sizes="(max-width: 852px) 100vw, 852px"></a><p class="wp-caption-text">Visual Studio 2012 (Project Properties – Precompiled Headers)</p></div>
<p>Make sure that <strong>All Configurations</strong> is selected in the <strong>Configuration</strong> drop-down box.</p>
<p>Select <strong>Configuration Properties &gt; C/C++ &gt; Precompiled Headers</strong> and set the <strong>Precompiled Header</strong> option to <strong>Use (/Yu)</strong>.</p>
<p>Set the <strong>Precompiled Header File</strong> option to the name of the header file you created in the previous step. In my case the name of the precompiled header file is <strong>DirectXTemlatePCH.h</strong>.</p>
<p>Apply the settings and without closing the project properties dialog box, select the <strong>DirectXTemplatePCH.cpp</strong> source file in the <strong>Solution Explorer</strong>.</p>
<div id="attachment_5593" style="width: 862px" class="wp-caption alignnone"><a href="./Introduction to DirectX 113D Game Engine Programming_files/Visual-Studio-2012-Project-Properties-DirectXTemplate.cpp_.png"><img src="./Introduction to DirectX 113D Game Engine Programming_files/Visual-Studio-2012-Project-Properties-DirectXTemplate.cpp_.png" alt="Visual Studio 2012 (Project Properties - DirectXTemplatePCH.cpp)" width="852" height="604" class="size-full wp-image-5593" srcset="https://www.3dgep.com/wp-content/uploads/2014/03/Visual-Studio-2012-Project-Properties-DirectXTemplate.cpp_.png 852w, https://www.3dgep.com/wp-content/uploads/2014/03/Visual-Studio-2012-Project-Properties-DirectXTemplate.cpp_-300x212.png 300w, https://www.3dgep.com/wp-content/uploads/2014/03/Visual-Studio-2012-Project-Properties-DirectXTemplate.cpp_-423x300.png 423w" sizes="(max-width: 852px) 100vw, 852px"></a><p class="wp-caption-text">Visual Studio 2012 (Project Properties – DirectXTemplatePCH.cpp)</p></div>
<p>For the <strong>DirectXTemplatePCH.cpp</strong> source file only, change the <strong>Precompiled Header</strong> option to <strong>Create (/Yc)</strong> and the other options should be the same as we specified at the project level.</p>
<p>With these settings configured, let’s start writing some code!</p>
<span id="Global_Header"><h2>Global Header</h2></span>
<p>The global header file will contain all of the external (non changing) include files. You should not include project specific header files in the global header file because they are changing often. If the contents of the global header file change often then we can no longer take advantage of precompiled headers.</p>
<div class="notranslate">
<div><div id="highlighter_27953" class="syntaxhighlighter  cpp"><table border="0" cellpadding="0" cellspacing="0"><caption>DirectXTemplatePCH.h</caption><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="cpp comments">// System includes</code></div><div class="line number2 index1 alt1"><code class="cpp preprocessor">#include &lt;windows.h&gt;</code></div><div class="line number3 index2 alt2">&nbsp;</div><div class="line number4 index3 alt1"><code class="cpp comments">// DirectX includes</code></div><div class="line number5 index4 alt2"><code class="cpp preprocessor">#include &lt;d3d11.h&gt;</code></div><div class="line number6 index5 alt1"><code class="cpp preprocessor">#include &lt;d3dcompiler.h&gt;</code></div><div class="line number7 index6 alt2"><code class="cpp preprocessor">#include &lt;DirectXMath.h&gt;</code></div><div class="line number8 index7 alt1"><code class="cpp preprocessor">#include &lt;DirectXColors.h&gt;</code></div><div class="line number9 index8 alt2">&nbsp;</div><div class="line number10 index9 alt1"><code class="cpp comments">// STL includes</code></div><div class="line number11 index10 alt2"><code class="cpp preprocessor">#include &lt;iostream&gt;</code></div><div class="line number12 index11 alt1"><code class="cpp preprocessor">#include &lt;string&gt;</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>Since we are creating a Windows application, we first include the ubiquitous Windows header file. This header file contains all of the definitions for creating a Windows based application.</p>
<p>The next set of headers includes the Direct3D API. The <strong>d3dcompiler</strong> header file is required for loading and compiling HLSL shaders. The <strong>DirectXMath</strong> header file includes math primitives like vectors, matrices and quaternions as well as the functions to operate on those primitives. The <strong>DirectXColors</strong> header defines a set of commonly used colors.</p>
<div class="notranslate">
<div><div id="highlighter_43802" class="syntaxhighlighter  cpp"><table border="0" cellpadding="0" cellspacing="0"><caption>DirectXTemplatePCH.h</caption><tbody><tr><td class="gutter"><div class="line number14 index0 alt1">14</div><div class="line number15 index1 alt2">15</div><div class="line number16 index2 alt1">16</div><div class="line number17 index3 alt2">17</div><div class="line number18 index4 alt1">18</div></td><td class="code"><div class="container"><div class="line number14 index0 alt1"><code class="cpp comments">// Link library dependencies</code></div><div class="line number15 index1 alt2"><code class="cpp preprocessor">#pragma comment(lib, "d3d11.lib")</code></div><div class="line number16 index2 alt1"><code class="cpp preprocessor">#pragma comment(lib, "dxgi.lib")</code></div><div class="line number17 index3 alt2"><code class="cpp preprocessor">#pragma comment(lib, "d3dcompiler.lib")</code></div><div class="line number18 index4 alt1"><code class="cpp preprocessor">#pragma comment(lib, "winmm.lib")</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>This set of statements will cause the library dependencies to be automatically linked in the linker stage. You can also specify these libraries in the <strong>Additional Dependencies</strong> property in the <strong>Linker</strong> options if you want but putting them here simplifies the project configuration settings. Also if you were creating a library project, this file could be included in the global header file of another project to perform automatic linking of the required library dependencies.</p>
<div class="notranslate">
<div><div id="highlighter_158810" class="syntaxhighlighter  cpp"><table border="0" cellpadding="0" cellspacing="0"><caption>DirectXTemplatePCH.h</caption><tbody><tr><td class="gutter"><div class="line number20 index0 alt1">20</div><div class="line number21 index1 alt2">21</div><div class="line number22 index2 alt1">22</div><div class="line number23 index3 alt2">23</div><div class="line number24 index4 alt1">24</div><div class="line number25 index5 alt2">25</div><div class="line number26 index6 alt1">26</div><div class="line number27 index7 alt2">27</div><div class="line number28 index8 alt1">28</div><div class="line number29 index9 alt2">29</div></td><td class="code"><div class="container"><div class="line number20 index0 alt1"><code class="cpp comments">// Safely release a COM object.</code></div><div class="line number21 index1 alt2"><code class="cpp keyword bold">template</code><code class="cpp plain">&lt;</code><code class="cpp keyword bold">typename</code> <code class="cpp plain">T&gt;</code></div><div class="line number22 index2 alt1"><code class="cpp keyword bold">inline</code> <code class="cpp keyword bold">void</code> <code class="cpp plain">SafeRelease( T&amp; ptr )</code></div><div class="line number23 index3 alt2"><code class="cpp plain">{</code></div><div class="line number24 index4 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">if</code> <code class="cpp plain">( ptr != NULL )</code></div><div class="line number25 index5 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">{</code></div><div class="line number26 index6 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">ptr-&gt;Release();</code></div><div class="line number27 index7 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">ptr = NULL;</code></div><div class="line number28 index8 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number29 index9 alt2"><code class="cpp plain">}</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>The <strong>SafeRelease</strong> function can be used to safely release a COM object and set the COM pointer to NULL. This function allows us to safely release a COM object even if it has already been released before. Since we will be releasing COM objects a lot in this application, this function will also allow us to create neater code.</p>
<span id="Preamble"><h2>Preamble</h2></span>
<p>Before we get into the application code, we first need to define some global variables that will be used throughout the demo. </p>
<p>We first need to include the global header file that we created in the previous step.</p>
<div class="notranslate">
<div><div id="highlighter_860371" class="syntaxhighlighter  cpp"><table border="0" cellpadding="0" cellspacing="0"><caption>main.cpp</caption><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="cpp preprocessor">#include &lt;DirectXTemplatePCH.h&gt;</code></div><div class="line number2 index1 alt1"><code class="cpp keyword bold">using</code> <code class="cpp keyword bold">namespace</code> <code class="cpp plain">DirectX;</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>On line 2 I include the <strong>DirectX</strong> namespace into the global namespace. All of the functions and types defined in the <strong>DirectXMath</strong> API are wrapped in the DirectX namespace. I got really tired of typing out the DirectX namespace every time I wanted to use a vector or a matrix so instead I just import the namespace.</p>
<p>The first set of globals define some properties for the application window.</p>
<div class="notranslate">
<div><div id="highlighter_924136" class="syntaxhighlighter  cpp"><table border="0" cellpadding="0" cellspacing="0"><caption>main.cpp</caption><tbody><tr><td class="gutter"><div class="line number4 index0 alt1">4</div><div class="line number5 index1 alt2">5</div><div class="line number6 index2 alt1">6</div><div class="line number7 index3 alt2">7</div><div class="line number8 index4 alt1">8</div><div class="line number9 index5 alt2">9</div><div class="line number10 index6 alt1">10</div></td><td class="code"><div class="container"><div class="line number4 index0 alt1"><code class="cpp keyword bold">const</code> <code class="cpp color1 bold">LONG</code> <code class="cpp plain">g_WindowWidth = 1280;</code></div><div class="line number5 index1 alt2"><code class="cpp keyword bold">const</code> <code class="cpp color1 bold">LONG</code> <code class="cpp plain">g_WindowHeight = 720;</code></div><div class="line number6 index2 alt1"><code class="cpp color1 bold">LPCSTR</code> <code class="cpp plain">g_WindowClassName = </code><code class="cpp string">"DirectXWindowClass"</code><code class="cpp plain">;</code></div><div class="line number7 index3 alt2"><code class="cpp color1 bold">LPCSTR</code> <code class="cpp plain">g_WindowName = </code><code class="cpp string">"DirectX Template"</code><code class="cpp plain">;</code></div><div class="line number8 index4 alt1"><code class="cpp color1 bold">HWND</code> <code class="cpp plain">g_WindowHandle = 0;</code></div><div class="line number9 index5 alt2">&nbsp;</div><div class="line number10 index6 alt1"><code class="cpp keyword bold">const</code> <code class="cpp color1 bold">BOOL</code> <code class="cpp plain">g_EnableVSync = TRUE;</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>The size of the window is defined by the <strong>g_WindowWidth</strong>, and <strong>g_WindowHeight</strong> variables. The actual window that we will create will be slightly larger than this because these variables actually define the size of the renderable area (or client area) of the window. The actual window size including the window frame will be computed before the actual window is created.</p>
<p>Before we can create a window instance, we need to create a window class. The window class should be unique for our application so we need to define a unique name for the class as well. The unique window class name is defined using the <strong>g_WindowClassName</strong> global variable. </p>
<p>The <strong>g_WindowName</strong> variable holds the name of the window that will be created from the window class. The window name will also be displayed in the top of the window frame.</p>
<p>The <strong>g_WindowHandle</strong> is used to identify the instance of the window that will be created.</p>
<p>A regular LCD or LED computer monitor has a vertical refresh rate of 60 Hz. That means that the image displayed on the screen is presented 60 times per second. When rendering your 3D application, you can choose to let your application display the image at the same rate as the screen’s refresh rate. The advantage of synchronizing your applications display rate with the refresh rate of the screen is that it eliminates any visible artifacts known as <a href="http://en.wikipedia.org/wiki/Screen_tearing" title="Screen Tearing" target="_blank">screen tearing</a>. If you want to render your scene as fast as possible, you can set the <strong>g_EnableVSync</strong> variable to <strong>FALSE</strong> and then your application will not wait for the vertical refresh of the screen to present the scene on the screen.</p>
<p>These are all of the variables that we need to define for the application window. The next set of variables will be DirectX specific.</p>
<div class="notranslate">
<div><div id="highlighter_59759" class="syntaxhighlighter  cpp"><table border="0" cellpadding="0" cellspacing="0"><caption>main.cpp</caption><tbody><tr><td class="gutter"><div class="line number12 index0 alt1">12</div><div class="line number13 index1 alt2">13</div><div class="line number14 index2 alt1">14</div><div class="line number15 index3 alt2">15</div><div class="line number16 index4 alt1">16</div><div class="line number17 index5 alt2">17</div><div class="line number18 index6 alt1">18</div><div class="line number19 index7 alt2">19</div><div class="line number20 index8 alt1">20</div><div class="line number21 index9 alt2">21</div><div class="line number22 index10 alt1">22</div><div class="line number23 index11 alt2">23</div><div class="line number24 index12 alt1">24</div><div class="line number25 index13 alt2">25</div><div class="line number26 index14 alt1">26</div><div class="line number27 index15 alt2">27</div><div class="line number28 index16 alt1">28</div></td><td class="code"><div class="container"><div class="line number12 index0 alt1"><code class="cpp comments">// Direct3D device and swap chain.</code></div><div class="line number13 index1 alt2"><code class="cpp plain">ID3D11Device* g_d3dDevice = nullptr;</code></div><div class="line number14 index2 alt1"><code class="cpp plain">ID3D11DeviceContext* g_d3dDeviceContext = nullptr;</code></div><div class="line number15 index3 alt2"><code class="cpp plain">IDXGISwapChain* g_d3dSwapChain = nullptr;</code></div><div class="line number16 index4 alt1">&nbsp;</div><div class="line number17 index5 alt2"><code class="cpp comments">// Render target view for the back buffer of the swap chain.</code></div><div class="line number18 index6 alt1"><code class="cpp plain">ID3D11RenderTargetView* g_d3dRenderTargetView = nullptr;</code></div><div class="line number19 index7 alt2"><code class="cpp comments">// Depth/stencil view for use as a depth buffer.</code></div><div class="line number20 index8 alt1"><code class="cpp plain">ID3D11DepthStencilView* g_d3dDepthStencilView = nullptr;</code></div><div class="line number21 index9 alt2"><code class="cpp comments">// A texture to associate to the depth stencil view.</code></div><div class="line number22 index10 alt1"><code class="cpp plain">ID3D11Texture2D* g_d3dDepthStencilBuffer = nullptr;</code></div><div class="line number23 index11 alt2">&nbsp;</div><div class="line number24 index12 alt1"><code class="cpp comments">// Define the functionality of the depth/stencil stages.</code></div><div class="line number25 index13 alt2"><code class="cpp plain">ID3D11DepthStencilState* g_d3dDepthStencilState = nullptr;</code></div><div class="line number26 index14 alt1"><code class="cpp comments">// Define the functionality of the rasterizer stage.</code></div><div class="line number27 index15 alt2"><code class="cpp plain">ID3D11RasterizerState* g_d3dRasterizerState = nullptr;</code></div><div class="line number28 index16 alt1"><code class="cpp plain">D3D11_VIEWPORT g_Viewport = {0};</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>The <strong>g_d3dDevice</strong>, <strong>g_d3dDeviceContext</strong>, and <strong>g_d3dSwapChain</strong> are the absolute minimum variables required for the most basic DirectX 11 application. A <strong>ID3D11Device</strong> instance is used for allocating GPU resources such as buffers, textures, shaders, and state objects (to name a few). The <strong>ID3D11DeviceContext</strong> is used to configure the rendering pipeline and draw geometry. The <strong>IDXGISwapChain</strong> stores the buffers that are used for rendering data. This interface is also used to determine how the buffers are swapped when the rendered image should be presented to the screen.</p>
<p>The <strong>g_d3dRenderTargetView</strong> and the <strong>g_d3dDepthStencilView</strong> variables are used to define the subresource view of the area of a buffer to which we will draw to. A resource view defines an area of a buffer that can be used for rendering. In this case we need two views, the <strong>g_d3dRenderTargetView</strong> will refer to a subresource of a color buffer while the <strong>g_d3dDepthStencilView</strong> will refer to a subresource of a depth/stencil buffer.</p>
<p>The <strong>IDXGISwapChain</strong> instance has only a single color buffer that will be used to store the final color that is to be presented on the screen. In order to store depth information, we must create a separate depth buffer. The <strong>g_d3dDepthStencilBuffer</strong> will be used to refer to a 2D texture object that will be used to store the depth values so that objects close to the camera do not get overdrawn by objects that are farther away from the camera regardless of their drawing order.</p>
<p>We also need to define a few state variables for configuring the rasterizer and output-merger stages. The <strong>g_d3dDepthStencilState</strong> will be used to store the depth and stencil states used by the output-merger stage and the <strong>g_d3dRasterizerState</strong> variable will be used to store rasterizer state used by the rasterizer stage.</p>
<p>The <strong>g_Viewport</strong> variable defines the size of the viewport rectangle. The viewport rectangle is also used by the rasterizer stage to determine the renderable area on screen. You can use multiple viewports to implement split-screen multiplayer games.</p>
<p>The next set of variables that will be declared are specific to this demo and not generic for DirectX initialization.</p>
<div class="notranslate">
<div><div id="highlighter_680499" class="syntaxhighlighter  cpp"><table border="0" cellpadding="0" cellspacing="0"><caption>main.cpp</caption><tbody><tr><td class="gutter"><div class="line number30 index0 alt1">30</div><div class="line number31 index1 alt2">31</div><div class="line number32 index2 alt1">32</div><div class="line number33 index3 alt2">33</div><div class="line number34 index4 alt1">34</div><div class="line number35 index5 alt2">35</div><div class="line number36 index6 alt1">36</div><div class="line number37 index7 alt2">37</div></td><td class="code"><div class="container"><div class="line number30 index0 alt1"><code class="cpp comments">// Vertex buffer data</code></div><div class="line number31 index1 alt2"><code class="cpp plain">ID3D11InputLayout* g_d3dInputLayout = nullptr;</code></div><div class="line number32 index2 alt1"><code class="cpp plain">ID3D11Buffer* g_d3dVertexBuffer = nullptr;</code></div><div class="line number33 index3 alt2"><code class="cpp plain">ID3D11Buffer* g_d3dIndexBuffer = nullptr;</code></div><div class="line number34 index4 alt1">&nbsp;</div><div class="line number35 index5 alt2"><code class="cpp comments">// Shader data</code></div><div class="line number36 index6 alt1"><code class="cpp plain">ID3D11VertexShader* g_d3dVertexShader = nullptr;</code></div><div class="line number37 index7 alt2"><code class="cpp plain">ID3D11PixelShader* g_d3dPixelShader = nullptr;</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>The <strong>g_d3dInputLayout</strong> variable will be used to describe the order and type of data that is expected by the vertex shader.</p>
<p>The <strong>g_d3dVertexBuffer</strong> and <strong>g_d3dIndexBuffer</strong> variables will be used to store the vertex data and the index list that defines the geometry which will be rendered. The vertex buffer stores the data for each unique vertex in the geometry. In this demo, each vertex will store it’s position in 3D space and the color of the vertex. The index buffer stores a list of indices into the vertex buffer. The order of the indices in the index buffer determines the order that vertices in the vertex buffer are sent to the GPU for rendering.</p>
<p>For this simple demo, we will have two shaders, a vertex shader and a pixel shader. The <strong>g_d3dVertexShader</strong> variable will hold a reference to the vertex shader object and the <strong>g_d3dPixelShader</strong> will store a reference to the pixel shader.</p>
<p>Next we’ll declare set of buffers that will be used to update the constant variables that are declared in the vertex shader.</p>
<div class="notranslate">
<div><div id="highlighter_696883" class="syntaxhighlighter  cpp"><table border="0" cellpadding="0" cellspacing="0"><caption>main.cpp</caption><tbody><tr><td class="gutter"><div class="line number39 index0 alt2">39</div><div class="line number40 index1 alt1">40</div><div class="line number41 index2 alt2">41</div><div class="line number42 index3 alt1">42</div><div class="line number43 index4 alt2">43</div><div class="line number44 index5 alt1">44</div><div class="line number45 index6 alt2">45</div><div class="line number46 index7 alt1">46</div><div class="line number47 index8 alt2">47</div><div class="line number48 index9 alt1">48</div></td><td class="code"><div class="container"><div class="line number39 index0 alt2"><code class="cpp comments">// Shader resources</code></div><div class="line number40 index1 alt1"><code class="cpp keyword bold">enum</code> <code class="cpp plain">ConstanBuffer</code></div><div class="line number41 index2 alt2"><code class="cpp plain">{</code></div><div class="line number42 index3 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">CB_Appliation,</code></div><div class="line number43 index4 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">CB_Frame,</code></div><div class="line number44 index5 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">CB_Object,</code></div><div class="line number45 index6 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">NumConstantBuffers</code></div><div class="line number46 index7 alt1"><code class="cpp plain">};</code></div><div class="line number47 index8 alt2">&nbsp;</div><div class="line number48 index9 alt1"><code class="cpp plain">ID3D11Buffer* g_d3dConstantBuffers[NumConstantBuffers];</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>Here we declare three constant buffers. Constant buffers are used to store shader variables that remain constant during current draw call. An example of a constant shader variable is the camera’s projection matrix. Since the projection matrix will be the same for every vertex of the object, this variable does not need to be passed to the shader using vertex data. Instead, we declare a constant buffer that stores the projection matrix of the camera and this shader variable only needs to be updated when the camera’s projection matrix is modified (which is to say, not often).</p>
<ol>
<li><strong>Application</strong>: The application level constant buffer stores variables that rarely change. The contents of this constant buffer are being updated once during application startup and perhaps are not updated again. An example of an application level shader variable is the camera’s projection matrix. Usually the projection matrix is initialized once when the render window is created and only needs to be updated if the dimensions of the render window are changed (for example, if the window is resized).</li>
<li><strong>Frame</strong>: The frame level constant buffer stores variables that change each frame. An example of a frame level shader variable would be the camera’s view matrix which changes whenever the camera moves. This variable only needs to be updated once at the beginning of the render function and generally stays the same for all objects rendered that frame.</li>
<li><strong>Object</strong>: The object level constant buffer stores variables that are different for every object being rendered. An example of an object level shader variable is the object’s world matrix. Since each object in the scene will probably have a different world matrix this shader variable needs to be updated for every separate draw call.</li>
</ol>
<p>This separation of shader variables is arbitrary and you can choose whatever method you would like to separate your constant buffers in your own shaders. Generally you should split up constant buffers in your shader based on the frequency the variables need to be updated.</p>
<p>The next set of variables define the variables that will be updated by the application and used to populate the variables in the constant buffers of the shader.</p>
<div class="notranslate">
<div><div id="highlighter_608980" class="syntaxhighlighter  cpp"><table border="0" cellpadding="0" cellspacing="0"><caption>main.cpp</caption><tbody><tr><td class="gutter"><div class="line number50 index0 alt1">50</div><div class="line number51 index1 alt2">51</div><div class="line number52 index2 alt1">52</div><div class="line number53 index3 alt2">53</div></td><td class="code"><div class="container"><div class="line number50 index0 alt1"><code class="cpp comments">// Demo parameters</code></div><div class="line number51 index1 alt2"><code class="cpp plain">XMMATRIX g_WorldMatrix;</code></div><div class="line number52 index2 alt1"><code class="cpp plain">XMMATRIX g_ViewMatrix;</code></div><div class="line number53 index3 alt2"><code class="cpp plain">XMMATRIX g_ProjectionMatrix;</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>We will only draw a single object on the screen in this demo. For this reason, we only need to keep track of a single world matrix which will transform the object’s vertices into world space. The <strong>g_WorldMatrix</strong> is a 4×4 matrix which will be used to store the world matrix of the cube in our scene.</p>
<p>The <strong>g_ViewMatrix</strong> only needs to be updated once per frame and is used to store the camera’s view matrix that will transform the object’s vertices from world space into view space.</p>
<p>The <strong>g_ProjectionMatrix</strong> is updated once at the beginning of the application and is used to store the projection matrix of the camera. The projection matrix will transform the object’s vertices from view space into clip space (which is required by the rasterizer).</p>
<p>Next, we’ll define the geometry for the single object that will be rendered in our scene.</p>
<div class="notranslate">
<div><div id="highlighter_226047" class="syntaxhighlighter  cpp"><table border="0" cellpadding="0" cellspacing="0"><caption>main.cpp</caption><tbody><tr><td class="gutter"><div class="line number55 index0 alt2">55</div><div class="line number56 index1 alt1">56</div><div class="line number57 index2 alt2">57</div><div class="line number58 index3 alt1">58</div><div class="line number59 index4 alt2">59</div><div class="line number60 index5 alt1">60</div><div class="line number61 index6 alt2">61</div><div class="line number62 index7 alt1">62</div><div class="line number63 index8 alt2">63</div><div class="line number64 index9 alt1">64</div><div class="line number65 index10 alt2">65</div><div class="line number66 index11 alt1">66</div><div class="line number67 index12 alt2">67</div><div class="line number68 index13 alt1">68</div><div class="line number69 index14 alt2">69</div><div class="line number70 index15 alt1">70</div><div class="line number71 index16 alt2">71</div><div class="line number72 index17 alt1">72</div><div class="line number73 index18 alt2">73</div><div class="line number74 index19 alt1">74</div><div class="line number75 index20 alt2">75</div><div class="line number76 index21 alt1">76</div><div class="line number77 index22 alt2">77</div><div class="line number78 index23 alt1">78</div><div class="line number79 index24 alt2">79</div><div class="line number80 index25 alt1">80</div><div class="line number81 index26 alt2">81</div><div class="line number82 index27 alt1">82</div></td><td class="code"><div class="container"><div class="line number55 index0 alt2"><code class="cpp comments">// Vertex data for a colored cube.</code></div><div class="line number56 index1 alt1"><code class="cpp keyword bold">struct</code> <code class="cpp plain">VertexPosColor</code></div><div class="line number57 index2 alt2"><code class="cpp plain">{</code></div><div class="line number58 index3 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">XMFLOAT3 Position;</code></div><div class="line number59 index4 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">XMFLOAT3 Color;</code></div><div class="line number60 index5 alt1"><code class="cpp plain">};</code></div><div class="line number61 index6 alt2">&nbsp;</div><div class="line number62 index7 alt1"><code class="cpp plain">VertexPosColor g_Vertices[8] = </code></div><div class="line number63 index8 alt2"><code class="cpp plain">{</code></div><div class="line number64 index9 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">{ XMFLOAT3( -1.0f, -1.0f, -1.0f ), XMFLOAT3( 0.0f, 0.0f, 0.0f ) }, </code><code class="cpp comments">// 0</code></div><div class="line number65 index10 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">{ XMFLOAT3( -1.0f,&nbsp; 1.0f, -1.0f ), XMFLOAT3( 0.0f, 1.0f, 0.0f ) }, </code><code class="cpp comments">// 1</code></div><div class="line number66 index11 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">{ XMFLOAT3(&nbsp; 1.0f,&nbsp; 1.0f, -1.0f ), XMFLOAT3( 1.0f, 1.0f, 0.0f ) }, </code><code class="cpp comments">// 2</code></div><div class="line number67 index12 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">{ XMFLOAT3(&nbsp; 1.0f, -1.0f, -1.0f ), XMFLOAT3( 1.0f, 0.0f, 0.0f ) }, </code><code class="cpp comments">// 3</code></div><div class="line number68 index13 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">{ XMFLOAT3( -1.0f, -1.0f,&nbsp; 1.0f ), XMFLOAT3( 0.0f, 0.0f, 1.0f ) }, </code><code class="cpp comments">// 4</code></div><div class="line number69 index14 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">{ XMFLOAT3( -1.0f,&nbsp; 1.0f,&nbsp; 1.0f ), XMFLOAT3( 0.0f, 1.0f, 1.0f ) }, </code><code class="cpp comments">// 5</code></div><div class="line number70 index15 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">{ XMFLOAT3(&nbsp; 1.0f,&nbsp; 1.0f,&nbsp; 1.0f ), XMFLOAT3( 1.0f, 1.0f, 1.0f ) }, </code><code class="cpp comments">// 6</code></div><div class="line number71 index16 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">{ XMFLOAT3(&nbsp; 1.0f, -1.0f,&nbsp; 1.0f ), XMFLOAT3( 1.0f, 0.0f, 1.0f ) }&nbsp; </code><code class="cpp comments">// 7</code></div><div class="line number72 index17 alt1"><code class="cpp plain">};</code></div><div class="line number73 index18 alt2">&nbsp;</div><div class="line number74 index19 alt1"><code class="cpp color1 bold">WORD</code> <code class="cpp plain">g_Indicies[36] = </code></div><div class="line number75 index20 alt2"><code class="cpp plain">{</code></div><div class="line number76 index21 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">0, 1, 2, 0, 2, 3,</code></div><div class="line number77 index22 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">4, 6, 5, 4, 7, 6,</code></div><div class="line number78 index23 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">4, 5, 1, 4, 1, 0, </code></div><div class="line number79 index24 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">3, 2, 6, 3, 6, 7,</code></div><div class="line number80 index25 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">1, 5, 6, 1, 6, 2, </code></div><div class="line number81 index26 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">4, 0, 3, 4, 3, 7</code></div><div class="line number82 index27 alt1"><code class="cpp plain">};</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>The <strong>VertexPosColor</strong> struct defines the properties of a single vertex. In this case the <strong>Position</strong> member variable will be used to store the position of the vertex in 3D space and the <strong>Color</strong> member variable will be used to store the red, green, and blue components of the vertex’s color.</p>
<p>The cube geometry that we will render consists of 8 unique vertices (one for each corner of the cube). We cannot simply send the cube geometry directly to the rendering pipeline as-is because the rendering pipeline only knows about points, lines, and triangles (not cubes, spheres, or any other complex shape). In order to create a set of triangles we need to define an index list which determines the order the vertices are sent to the GPU for rendering. In this case, each face of the cube consists of two triangles, an upper and a lower triangle. The first face of the triangle consists of six vertices: { {0, 1, 2}, {0, 2, 3} }. You will notice that in order to create the face, we will duplicate vertex 0, and 2. </p>
<p>When creating the index buffer for our geometry, we must also take the winding order of the vertices into consideration. The winding order of front-facing triangles is determined by the rasterizer state and we can specify that the winding order should be either clock-wise or counter-clockwise. This choice is arbitrary but it will have an impact on the order of the indices in the index buffer. For this demo, we will consider front-facing triangles to be in a clock-wise winding order. The diagram below shows the winding order for the first face of the cube.</p>
<div id="attachment_5603" style="width: 392px" class="wp-caption alignnone"><a href="./Introduction to DirectX 113D Game Engine Programming_files/Clock-wise-winding-order.png"><img src="./Introduction to DirectX 113D Game Engine Programming_files/Clock-wise-winding-order.png" alt="Clockwise Winding Order" width="382" height="374" class="size-full wp-image-5603" srcset="https://www.3dgep.com/wp-content/uploads/2014/03/Clock-wise-winding-order.png 382w, https://www.3dgep.com/wp-content/uploads/2014/03/Clock-wise-winding-order-300x293.png 300w, https://www.3dgep.com/wp-content/uploads/2014/03/Clock-wise-winding-order-306x300.png 306w" sizes="(max-width: 382px) 100vw, 382px"></a><p class="wp-caption-text">Clockwise Winding Order</p></div>
<p>The lower triangle of the face consists of vertices { 0, 1, 2 } and the upper triangle of the face consists of vertices { 0, 2, 3 }. The gray dashed line represents the triangle subdivision of the face.</p>
<p>The last part of the preamble is the function declarations.</p>
<div class="notranslate">
<div><div id="highlighter_268206" class="syntaxhighlighter  cpp"><table border="0" cellpadding="0" cellspacing="0"><caption>main.cpp</caption><tbody><tr><td class="gutter"><div class="line number86 index0 alt1">86</div><div class="line number87 index1 alt2">87</div><div class="line number88 index2 alt1">88</div><div class="line number89 index3 alt2">89</div><div class="line number90 index4 alt1">90</div><div class="line number91 index5 alt2">91</div><div class="line number92 index6 alt1">92</div><div class="line number93 index7 alt2">93</div><div class="line number94 index8 alt1">94</div><div class="line number95 index9 alt2">95</div><div class="line number96 index10 alt1">96</div><div class="line number97 index11 alt2">97</div></td><td class="code"><div class="container"><div class="line number86 index0 alt1"><code class="cpp comments">// Forward declarations.</code></div><div class="line number87 index1 alt2"><code class="cpp color1 bold">LRESULT</code> <code class="cpp plain">CALLBACK WndProc (</code><code class="cpp color1 bold">HWND</code> <code class="cpp plain">hwnd, </code><code class="cpp color1 bold">UINT</code> <code class="cpp plain">message, </code><code class="cpp color1 bold">WPARAM</code> <code class="cpp plain">wParam, </code><code class="cpp color1 bold">LPARAM</code> <code class="cpp plain">lParam);</code></div><div class="line number88 index2 alt1">&nbsp;</div><div class="line number89 index3 alt2"><code class="cpp keyword bold">template</code><code class="cpp plain">&lt; </code><code class="cpp keyword bold">class</code> <code class="cpp plain">ShaderClass &gt;</code></div><div class="line number90 index4 alt1"><code class="cpp plain">ShaderClass* LoadShader( </code><code class="cpp keyword bold">const</code> <code class="cpp plain">std::wstring&amp; fileName, </code><code class="cpp keyword bold">const</code> <code class="cpp plain">std::string&amp; entryPoint, </code><code class="cpp keyword bold">const</code> <code class="cpp plain">std::string&amp; profile );</code></div><div class="line number91 index5 alt2">&nbsp;</div><div class="line number92 index6 alt1"><code class="cpp color1 bold">bool</code> <code class="cpp plain">LoadContent();</code></div><div class="line number93 index7 alt2"><code class="cpp keyword bold">void</code> <code class="cpp plain">UnloadContent();</code></div><div class="line number94 index8 alt1">&nbsp;</div><div class="line number95 index9 alt2"><code class="cpp keyword bold">void</code> <code class="cpp plain">Update( </code><code class="cpp color1 bold">float</code> <code class="cpp plain">deltaTime );</code></div><div class="line number96 index10 alt1"><code class="cpp keyword bold">void</code> <code class="cpp plain">Render();</code></div><div class="line number97 index11 alt2"><code class="cpp keyword bold">void</code> <code class="cpp plain">Cleanup();</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>The <strong>WndProc</strong> function is the function that will handle any mouse, keyboard, and window events that are sent to our application window.</p>
<p>The <strong>LoadShader</strong> template function will be used to load and compile a shader at runtime. It’s templated on the type of shader that is being loaded.</p>
<p>The <strong>LoadContent</strong>, and <strong>UnloadContent</strong> functions will load the demo specific resources such as the vertex buffer and index buffer GPU resources for our cube geometry.</p>
<p>The <strong>Update</strong> function will be used to update any logic required by our demo.</p>
<p>The <strong>Render</strong> function will render the scene.</p>
<p>The <strong>Cleanup</strong> function is used to release any DirectX specific resources like the device, device context, and swap chain.</p>
<span id="The_Main_Window"><h2>The Main Window</h2></span>
<p>The first thing our application will do is initialize and create the window. We will create a function called <strong>InitApplication</strong> for this purpose. First we’ll register a window class and then we’ll create a window using that window class.</p>
<div class="notranslate">
<div><div id="highlighter_325647" class="syntaxhighlighter  cpp"><table border="0" cellpadding="0" cellspacing="0"><caption>main.cpp</caption><tbody><tr><td class="gutter"><div class="line number99 index0 alt2">99</div><div class="line number100 index1 alt1">100</div><div class="line number101 index2 alt2">101</div><div class="line number102 index3 alt1">102</div><div class="line number103 index4 alt2">103</div><div class="line number104 index5 alt1">104</div><div class="line number105 index6 alt2">105</div><div class="line number106 index7 alt1">106</div><div class="line number107 index8 alt2">107</div><div class="line number108 index9 alt1">108</div><div class="line number109 index10 alt2">109</div><div class="line number110 index11 alt1">110</div><div class="line number111 index12 alt2">111</div><div class="line number112 index13 alt1">112</div><div class="line number113 index14 alt2">113</div><div class="line number114 index15 alt1">114</div><div class="line number115 index16 alt2">115</div><div class="line number116 index17 alt1">116</div><div class="line number117 index18 alt2">117</div></td><td class="code"><div class="container"><div class="line number99 index0 alt2"><code class="cpp comments">/**</code></div><div class="line number100 index1 alt1"><code class="cpp spaces">&nbsp;</code><code class="cpp comments">* Initialize the application window.</code></div><div class="line number101 index2 alt2"><code class="cpp spaces">&nbsp;</code><code class="cpp comments">*/</code></div><div class="line number102 index3 alt1"><code class="cpp color1 bold">int</code> <code class="cpp plain">InitApplication( </code><code class="cpp color1 bold">HINSTANCE</code> <code class="cpp plain">hInstance, </code><code class="cpp color1 bold">int</code> <code class="cpp plain">cmdShow )</code></div><div class="line number103 index4 alt2"><code class="cpp plain">{</code></div><div class="line number104 index5 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">WNDCLASSEX wndClass = {0};</code></div><div class="line number105 index6 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">wndClass.cbSize = </code><code class="cpp keyword bold">sizeof</code><code class="cpp plain">( WNDCLASSEX );</code></div><div class="line number106 index7 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">wndClass.style = CS_HREDRAW | CS_VREDRAW;</code></div><div class="line number107 index8 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">wndClass.lpfnWndProc = &amp;WndProc;</code></div><div class="line number108 index9 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">wndClass.hInstance = hInstance;</code></div><div class="line number109 index10 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">wndClass.hCursor = LoadCursor( nullptr, IDC_ARROW );</code></div><div class="line number110 index11 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">wndClass.hbrBackground = (</code><code class="cpp color1 bold">HBRUSH</code><code class="cpp plain">)(COLOR_WINDOW+1);</code></div><div class="line number111 index12 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">wndClass.lpszMenuName = nullptr;</code></div><div class="line number112 index13 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">wndClass.lpszClassName = g_WindowClassName;</code></div><div class="line number113 index14 alt2">&nbsp;</div><div class="line number114 index15 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">if</code> <code class="cpp plain">( !RegisterClassEx(&amp;wndClass) )</code></div><div class="line number115 index16 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">{</code></div><div class="line number116 index17 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">return</code> <code class="cpp plain">-1;</code></div><div class="line number117 index18 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">}</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>The window class defines a set of attributes which define a window template. Each window your application creates must have a window class registered which is required to create the window.</p>
<p>The <strong>WNDCLASSEX</strong> structure has the following definition <a href="https://www.3dgep.com/introduction-to-directx-11/#WNDCLASSEX">[16]</a>:</p>
<div class="notranslate">
<div><div id="highlighter_163045" class="syntaxhighlighter  cpp"><table border="0" cellpadding="0" cellspacing="0"><caption>WNDCLASSEX structure</caption><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="cpp keyword bold">typedef</code> <code class="cpp keyword bold">struct</code> <code class="cpp plain">tagWNDCLASSEX {</code></div><div class="line number2 index1 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp color1 bold">UINT</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="cpp plain">cbSize;</code></div><div class="line number3 index2 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp color1 bold">UINT</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="cpp plain">style;</code></div><div class="line number4 index3 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">WNDPROC&nbsp;&nbsp; lpfnWndProc;</code></div><div class="line number5 index4 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp color1 bold">int</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="cpp plain">cbClsExtra;</code></div><div class="line number6 index5 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp color1 bold">int</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="cpp plain">cbWndExtra;</code></div><div class="line number7 index6 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp color1 bold">HINSTANCE</code> <code class="cpp plain">hInstance;</code></div><div class="line number8 index7 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp color1 bold">HICON</code>&nbsp;&nbsp;&nbsp;&nbsp; <code class="cpp plain">hIcon;</code></div><div class="line number9 index8 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp color1 bold">HCURSOR</code>&nbsp;&nbsp; <code class="cpp plain">hCursor;</code></div><div class="line number10 index9 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp color1 bold">HBRUSH</code>&nbsp;&nbsp;&nbsp; <code class="cpp plain">hbrBackground;</code></div><div class="line number11 index10 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp color1 bold">LPCTSTR</code>&nbsp;&nbsp; <code class="cpp plain">lpszMenuName;</code></div><div class="line number12 index11 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp color1 bold">LPCTSTR</code>&nbsp;&nbsp; <code class="cpp plain">lpszClassName;</code></div><div class="line number13 index12 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp color1 bold">HICON</code>&nbsp;&nbsp;&nbsp;&nbsp; <code class="cpp plain">hIconSm;</code></div><div class="line number14 index13 alt1"><code class="cpp plain">} WNDCLASSEX, *PWNDCLASSEX;</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>And the members have the following definition:</p>
<ul>
<li><strong>UINT cbSize</strong>: The size, in bytes, of this structure. Set this member to sizeof(WNDCLASSEX).</li>
<li><strong>UINT style</strong>: The class style. In this case we use the <strong>CS_HREDRAW</strong> class style which causes the entire window to redraw if a movement or size adjustment changes the width of the client area and the <strong>CS_VREDRAW</strong> class style which causes the entire window to redraw if a movement or a size adjustment changes the height of the client area.</li>
<li><strong>WNDPROC lpfnWndProc</strong>: A pointer to the windows procedure that will handle window events for any windows created using this class. In this case we specify the yet undefined <strong>WndProc</strong> function which was declared earlier.</li>
<li><strong>int cbClsExtra</strong>: The number of extra bytes to allocate following the window-class structure. This parameter is not used here and should be set to 0.</li>
<li><strong>int cpWndExtra</strong>: The number of extra bytes to allocate following the window instance. This parameter is not used here and should be set to 0.</li>
<li><strong>HINSTANCE hInstance</strong>: A handle to the instance of the module that owns this window class. This module instance handle is passed to the <strong>WinMain</strong> function which will be shown later.</li>
<li><strong>HICON hIcon</strong>: A handle to the class icon. This icon will be used to represent a window created with this class in the task bar and in the top-left corner of the window’s title bar. You can load an icon from a resource file using the <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ms648072(v=vs.85).aspx" title="LoadIcon function" target="_blank">LoadIcon</a> function. If this value is <strong>NULL</strong> (or <strong>nullptr</strong>) then the default application icon is used.</li>
<li><strong>HCURSOR hCursor</strong>: A handle to the class cursor. This must be a handle to a valid cursor resource. For this demo, we will use the default arrow icon by specifying <strong>LoadCursor( nullptr, IDC_ARROW )</strong>.</li>
<li><strong>HBRUSH hbrBackground</strong>: A handle to the class background brush. This member can be a handle to the brush to be used for painting the background, or it can be a color value. A color value must be one of the following standard system colors (the value 1 must be added to the chosen color). If a color value is given, you must convert it to one of the following <strong>HBRUSH</strong> types:
<ul>
<li><strong>COLOR_ACTIVEBORDER</strong></li>
<li><strong>COLOR_ACTIVECAPTION</strong></li>
<li><strong>COLOR_APPWORKSPACE</strong></li>
<li><strong>COLOR_BACKGROUND</strong></li>
<li><strong>COLOR_BTNFACE</strong></li>
<li><strong>COLOR_BTNSHADOW</strong></li>
<li><strong>COLOR_BTNTEXT</strong></li>
<li><strong>COLOR_CAPTIONTEXT</strong></li>
<li><strong>COLOR_GRAYTEXT</strong></li>
<li><strong>COLOR_HIGHLIGHT</strong></li>
<li><strong>COLOR_HIGHLIGHTTEXT</strong></li>
<li><strong>COLOR_INACTIVEBORDER</strong></li>
<li><strong>COLOR_INACTIVECAPTION</strong></li>
<li><strong>COLOR_MENU</strong></li>
<li><strong>COLOR_MENUTEXT</strong></li>
<li><strong>COLOR_SCROLLBAR</strong></li>
<li><strong>COLOR_WINDOW</strong></li>
<li><strong>COLOR_WINDOWFRAME</strong></li>
<li><strong>COLOR_WINDOWTEXT</strong></li>
</ul>
</li>
<li><strong>LPCTSTR lpszMenuName</strong>: Pointer to a null-terminated character string that specifies the resource name of the class menu, as the name appears in the resource file. If this member is NULL, windows belonging to this class have no default menu.</li>
<li><strong>LPCTSTR lpszClassName</strong>: A pointer to a null-terminated const string which is used to uniquely identify this window class. This class name will be used to create the window instance.</li>
<li><strong>HICON hIconSm</strong>: A handle to a small icon that is associated with the window class. If this member is <strong>NULL</strong> (or nullptr), the system searches the icon resource specified by the <strong>hIcon</strong> member for an icon of the appropriate size to use as the small icon.</li>
</ul>
<p>With the window class structure initialized, the window class is registered on line 114 using the <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ms633587(v=vs.85).aspx" title="RegisterClassEx" target="_blank">RegisterClassEx</a> function.</p>
<p>With the window class registered, we can create a window instance using this class.</p>
<div class="notranslate">
<div><div id="highlighter_635695" class="syntaxhighlighter  cpp"><table border="0" cellpadding="0" cellspacing="0"><caption>main.cpp</caption><tbody><tr><td class="gutter"><div class="line number120 index0 alt1">120</div><div class="line number121 index1 alt2">121</div><div class="line number122 index2 alt1">122</div><div class="line number123 index3 alt2">123</div><div class="line number124 index4 alt1">124</div><div class="line number125 index5 alt2">125</div><div class="line number126 index6 alt1">126</div><div class="line number127 index7 alt2">127</div><div class="line number128 index8 alt1">128</div><div class="line number129 index9 alt2">129</div><div class="line number130 index10 alt1">130</div><div class="line number131 index11 alt2">131</div><div class="line number132 index12 alt1">132</div><div class="line number133 index13 alt2">133</div><div class="line number134 index14 alt1">134</div><div class="line number135 index15 alt2">135</div><div class="line number136 index16 alt1">136</div><div class="line number137 index17 alt2">137</div><div class="line number138 index18 alt1">138</div></td><td class="code"><div class="container"><div class="line number120 index0 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">RECT windowRect = { 0, 0, g_WindowWidth, g_WindowHeight };</code></div><div class="line number121 index1 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">AdjustWindowRect( &amp;windowRect, WS_OVERLAPPEDWINDOW, FALSE );</code></div><div class="line number122 index2 alt1">&nbsp;</div><div class="line number123 index3 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">g_WindowHandle = CreateWindowA( g_WindowClassName, g_WindowName, </code></div><div class="line number124 index4 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">WS_OVERLAPPEDWINDOW, CW_USEDEFAULT, CW_USEDEFAULT, </code></div><div class="line number125 index5 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">windowRect.right - windowRect.left, </code></div><div class="line number126 index6 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">windowRect.bottom - windowRect.top, </code></div><div class="line number127 index7 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">nullptr, nullptr, hInstance, nullptr );</code></div><div class="line number128 index8 alt1">&nbsp;</div><div class="line number129 index9 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">if</code> <code class="cpp plain">( !g_WindowHandle )</code></div><div class="line number130 index10 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">{</code></div><div class="line number131 index11 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">return</code> <code class="cpp plain">-1;</code></div><div class="line number132 index12 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number133 index13 alt2">&nbsp;</div><div class="line number134 index14 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">ShowWindow( g_WindowHandle, cmdShow );</code></div><div class="line number135 index15 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">UpdateWindow( g_WindowHandle );</code></div><div class="line number136 index16 alt1">&nbsp;</div><div class="line number137 index17 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">return</code> <code class="cpp plain">0;</code></div><div class="line number138 index18 alt1"><code class="cpp plain">}</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>We want to create a window with a client area of <strong>g_WindowWidth</strong> by <strong>g_WindowHeight</strong> but if we create a window with those dimensions, the client are will be slightly smaller. In order to get a window with a client area the size we want, we can use the <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ms632665(v=vs.85).aspx" title="AdjustWindowRect" target="_blank">AdjustWindowRect</a> function to adjust the inital window rectangle to account for the window style.</p>
<p>The window instance is created using the <strong>CreateWindow</strong> function. This function has the following signature <a href="https://www.3dgep.com/introduction-to-directx-11/#CreateWindow">[18]</a>:</p>
<div class="notranslate">
<div><div id="highlighter_321005" class="syntaxhighlighter  cpp"><table border="0" cellpadding="0" cellspacing="0"><caption>CreateWindow function</caption><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="cpp color1 bold">HWND</code> <code class="cpp plain">WINAPI CreateWindow(</code></div><div class="line number2 index1 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">_In_opt_&nbsp; </code><code class="cpp color1 bold">LPCTSTR</code> <code class="cpp plain">lpClassName,</code></div><div class="line number3 index2 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">_In_opt_&nbsp; </code><code class="cpp color1 bold">LPCTSTR</code> <code class="cpp plain">lpWindowName,</code></div><div class="line number4 index3 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">_In_&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp color1 bold">DWORD</code> <code class="cpp plain">dwStyle,</code></div><div class="line number5 index4 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">_In_&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp color1 bold">int</code> <code class="cpp plain">x,</code></div><div class="line number6 index5 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">_In_&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp color1 bold">int</code> <code class="cpp plain">y,</code></div><div class="line number7 index6 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">_In_&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp color1 bold">int</code> <code class="cpp plain">nWidth,</code></div><div class="line number8 index7 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">_In_&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp color1 bold">int</code> <code class="cpp plain">nHeight,</code></div><div class="line number9 index8 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">_In_opt_&nbsp; </code><code class="cpp color1 bold">HWND</code> <code class="cpp plain">hWndParent,</code></div><div class="line number10 index9 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">_In_opt_&nbsp; </code><code class="cpp color1 bold">HMENU</code> <code class="cpp plain">hMenu,</code></div><div class="line number11 index10 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">_In_opt_&nbsp; </code><code class="cpp color1 bold">HINSTANCE</code> <code class="cpp plain">hInstance,</code></div><div class="line number12 index11 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">_In_opt_&nbsp; </code><code class="cpp color1 bold">LPVOID</code> <code class="cpp plain">lpParam</code></div><div class="line number13 index12 alt2"><code class="cpp plain">);</code></div></div></td></tr></tbody></table></div></div>
</div>
<div class="my-note">
The <strong>_In_</strong>, <strong>_Out_</strong>, <strong>_Outptr_</strong>, <strong>_Inout_</strong> etc. macros are part of Microsoft’s Source-code Annotation Language (SAL) <a href="https://www.3dgep.com/introduction-to-directx-11/#SAL">[17]</a> and primarily used to describe how a function uses its prameters. Any annotation which includes <strong>_opt_</strong> indicates that the parameter is optional and can be <strong>NULL</strong>.
</div>
<p>And the properties to this function have the following definition:</p>
<ul>
<li><strong>LPCTSTR lpClassName</strong>: The name of the window class to use as a template to create the window instance. The class name must match one of the classes that were previously registered using <strong>RegisterClass</strong> or <strong>RegisterClassEx</strong> and associated to the <strong>hInstance</strong> module.</li>
<li><strong>LPCTSTR lpWindowName</strong>: The name of the window instance. When creating a window with a title bar, the window name will be displayed in the title bar.</li>
<li><strong>DWORD dwStyle</strong>: The style of the window being created. This parameter can be a combination of any of the <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ms632600(v=vs.85).aspx" title="Window Styles" target="_blank">window styles</a>.</li>
<li><strong>int x</strong>: The initial horizontal position of the window. For an overlapped or pop-up window, the x parameter is the initial x-coordinate of the window’s upper-left corner, in screen coordinates. If this parameter is set to <strong>CW_USEDEFAULT</strong>, the system selects the default position for the window’s upper-left corner and ignores the y parameter.</li>
<li><strong>int y</strong>: The initial vertical position of the window. For an overlapped or pop-up window, the y parameter is the initial y-coordinate of the window’s upper-left corner, in screen coordinates. If an overlapped window is created with the <strong>WS_VISIBLE</strong> style bit set and the x parameter is set to <strong>CW_USEDEFAULT</strong>, then the y parameter determines how the window is shown. If the y parameter is <strong>CW_USEDEFAULT</strong>, then the window manager calls <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ms633548(v=vs.85).aspx" title="ShowWindow" target="_blank">ShowWindow</a> with the <strong>SW_SHOW</strong> flag after the window has been created. If the y parameter is some other value, then the window manager calls <strong>ShowWindow</strong> with that value as the <strong>nCmdShow</strong> parameter.</li>
<li><strong>int nWidth</strong>: The width, in device units, of the window. For overlapped windows, nWidth is either the window’s width, in screen coordinates, or <strong>CW_USEDEFAULT</strong>. If <strong>nWidth</strong> is <strong>CW_USEDEFAULT</strong>, the system selects a default width and height for the window; the default width extends from the initial x-coordinate to the right edge of the screen, and the default height extends from the initial y-coordinate to the top of the icon area. <strong>CW_USEDEFAULT</strong> is valid only for overlapped windows. In this case, we set the initial window width to the total width of the adjusted window rectangle.</li>
<li><strong>int nHeight</strong>: The height, in device units, of the window. For overlapped windows, <strong>nHeight</strong> is the window’s height, in screen coordinates. If <strong>nWidth</strong> is set to <strong>CW_USEDEFAULT</strong>, the system ignores <strong>nHeight</strong>. In this case, we set the initial window height to the total height of the adjusted window rectangle.</li>
<li><strong>HWND hWndParent</strong>: A handle to the parent window. Since we are creating a top-level window, this parameter can be <strong>NULL</strong> (or nullptr).</li>
<li><strong>HMENU hMenu</strong>: A handle to a window or NULL to use the menu that was specified in the window class template. If both the window class and this parameter are <strong>NULL</strong>, no menu will be created for this window.</li>
<li><strong>HINSTANCE hInstance</strong>: A handle to the instance of the module to be associated with the window.</li>
<li><strong>LPVOID lpParam</strong>: A pointer to a value to be passed to the window through the <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ms632603(v=vs.85).aspx" title="CREATESTRUCT structure" target="_blank">CREATESTRUCT</a> structure (<strong>lpCreateParams</strong> member) pointed to by the lParam param of the <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ms632619(v=vs.85).aspx" title="WM_CREATE message" target="_blank">WM_CREATE</a> message. This message is sent to the created window by this function before it returns.</li>
</ul>
<p>If the window creation succeeded, the window is shown with the <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ms633548(v=vs.85).aspx" title="ShowWindow" target="_blank">ShowWindow</a> function and the <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/dd145167(v=vs.85).aspx" title="UpdateWindow" target="_blank">UpdateWindow</a> function is called to force the client area of the window to be painted.</p>
<p>Before we continue, let’s take a look at what a minimum windows procedure function must contain.</p>
<span id="Windows_Procedure_Function"><h2>Windows Procedure Function</h2></span>
<p>The windows procedure function is the function that is assigned to the <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ms633577(v=vs.85).aspx" title="WNDCLASSEX structure" target="_blank">WNDCLASSEX</a> structure’s <strong>lpfnWndProc</strong> member variable when we registered the window class. All windows created with with the same class will have the same window procedure function.</p>
<p>The purpose of the windows procedure callback function to to process messages sent to the window.</p>
<p>The windows procedure callback function has the following signature <a href="https://www.3dgep.com/introduction-to-directx-11/#WindowProc">[52]</a>:</p>
<div class="notranslate">
<div><div id="highlighter_979592" class="syntaxhighlighter  cpp"><table border="0" cellpadding="0" cellspacing="0"><caption>WindowProc callback function</caption><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="cpp color1 bold">LRESULT</code> <code class="cpp plain">CALLBACK WindowProc(</code></div><div class="line number2 index1 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">_In_&nbsp; </code><code class="cpp color1 bold">HWND</code> <code class="cpp plain">hwnd,</code></div><div class="line number3 index2 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">_In_&nbsp; </code><code class="cpp color1 bold">UINT</code> <code class="cpp plain">uMsg,</code></div><div class="line number4 index3 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">_In_&nbsp; </code><code class="cpp color1 bold">WPARAM</code> <code class="cpp plain">wParam,</code></div><div class="line number5 index4 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">_In_&nbsp; </code><code class="cpp color1 bold">LPARAM</code> <code class="cpp plain">lParam</code></div><div class="line number6 index5 alt1"><code class="cpp plain">);</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>Where:</p>
<ul>
<li><strong>HWND hwnd</strong>: A handle to the window for which the event is intended.</li>
<li><strong>UINT uMsg</strong>: The event message. For lists of the system-provided messages, see <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ms644927(v=vs.85).aspx#system_defined" title="About Messages and Message Queues" target="_blank">System-Defined Messages</a>.</li>
<li><strong>WPARAM wParam</strong>: Additional message information. The contents of this parameter depend on the value of the <strong>uMsg</strong> parameter.</li>
<li><strong>LPARAM lParam</strong>: Additional message information. The contents of this parameter depend on the value of the <strong>uMsg</strong> parameter.</li>
</ul>
<p>The return value is the result of the message processing and depends on the message sent <a href="https://www.3dgep.com/introduction-to-directx-11/#WindowProc">[52]</a>.</p>
<p>For this demo, we will implement a minimum message handling function that only responds to the <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/dd145213(v=vs.85).aspx" title="WM_PAINT message" target="_blank">WM_PAINT</a> and <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ms632620(v=vs.85).aspx" title="WM_DESTROY message" target="_blank">WM_DESTROY</a> windows messages. All other messages will be handled by the <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ms633572(v=vs.85).aspx" title="DefWindowProc function" target="_blank">DefWindowProc</a> function.</p>
<div class="notranslate">
<div><div id="highlighter_577142" class="syntaxhighlighter  cpp"><table border="0" cellpadding="0" cellspacing="0"><caption>main.cpp</caption><tbody><tr><td class="gutter"><div class="line number780 index0 alt1">780</div><div class="line number781 index1 alt2">781</div><div class="line number782 index2 alt1">782</div><div class="line number783 index3 alt2">783</div><div class="line number784 index4 alt1">784</div><div class="line number785 index5 alt2">785</div><div class="line number786 index6 alt1">786</div><div class="line number787 index7 alt2">787</div><div class="line number788 index8 alt1">788</div><div class="line number789 index9 alt2">789</div><div class="line number790 index10 alt1">790</div><div class="line number791 index11 alt2">791</div><div class="line number792 index12 alt1">792</div><div class="line number793 index13 alt2">793</div><div class="line number794 index14 alt1">794</div><div class="line number795 index15 alt2">795</div><div class="line number796 index16 alt1">796</div><div class="line number797 index17 alt2">797</div><div class="line number798 index18 alt1">798</div><div class="line number799 index19 alt2">799</div><div class="line number800 index20 alt1">800</div><div class="line number801 index21 alt2">801</div><div class="line number802 index22 alt1">802</div><div class="line number803 index23 alt2">803</div></td><td class="code"><div class="container"><div class="line number780 index0 alt1"><code class="cpp color1 bold">LRESULT</code> <code class="cpp plain">CALLBACK WndProc (</code><code class="cpp color1 bold">HWND</code> <code class="cpp plain">hwnd, </code><code class="cpp color1 bold">UINT</code> <code class="cpp plain">message, </code><code class="cpp color1 bold">WPARAM</code> <code class="cpp plain">wParam, </code><code class="cpp color1 bold">LPARAM</code> <code class="cpp plain">lParam)</code></div><div class="line number781 index1 alt2"><code class="cpp plain">{</code></div><div class="line number782 index2 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">PAINTSTRUCT paintStruct;</code></div><div class="line number783 index3 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp color1 bold">HDC</code> <code class="cpp plain">hDC;</code></div><div class="line number784 index4 alt1">&nbsp;</div><div class="line number785 index5 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">switch</code> <code class="cpp plain">( message )</code></div><div class="line number786 index6 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">{</code></div><div class="line number787 index7 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">case</code> <code class="cpp plain">WM_PAINT:</code></div><div class="line number788 index8 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">{</code></div><div class="line number789 index9 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">hDC = BeginPaint( hwnd, &amp;paintStruct );</code></div><div class="line number790 index10 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">EndPaint( hwnd, &amp;paintStruct );</code></div><div class="line number791 index11 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number792 index12 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">break</code><code class="cpp plain">;</code></div><div class="line number793 index13 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">case</code> <code class="cpp plain">WM_DESTROY:</code></div><div class="line number794 index14 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">{</code></div><div class="line number795 index15 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">PostQuitMessage( 0 );</code></div><div class="line number796 index16 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number797 index17 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">break</code><code class="cpp plain">;</code></div><div class="line number798 index18 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">default</code><code class="cpp plain">: </code></div><div class="line number799 index19 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">return</code> <code class="cpp plain">DefWindowProc( hwnd, message, wParam, lParam );</code></div><div class="line number800 index20 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number801 index21 alt2">&nbsp;</div><div class="line number802 index22 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">return</code> <code class="cpp plain">0;</code></div><div class="line number803 index23 alt2"><code class="cpp plain">}</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>At a minimum, the window procedure must respond to the <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/dd145213(v=vs.85).aspx" title="WM_PAINT message" target="_blank">WM_PAINT</a> window message. We don’t actually do any rendering with this message except erase the window’s background contents using the window class’s background brush (<strong>hbrBackground</strong> variable of the <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ms633577(v=vs.85).aspx" title="WNDCLASSEX structure" target="_blank">WNDCLASSEX</a> structure).</p>
<p>In order to close the window, we will also respond to the <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ms632620(v=vs.85).aspx" title="WM_DESTROY message" target="_blank">WM_DESTROY</a> window message which simply calls the <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ms644945(v=vs.85).aspx" title="PostQuitMessage function" target="_blank">PostQuitMessage</a> function which will be handled in <strong>Run</strong> function which we will define in the next section.</p>
<span id="The_Run_Method"><h2>The Run Method</h2></span>
<p>Before we can display the window, we need to create our main game loop. To execute the main game loop, we will create a <strong>Run</strong> function which will continue to execute until the user decides to quit (by pressing the big red cross on the top-right side of the window).</p>
<div class="notranslate">
<div><div id="highlighter_746843" class="syntaxhighlighter  cpp"><table border="0" cellpadding="0" cellspacing="0"><caption>main.cpp</caption><tbody><tr><td class="gutter"><div class="line number705 index0 alt2">705</div><div class="line number706 index1 alt1">706</div><div class="line number707 index2 alt2">707</div><div class="line number708 index3 alt1">708</div><div class="line number709 index4 alt2">709</div><div class="line number710 index5 alt1">710</div><div class="line number711 index6 alt2">711</div><div class="line number712 index7 alt1">712</div><div class="line number713 index8 alt2">713</div><div class="line number714 index9 alt1">714</div><div class="line number715 index10 alt2">715</div><div class="line number716 index11 alt1">716</div><div class="line number717 index12 alt2">717</div><div class="line number718 index13 alt1">718</div><div class="line number719 index14 alt2">719</div><div class="line number720 index15 alt1">720</div><div class="line number721 index16 alt2">721</div><div class="line number722 index17 alt1">722</div><div class="line number723 index18 alt2">723</div><div class="line number724 index19 alt1">724</div><div class="line number725 index20 alt2">725</div><div class="line number726 index21 alt1">726</div><div class="line number727 index22 alt2">727</div><div class="line number728 index23 alt1">728</div><div class="line number729 index24 alt2">729</div><div class="line number730 index25 alt1">730</div><div class="line number731 index26 alt2">731</div><div class="line number732 index27 alt1">732</div><div class="line number733 index28 alt2">733</div><div class="line number734 index29 alt1">734</div><div class="line number735 index30 alt2">735</div><div class="line number736 index31 alt1">736</div><div class="line number737 index32 alt2">737</div><div class="line number738 index33 alt1">738</div><div class="line number739 index34 alt2">739</div></td><td class="code"><div class="container"><div class="line number705 index0 alt2"><code class="cpp comments">/**</code></div><div class="line number706 index1 alt1"><code class="cpp spaces">&nbsp;</code><code class="cpp comments">* The main application loop.</code></div><div class="line number707 index2 alt2"><code class="cpp spaces">&nbsp;</code><code class="cpp comments">*/</code></div><div class="line number708 index3 alt1"><code class="cpp color1 bold">int</code> <code class="cpp plain">Run()</code></div><div class="line number709 index4 alt2"><code class="cpp plain">{</code></div><div class="line number710 index5 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">MSG msg = {0};</code></div><div class="line number711 index6 alt2">&nbsp;</div><div class="line number712 index7 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">static</code> <code class="cpp color1 bold">DWORD</code> <code class="cpp plain">previousTime = timeGetTime();</code></div><div class="line number713 index8 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">static</code> <code class="cpp keyword bold">const</code> <code class="cpp color1 bold">float</code> <code class="cpp plain">targetFramerate = 30.0f;</code></div><div class="line number714 index9 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">static</code> <code class="cpp keyword bold">const</code> <code class="cpp color1 bold">float</code> <code class="cpp plain">maxTimeStep = 1.0f / targetFramerate;</code></div><div class="line number715 index10 alt2">&nbsp;</div><div class="line number716 index11 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">while</code> <code class="cpp plain">( msg.message != WM_QUIT )</code></div><div class="line number717 index12 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">{</code></div><div class="line number718 index13 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">if</code> <code class="cpp plain">( PeekMessage( &amp;msg, 0, 0, 0, PM_REMOVE ) )</code></div><div class="line number719 index14 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">{</code></div><div class="line number720 index15 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">TranslateMessage( &amp;msg );</code></div><div class="line number721 index16 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">DispatchMessage( &amp;msg );</code></div><div class="line number722 index17 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number723 index18 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">else</code></div><div class="line number724 index19 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">{</code></div><div class="line number725 index20 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp color1 bold">DWORD</code> <code class="cpp plain">currentTime = timeGetTime();</code></div><div class="line number726 index21 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp color1 bold">float</code> <code class="cpp plain">deltaTime = ( currentTime - previousTime ) / 1000.0f;</code></div><div class="line number727 index22 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">previousTime = currentTime;</code></div><div class="line number728 index23 alt1">&nbsp;</div><div class="line number729 index24 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp comments">// Cap the delta time to the max time step (useful if your </code></div><div class="line number730 index25 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp comments">// debugging and you don't want the deltaTime value to explode.</code></div><div class="line number731 index26 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">deltaTime = std::min&lt;</code><code class="cpp color1 bold">float</code><code class="cpp plain">&gt;(deltaTime, maxTimeStep);</code></div><div class="line number732 index27 alt1">&nbsp;</div><div class="line number733 index28 alt2"><code class="cpp comments">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Update( deltaTime );</code></div><div class="line number734 index29 alt1"><code class="cpp comments">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Render();</code></div><div class="line number735 index30 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number736 index31 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number737 index32 alt2">&nbsp;</div><div class="line number738 index33 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">return</code> <code class="cpp keyword bold">static_cast</code><code class="cpp plain">&lt;</code><code class="cpp color1 bold">int</code><code class="cpp plain">&gt;(msg.wParam);</code></div><div class="line number739 index34 alt2"><code class="cpp plain">}</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>The <strong>Run</strong> function will continue to execute indefinitely until the <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ms632641(v=vs.85).aspx" title="WM_QUIT message" target="_blank">WM_QUIT</a> window message is posted to the window’s message queue.</p>
<p>The <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ms644943(v=vs.85).aspx" title="PeekMessage function" target="_blank">PeekMessage</a> function will retrieve the next message from the message queue. The <strong>PM_REMOVE</strong> indicates that the retrieved message should be removed from the window’s message queue. The <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ms644943(v=vs.85).aspx" title="PeekMessage function" target="_blank">PeekMessage</a> function will return <strong>FALSE</strong> if there are no messages to process.</p>
<p>The <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ms644955(v=vs.85).aspx" title="TranslateMessage function" target="_blank">TranslateMessage</a> function will translate virtual-key messages into character messages <a href="https://www.3dgep.com/introduction-to-directx-11/#TranslateMessage">[53]</a> and the <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ms644934(v=vs.85).aspx" title="DispatchMessage function" target="_blank">DispatchMessage</a> function will dispatch the message to the appropriate window’s procedure function <a href="https://www.3dgep.com/introduction-to-directx-11/#DispatchMessage">[54]</a>.</p>
<p>If there is no message to process, then we will call <strong>Update</strong> and <strong>Render</strong> which will update the game logic and render our scene. These functions are commented out now because they have not been defined yet.</p>
<p>When the game loop exits, the <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ms644958(v=vs.85).aspx" title="MSG structure" target="_blank">MSG</a> structure’s <strong>wParam</strong> member will contain the return code which was specified as the only parameter to the <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ms644945(v=vs.85).aspx" title="PostQuitMessage function" target="_blank">PostQuitMessage</a> in the <strong>WndProc</strong> function shown earlier. </p>
<p>Before we can execute our application, we must define the main entry point.</p>
<span id="The_Main_Function"><h2>The Main Function</h2></span>
<p>The main entry point for our application is the <strong>wWinMain</strong> function. In this function we will initialize the window and start the main game loop. When the game loop exits, the return code from <strong>Run</strong> method will be returned to the process that invoked our application.</p>
<div class="notranslate">
<div><div id="highlighter_17113" class="syntaxhighlighter  cpp"><table border="0" cellpadding="0" cellspacing="0"><caption>main.cpp</caption><tbody><tr><td class="gutter"><div class="line number741 index0 alt2">741</div><div class="line number742 index1 alt1">742</div><div class="line number743 index2 alt2">743</div><div class="line number744 index3 alt1">744</div><div class="line number745 index4 alt2">745</div><div class="line number746 index5 alt1">746</div><div class="line number747 index6 alt2">747</div><div class="line number748 index7 alt1">748</div><div class="line number749 index8 alt2">749</div><div class="line number750 index9 alt1">750</div><div class="line number751 index10 alt2">751</div><div class="line number752 index11 alt1">752</div><div class="line number753 index12 alt2">753</div><div class="line number754 index13 alt1">754</div><div class="line number755 index14 alt2">755</div><div class="line number756 index15 alt1">756</div><div class="line number757 index16 alt2">757</div><div class="line number758 index17 alt1">758</div><div class="line number759 index18 alt2">759</div><div class="line number760 index19 alt1">760</div><div class="line number761 index20 alt2">761</div><div class="line number762 index21 alt1">762</div></td><td class="code"><div class="container"><div class="line number741 index0 alt2"><code class="cpp color1 bold">int</code> <code class="cpp plain">WINAPI wWinMain( </code><code class="cpp color1 bold">HINSTANCE</code> <code class="cpp plain">hInstance, </code><code class="cpp color1 bold">HINSTANCE</code> <code class="cpp plain">prevInstance, </code><code class="cpp color1 bold">LPWSTR</code> <code class="cpp plain">cmdLine, </code><code class="cpp color1 bold">int</code> <code class="cpp plain">cmdShow )</code></div><div class="line number742 index1 alt1"><code class="cpp plain">{</code></div><div class="line number743 index2 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">UNREFERENCED_PARAMETER( prevInstance );</code></div><div class="line number744 index3 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">UNREFERENCED_PARAMETER( cmdLine );</code></div><div class="line number745 index4 alt2">&nbsp;</div><div class="line number746 index5 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp comments">// Check for DirectX Math library support.</code></div><div class="line number747 index6 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">if</code> <code class="cpp plain">( !XMVerifyCPUSupport() )</code></div><div class="line number748 index7 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">{</code></div><div class="line number749 index8 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">MessageBox( nullptr, TEXT(</code><code class="cpp string">"Failed to verify DirectX Math library support."</code><code class="cpp plain">), TEXT(</code><code class="cpp string">"Error"</code><code class="cpp plain">), MB_OK );</code></div><div class="line number750 index9 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">return</code> <code class="cpp plain">-1;</code></div><div class="line number751 index10 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number752 index11 alt1">&nbsp;</div><div class="line number753 index12 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">if</code><code class="cpp plain">( InitApplication(hInstance, cmdShow) != 0 )</code></div><div class="line number754 index13 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">{</code></div><div class="line number755 index14 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">MessageBox( nullptr, TEXT(</code><code class="cpp string">"Failed to create applicaiton window."</code><code class="cpp plain">), TEXT(</code><code class="cpp string">"Error"</code><code class="cpp plain">), MB_OK );</code></div><div class="line number756 index15 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">return</code> <code class="cpp plain">-1;</code></div><div class="line number757 index16 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number758 index17 alt1">&nbsp;</div><div class="line number759 index18 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp color1 bold">int</code> <code class="cpp plain">returnCode = Run();</code></div><div class="line number760 index19 alt1">&nbsp;</div><div class="line number761 index20 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">return</code> <code class="cpp plain">returnCode;</code></div><div class="line number762 index21 alt1"><code class="cpp plain">}</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>On line 747, the <a href="http://msdn.microsoft.com/en-us/library/microsoft.directx_sdk.utilities.xmverifycpusupport(v=vs.85).aspx" title="XMVerifyCPUSupport method" target="_blank">XMVerifyCPUSupport</a> function will return <strong>true</strong> if the <strong>DirectXMath</strong> library is supported on the current platform.</p>
<p>The <strong>InitApplication</strong> function will create the main window and show it on screen.</p>
<p>The <strong>Run</strong> function will kick-off the main game loop and only returns control back to the main function when the user closes the main window.</p>
<p>If we run our application now, we should see an empty game window that looks similar to the image below.</p>
<div id="attachment_5701" style="width: 666px" class="wp-caption alignnone"><a href="./Introduction to DirectX 113D Game Engine Programming_files/DirectX-Template-Main-Window.png"><img src="./Introduction to DirectX 113D Game Engine Programming_files/DirectX-Template-Main-Window.png" alt="DirectX Template (Main Window)" width="656" height="518" class="size-full wp-image-5701" srcset="https://www.3dgep.com/wp-content/uploads/2014/03/DirectX-Template-Main-Window.png 656w, https://www.3dgep.com/wp-content/uploads/2014/03/DirectX-Template-Main-Window-300x236.png 300w, https://www.3dgep.com/wp-content/uploads/2014/03/DirectX-Template-Main-Window-379x300.png 379w" sizes="(max-width: 656px) 100vw, 656px"></a><p class="wp-caption-text">DirectX Template (Main Window)</p></div>
<p>It’s not very interesting to look at so let’s initialize a Direct3D 11.</p>
<span id="Initialize_DirectX"><h2>Initialize DirectX</h2></span>
<p>In this function we will initialize the Direct3D 11 device, context and swap chain required for rendering graphics.</p>
<p>The process of initializing a Direct3D rendering device consists of several steps:</p>
<ol>
<li>Create the device and swap chain,</li>
<li>Create a render target view of the swap chain’s back buffer,</li>
<li>Create a texture for the depth-stencil buffer,</li>
<li>Create a depth-stencil view from the depth-stencil buffer,</li>
<li>Create a depth-stencil state object that defines the behaviour of the output merger stage,</li>
<li>Create a rasterizer state object that defines the behaviour of the rasterizer stage.</li>
</ol>
<span id="Create_Device_and_Swap_Chain"><h3>Create Device and Swap Chain</h3></span>
<p>To create the device and swap chain, we must first setup the swap chain description. The swap chain description defines the size and number of render buffers that will be used by the swap chain. It also associates the window to the swap chain which determines where the final image will be presented. The swap chain description also defines the quality of anti-aliasing (if any) that should be applied and how the back buffer is flipped during presentation.</p>
<div class="notranslate">
<div><div id="highlighter_518998" class="syntaxhighlighter  cpp"><table border="0" cellpadding="0" cellspacing="0"><caption>main.cpp</caption><tbody><tr><td class="gutter"><div class="line number230 index0 alt1">230</div><div class="line number231 index1 alt2">231</div><div class="line number232 index2 alt1">232</div><div class="line number233 index3 alt2">233</div><div class="line number234 index4 alt1">234</div><div class="line number235 index5 alt2">235</div><div class="line number236 index6 alt1">236</div><div class="line number237 index7 alt2">237</div><div class="line number238 index8 alt1">238</div><div class="line number239 index9 alt2">239</div><div class="line number240 index10 alt1">240</div><div class="line number241 index11 alt2">241</div><div class="line number242 index12 alt1">242</div><div class="line number243 index13 alt2">243</div><div class="line number244 index14 alt1">244</div><div class="line number245 index15 alt2">245</div><div class="line number246 index16 alt1">246</div><div class="line number247 index17 alt2">247</div><div class="line number248 index18 alt1">248</div><div class="line number249 index19 alt2">249</div><div class="line number250 index20 alt1">250</div><div class="line number251 index21 alt2">251</div><div class="line number252 index22 alt1">252</div><div class="line number253 index23 alt2">253</div><div class="line number254 index24 alt1">254</div><div class="line number255 index25 alt2">255</div><div class="line number256 index26 alt1">256</div><div class="line number257 index27 alt2">257</div><div class="line number258 index28 alt1">258</div><div class="line number259 index29 alt2">259</div></td><td class="code"><div class="container"><div class="line number230 index0 alt1"><code class="cpp comments">/** </code></div><div class="line number231 index1 alt2"><code class="cpp spaces">&nbsp;</code><code class="cpp comments">* Initialize the DirectX device and swap chain.</code></div><div class="line number232 index2 alt1"><code class="cpp spaces">&nbsp;</code><code class="cpp comments">*/</code></div><div class="line number233 index3 alt2"><code class="cpp color1 bold">int</code> <code class="cpp plain">InitDirectX( </code><code class="cpp color1 bold">HINSTANCE</code> <code class="cpp plain">hInstance, </code><code class="cpp color1 bold">BOOL</code> <code class="cpp plain">vSync )</code></div><div class="line number234 index4 alt1"><code class="cpp plain">{</code></div><div class="line number235 index5 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp comments">// A window handle must have been created already.</code></div><div class="line number236 index6 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp functions bold">assert</code><code class="cpp plain">( g_WindowHandle != 0 );</code></div><div class="line number237 index7 alt2">&nbsp;</div><div class="line number238 index8 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">RECT clientRect;</code></div><div class="line number239 index9 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">GetClientRect( g_WindowHandle, &amp;clientRect );</code></div><div class="line number240 index10 alt1">&nbsp;</div><div class="line number241 index11 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp comments">// Compute the exact client dimensions. This will be used</code></div><div class="line number242 index12 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp comments">// to initialize the render targets for our swap chain.</code></div><div class="line number243 index13 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">unsigned </code><code class="cpp color1 bold">int</code> <code class="cpp plain">clientWidth = clientRect.right - clientRect.left;</code></div><div class="line number244 index14 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">unsigned </code><code class="cpp color1 bold">int</code> <code class="cpp plain">clientHeight = clientRect.bottom - clientRect.top;</code></div><div class="line number245 index15 alt2">&nbsp;</div><div class="line number246 index16 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">DXGI_SWAP_CHAIN_DESC swapChainDesc;</code></div><div class="line number247 index17 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">ZeroMemory( &amp;swapChainDesc, </code><code class="cpp keyword bold">sizeof</code><code class="cpp plain">(DXGI_SWAP_CHAIN_DESC) );</code></div><div class="line number248 index18 alt1">&nbsp;</div><div class="line number249 index19 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">swapChainDesc.BufferCount = 1;</code></div><div class="line number250 index20 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">swapChainDesc.BufferDesc.Width = clientWidth;</code></div><div class="line number251 index21 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">swapChainDesc.BufferDesc.Height = clientHeight;</code></div><div class="line number252 index22 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">swapChainDesc.BufferDesc.Format = DXGI_FORMAT_R8G8B8A8_UNORM;</code></div><div class="line number253 index23 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">swapChainDesc.BufferDesc.RefreshRate = QueryRefreshRate( clientWidth, clientHeight, vSync );</code></div><div class="line number254 index24 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">swapChainDesc.BufferUsage = DXGI_USAGE_RENDER_TARGET_OUTPUT;</code></div><div class="line number255 index25 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">swapChainDesc.OutputWindow = g_WindowHandle;</code></div><div class="line number256 index26 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">swapChainDesc.SampleDesc.Count = 1;</code></div><div class="line number257 index27 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">swapChainDesc.SampleDesc.Quality = 0;</code></div><div class="line number258 index28 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">swapChainDesc.SwapEffect = DXGI_SWAP_EFFECT_DISCARD;</code></div><div class="line number259 index29 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">swapChainDesc.Windowed = TRUE;</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>The <strong>DXGI_SWAP_CHAIN_DESC</strong> has the following definition <a href="https://www.3dgep.com/introduction-to-directx-11/#DXGI_SWAP_CHAIN_DESC">[19]</a>:</p>
<div class="notranslate">
<div><div id="highlighter_538478" class="syntaxhighlighter  cpp"><table border="0" cellpadding="0" cellspacing="0"><caption>DXGI_SWAP_CHAIN_DESC structure</caption><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="cpp keyword bold">typedef</code> <code class="cpp keyword bold">struct</code> <code class="cpp plain">DXGI_SWAP_CHAIN_DESC {</code></div><div class="line number2 index1 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">DXGI_MODE_DESC&nbsp;&nbsp; BufferDesc;</code></div><div class="line number3 index2 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">DXGI_SAMPLE_DESC SampleDesc;</code></div><div class="line number4 index3 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">DXGI_USAGE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; BufferUsage;</code></div><div class="line number5 index4 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp color1 bold">UINT</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="cpp plain">BufferCount;</code></div><div class="line number6 index5 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp color1 bold">HWND</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="cpp plain">OutputWindow;</code></div><div class="line number7 index6 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp color1 bold">BOOL</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="cpp plain">Windowed;</code></div><div class="line number8 index7 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">DXGI_SWAP_EFFECT SwapEffect;</code></div><div class="line number9 index8 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp color1 bold">UINT</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="cpp plain">Flags;</code></div><div class="line number10 index9 alt1"><code class="cpp plain">} DXGI_SWAP_CHAIN_DESC;</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>The members of the <strong>DXGI_SWAP_CHAIN_DESC</strong> struct are defined as:</p>
<ul>
<li><strong>DXGI_MODE_DESC BufferDesc</strong>: This parameter is a type <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/bb173064(v=vs.85).aspx" title="DXGI_MODE_DESC structure" target="_blank">DXGI_MODE_DESC</a> and has the following members:
<ul>
<li><strong>UINT Width</strong>: A value that describes the resolution width. If you specify the width as zero when you call the <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/bb174537(v=vs.85).aspx" title="IDXGIFactory::CreateSwapChain" target="_blank">IDXGIFactory::CreateSwapChain</a> method to create a swap chain, the runtime obtains the width from the output window and assigns this width value to the swap-chain description.</li>
<li><strong>UINT Height</strong>: A value describing the resolution height. If you specify the height as zero when you call the <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/bb174537(v=vs.85).aspx" title="IDXGIFactory::CreateSwapChain method" target="_blank">IDXGIFactory::CreateSwapChain</a> method to create a swap chain, the runtime obtains the height from the output window and assigns this height value to the swap-chain description.</li>
<li><strong>DXGI_RATIONAL RefreshRate</strong>: A <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/bb173069(v=vs.85).aspx" title="DXGI_RATIONAL structure" target="_blank">DXGI_RATIONAL</a> structure describing the refresh rate in hertz. We can use 0/1 to specify an unbounded refresh rate. This is useful if we don’t intend to synchronize the presentation of the scene with the refresh rate of the screen. If the window contents are to be displayed full-screen, then this should be the ideal refresh rate at the specified display resolution. If it is a windowed application, then it should be the refresh rate of the desktop.</li>
<li><strong>DXGI_FORMAT Format</strong>: The pixel format of the display. For a list of possible display formats see <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/bb173059(v=vs.85).aspx" title="DXGI_FORMAT enumeration" target="_blank">DXGI_FORMAT</a>. In this case we specify <strong>DXGI_FORMAT_R8G8B8A8_UNORM</strong> which creates a 4-component 32-bit unsigned normalized integer format that supports 8 bits per channel including alpha <a href="https://www.3dgep.com/introduction-to-directx-11/#DXGI_FORMAT">[20]</a>.</li>
<li><strong>DXGI_MODE_SCANLINE_ORDER ScanlineOrdering</strong>: Describes the scan-line drawing mode and can be one of the following values <a href="https://www.3dgep.com/introduction-to-directx-11/#DXGI_MODE_SCANLINE_ORDER">[21]</a>:
<ul>
<li><strong>DXGI_MODE_SCANLINE_ORDER_UNSPECIFIED</strong> (Default): The scanline order is unspecified.</li>
<li><strong>DXGI_MODE_SCANLINE_ORDER_PROGRESSIVE</strong>: The image is created from the first scanline to the last without skipping any.</li>
<li><strong>DXGI_MODE_SCANLINE_ORDER_UPPER_FIELD_FIRST</strong>: The image is created beginning with the upper field.</li>
<li><strong>DXGI_MODE_SCANLINE_ORDER_LOWER_FIELD_FIRST</strong>: The image is created beginning with the lower field.</li>
</ul>
</li>
<li><strong>DXGI_MODE_SCALING Scaling</strong>: This parameter describes the scaling mode and can be one of the following values <a href="https://www.3dgep.com/introduction-to-directx-11/#DXGI_MODE_SCALING">[22]</a>:
<ul>
<li><strong>DXGI_MODE_SCALING_UNSPECIFIED</strong> (Default): Unspecified scaling.</li>
<li><strong>DXGI_MODE_SCALING_CENTERED</strong>: Specifies no scaling. The image is centered on the display. This flag is typically used for a fixed-dot-pitch display (such as an LED display).</li>
<li><strong>DXGI_MODE_SCALING_STRETCHED</strong>: Specifies stretched scaling.</li>
</ul>
</li>
</ul>
</li>
<li><strong>DXGI_SAMPLE_DESC SampleDesc</strong>: A <strong>DXGI_SAMPLE_DESC</strong> structure that describes multi-sampling parameters. The <strong>DXGI_SAMPLE_DESC</strong> structure has the following members <a href="https://www.3dgep.com/introduction-to-directx-11/#DXGI_SAMPLE_DESC">[23]</a>:
<ul>
<li><strong>UINT Count</strong>: The number of multisamples per pixel.</li>
<li><strong>UINT Quality</strong>: The image quality level. The higher the quality, the lower the performance. The valid range is between zero and one less than the level returned by <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff476499(v=vs.85).aspx" title="ID3D11Device::CheckMultisampleQualityLevels method" target="_blank">ID3D11Device::CheckMultisampleQualityLevels</a>. The default sampler mode, with no anti-aliasing, has a count of 1 and a quality level of 0.</li>
</ul>
</li>
<li><strong>DXGI_USAGE BufferUsage</strong>: A member of the <strong>DXGI_USAGE</strong> enumerated type that describes the surface usage and CPU access options for the back buffer. This parameter can be one of the following values <a href="https://www.3dgep.com/introduction-to-directx-11/#DXGI_USAGE">[24]</a>:
<ul>
<li><strong>DXGI_USAGE_BACK_BUFFER</strong>: The surface or resource is used as a back buffer. You don’t need to pass <strong>DXGI_USAGE_BACK_BUFFER</strong> when you create a swap chain.</li>
<li><strong>DXGI_USAGE_READ_ONLY</strong>: Use the surface or resource for reading only.</li>
<li><strong>DXGI_USAGE_RENDER_TARGET_OUTPUT</strong>: Use the surface or resource as an output render target.</li>
<li><strong>DXGI_USAGE_SHADER_INPUT</strong>: Use the surface or resource as an input to a shader.</li>
<li><strong>DXGI_USAGE_SHARED</strong>: Share the surface or resource.</li>
<li><strong>DXGI_USAGE_UNORDERED_ACCESS</strong>: Use the surface or resource for unordered access.</li>
</ul>
</li>
<li><strong>UINT BufferCount</strong>: A value that describes the number of buffers in the swap chain.</li>
<li><strong>HWND OutputWindow</strong>: An <strong>HWND</strong> handle to the output window. This member must not be <strong>NULL</strong>.</li>
<li><strong>BOOL Windowed</strong>: A Boolean value that specifies whether the output is in windowed mode.</li>
<li><strong>DXGI_SWAP_EFFECT SwapEffect</strong>: A member of the <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/bb173077(v=vs.85).aspx" title="DXGI_SWAP_EFFECT enumeration" target="_blank">DXGI_SWAP_EFFECT</a> enumerated type that describes options for handling the contents of the presentation buffer after presenting a surface. This parameter can have one of the following values <a href="https://www.3dgep.com/introduction-to-directx-11/#DXGI_SWAP_EFFECT">[25]</a>:
<ul>
<li><strong>DXGI_SWAP_EFFECT_DISCARD</strong> (Default): Use this flag to specify the bit-block transfer (bitblt) model and to specify that DXGI discard the contents of the back buffer after you call <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/bb174576(v=vs.85).aspx" title="IDXGISwapChain::Present method" target="_blank">IDXGISwapChain::Present</a>. Use this flag to enable the display driver to select the most efficient presentation technique for the swap chain.</li>
<li><strong>DXGI_SWAP_EFFECT_SEQUENTIAL</strong>: Use this flag to specify the bitblt model and to specify that DXGI persist the contents of the back buffer after you call <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/bb174576(v=vs.85).aspx" title="IDXGISwapChain::Present method" target="_blank">IDXGISwapChain::Present</a>. Use this option to present the contents of the swap chain in order, from the first buffer (buffer 0) to the last buffer. This flag cannot be used with multisampling.</li>
</ul>
</li>
<li><strong>UINT Flags</strong>: A member of the <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/bb173076(v=vs.85).aspx" title="DXGI_SWAP_CHAIN_FLAG" target="_blank">DXGI_SWAP_CHAIN_FLAG</a> enumerated type that describes options for swap-chain behavior.</li>
</ul>
<p>The <strong>QueryRefreshRate</strong> function is used to query the ideal refresh rate given the specified screen dimensions. If the <strong>vSync</strong> flag is <strong>FALSE</strong> then this function simply returns 0/1 which indicates that the screen should be refreshed as quickly as possible without waiting for a vertical sync. You can see the implementation of the <strong>QueryRefreshRate</strong> function by downloading the demo available at the end of this article.</p>
<p>With the swap chain description initialized, we can create both the swap chain object and the Direct3D 11 device at the same time.</p>
<div class="notranslate">
<div><div id="highlighter_340639" class="syntaxhighlighter  cpp"><table border="0" cellpadding="0" cellspacing="0"><caption>main.cpp</caption><tbody><tr><td class="gutter"><div class="line number261 index0 alt2">261</div><div class="line number262 index1 alt1">262</div><div class="line number263 index2 alt2">263</div><div class="line number264 index3 alt1">264</div><div class="line number265 index4 alt2">265</div><div class="line number266 index5 alt1">266</div><div class="line number267 index6 alt2">267</div><div class="line number268 index7 alt1">268</div><div class="line number269 index8 alt2">269</div><div class="line number270 index9 alt1">270</div><div class="line number271 index10 alt2">271</div><div class="line number272 index11 alt1">272</div><div class="line number273 index12 alt2">273</div><div class="line number274 index13 alt1">274</div><div class="line number275 index14 alt2">275</div><div class="line number276 index15 alt1">276</div><div class="line number277 index16 alt2">277</div><div class="line number278 index17 alt1">278</div><div class="line number279 index18 alt2">279</div><div class="line number280 index19 alt1">280</div><div class="line number281 index20 alt2">281</div><div class="line number282 index21 alt1">282</div><div class="line number283 index22 alt2">283</div><div class="line number284 index23 alt1">284</div><div class="line number285 index24 alt2">285</div></td><td class="code"><div class="container"><div class="line number261 index0 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp color1 bold">UINT</code> <code class="cpp plain">createDeviceFlags = 0;</code></div><div class="line number262 index1 alt1"><code class="cpp preprocessor">#if _DEBUG</code></div><div class="line number263 index2 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">createDeviceFlags = D3D11_CREATE_DEVICE_DEBUG;</code></div><div class="line number264 index3 alt1"><code class="cpp preprocessor">#endif</code></div><div class="line number265 index4 alt2">&nbsp;</div><div class="line number266 index5 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp comments">// These are the feature levels that we will accept.</code></div><div class="line number267 index6 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">D3D_FEATURE_LEVEL featureLevels[] = </code></div><div class="line number268 index7 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">{</code></div><div class="line number269 index8 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">D3D_FEATURE_LEVEL_11_1,</code></div><div class="line number270 index9 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">D3D_FEATURE_LEVEL_11_0,</code></div><div class="line number271 index10 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">D3D_FEATURE_LEVEL_10_1,</code></div><div class="line number272 index11 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">D3D_FEATURE_LEVEL_10_0,</code></div><div class="line number273 index12 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">D3D_FEATURE_LEVEL_9_3,</code></div><div class="line number274 index13 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">D3D_FEATURE_LEVEL_9_2,</code></div><div class="line number275 index14 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">D3D_FEATURE_LEVEL_9_1</code></div><div class="line number276 index15 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">};</code></div><div class="line number277 index16 alt2">&nbsp;</div><div class="line number278 index17 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp comments">// This will be the feature level that </code></div><div class="line number279 index18 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp comments">// is used to create our device and swap chain.</code></div><div class="line number280 index19 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">D3D_FEATURE_LEVEL featureLevel;</code></div><div class="line number281 index20 alt2">&nbsp;</div><div class="line number282 index21 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp color1 bold">HRESULT</code> <code class="cpp plain">hr = D3D11CreateDeviceAndSwapChain( nullptr, D3D_DRIVER_TYPE_HARDWARE, </code></div><div class="line number283 index22 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">nullptr, createDeviceFlags, featureLevels, _countof(featureLevels), </code></div><div class="line number284 index23 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">D3D11_SDK_VERSION, &amp;swapChainDesc, &amp;g_d3dSwapChain, &amp;g_d3dDevice, &amp;featureLevel,</code></div><div class="line number285 index24 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">&amp;g_d3dDeviceContext );</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>The <strong>createDeviceFlags</strong> is a bitfield that defines a set of special parameters that are used to create the device <a href="https://www.3dgep.com/introduction-to-directx-11/#D3D11_CREATE_DEVICE_FLAG">[26]</a>. In this case we specify the <strong>D3D11_CREATE_DEVICE_DEBUG</strong> flag to create a device that supports the <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff476881(v=vs.85).aspx#Debug" title="Debug Layer" target="_blank">debug layer</a>. The debug layer provides additional checks for correctness and consistency and provides more robust feedback if we do something wrong. Adding this layer does incur some overhead so it is not recommended for production releases.</p>
<p>During device creation, we can specify which feature level we will support. The <strong>featureLevels</strong> array lists the various feature levels in order from the most desirable to least desirable. The device will be created with the highest feature level that is supported by the end-user’s hardware. To support the widest range of hardware, we will allow the feature level to fall back to 9_1 which provides support for devices as of DirectX 9. For a full list of feature levels and what they each support, see <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff476876(v=vs.85).aspx" title="Direct3D feature levels" target="_blank">Direct3D feature levels</a>. The <strong>featureLevel</strong> parameter defined on line 280 will contain the actual feature level that the Direct3D device was created with. We can also query the supported feature level of the device at a later time by using the <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff476528(v=vs.85).aspx" title="ID3D11Device::GetFeatureLevel" target="_blank">ID3D11Device::GetFeatureLevel</a> method or use the <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff476497(v=vs.85).aspx" title="ID3D11Device::CheckFeatureSupport " target="_blank">ID3D11Device::CheckFeatureSupport</a> method to check for a specific feature.</p>
<p>On line 282 we use the <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff476083(v=vs.85).aspx" title="D3D11CreateDeviceAndSwapChain function" target="_blank">D3D11CreateDeviceAndSwapChain</a> function to create the Direct3D device, context, and swap chain.</p>
<p>The <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff476083(v=vs.85).aspx" title="D3D11CreateDeviceAndSwapChain function" target="_blank">D3D11CreateDeviceAndSwapChain</a> function has the following signature <a href="https://www.3dgep.com/introduction-to-directx-11/#D3D11CreateDeviceAndSwapChain">[27]</a>:</p>
<div class="notranslate">
<div><div id="highlighter_392235" class="syntaxhighlighter  cpp"><table border="0" cellpadding="0" cellspacing="0"><caption>D3D11CreateDeviceAndSwapChain function</caption><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="cpp color1 bold">HRESULT</code> <code class="cpp plain">D3D11CreateDeviceAndSwapChain(</code></div><div class="line number2 index1 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">_In_&nbsp;&nbsp; IDXGIAdapter *pAdapter,</code></div><div class="line number3 index2 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">_In_&nbsp;&nbsp; D3D_DRIVER_TYPE DriverType,</code></div><div class="line number4 index3 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">_In_&nbsp;&nbsp; </code><code class="cpp color1 bold">HMODULE</code> <code class="cpp plain">Software,</code></div><div class="line number5 index4 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">_In_&nbsp;&nbsp; </code><code class="cpp color1 bold">UINT</code> <code class="cpp plain">Flags,</code></div><div class="line number6 index5 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">_In_&nbsp;&nbsp; </code><code class="cpp keyword bold">const</code> <code class="cpp plain">D3D_FEATURE_LEVEL *pFeatureLevels,</code></div><div class="line number7 index6 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">_In_&nbsp;&nbsp; </code><code class="cpp color1 bold">UINT</code> <code class="cpp plain">FeatureLevels,</code></div><div class="line number8 index7 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">_In_&nbsp;&nbsp; </code><code class="cpp color1 bold">UINT</code> <code class="cpp plain">SDKVersion,</code></div><div class="line number9 index8 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">_In_&nbsp;&nbsp; </code><code class="cpp keyword bold">const</code> <code class="cpp plain">DXGI_SWAP_CHAIN_DESC *pSwapChainDesc,</code></div><div class="line number10 index9 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">_Out_&nbsp; IDXGISwapChain **ppSwapChain,</code></div><div class="line number11 index10 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">_Out_&nbsp; ID3D11Device **ppDevice,</code></div><div class="line number12 index11 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">_Out_&nbsp; D3D_FEATURE_LEVEL *pFeatureLevel,</code></div><div class="line number13 index12 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">_Out_&nbsp; ID3D11DeviceContext **ppImmediateContext</code></div><div class="line number14 index13 alt1"><code class="cpp plain">);</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>Which has the following properties:</p>
<ul>
<li><strong>IDXGIAdapter *pAdapter</strong>: A pointer to the video adapter to use when creating a device. Pass <strong>NULL</strong> (or <strong>nullptr</strong>) to use the default adapter, which is the first adapter enumerated by the <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/bb174538(v=vs.85).aspx" title="IDXGIFactory::EnumAdapters method" target="_blank">IDXGIFactory::EnumAdapters</a> method.</li>
<li><strong>D3D_DRIVER_TYPE DriverType</strong>: The Direct3D driver which implements the device. It must be one of the following values <a href="https://www.3dgep.com/introduction-to-directx-11/#D3D_DRIVER_TYPE">[28]</a>:
<ul>
<li><strong>D3D_DRIVER_TYPE_UNKNOWN</strong>: Unknown driver type. I’m not sure why or when you would ever use this value.</li>
<li><strong>D3D_DRIVER_TYPE_HARDWARE</strong>: A hardware driver, which implements Direct3D features in hardware. This is the primary driver that you should use in your Direct3D applications because it provides the best performance.</li>
<li><strong>D3D_DRIVER_TYPE_REFERENCE</strong>: A reference driver, which is a software implementation that supports every Direct3D feature. A reference driver is designed for accuracy rather than speed and as a result is slow but accurate. The rasterizer portion of the driver does make use of special CPU instructions whenever it can, but it is not intended for retail applications; use it only for feature testing, demonstration of functionality, debugging, or verifying bugs in other drivers.</li>
<li><strong>D3D_DRIVER_TYPE_NULL</strong>: A NULL driver, which is a reference driver without render capability. This driver is commonly used for debugging non-rendering API calls, it is not appropriate for retail applications.</li>
<li><strong>D3D_DRIVER_TYPE_SOFTWARE</strong>: A software driver, which is a driver implemented completely in software. The software implementation is not intended for a high-performance application due to its very slow performance.</li>
<li><strong>D3D_DRIVER_TYPE_WARP</strong>: A WARP driver, which is a high-performance software rasterizer. The rasterizer supports feature levels 9_1 through level 10_1 with a high performance software implementation. For information about limitations creating a WARP device on certain feature levels, see <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff728764(v=vs.85).aspx" title="Limitations Creating WARP and Reference Devices" target="_blank">Limitations Creating WARP and Reference Devices</a>.</li>
</ul>
</li><li><strong>HMODULE Software</strong>: A handle to a DLL that implements a software rasterizer. The value should be non-<strong>NULL</strong> when <strong>D3D_DRIVER_TYPE</strong> is <strong>D3D_DRIVER_TYPE_SOFTWARE</strong> and <strong>NULL</strong> otherwise.</li>
<li><strong>UINT Flags</strong>: The runtime layers to enable (see <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff476107(v=vs.85).aspx" title="D3D11_CREATE_DEVICE_FLAG enumeration" target="_blank">D3D11_CREATE_DEVICE_FLAG</a>); values can be bitwise OR’d together.</li>
<li><strong>const D3D_FEATURE_LEVEL *pFeatureLevels</strong>: A pointer to an array of <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff476329(v=vs.85).aspx" title="D3D_FEATURE_LEVEL enumeration" target="_blank">D3D_FEATURE_LEVEL</a>s, which determine the order of feature levels to attempt to create.</li>
<li><strong>UINT FeatureLevels</strong>: The number of elements in the <strong>pFeatureLevels</strong> array.</li>
<li><strong>UINT SDKVersion</strong>: The SDK version. Since we are using the DirectX 11 SDK, this value must always be <strong>D3D11_SDK_VERSION</strong>.</li>
<li><strong>const DXGI_SWAP_CHAIN_DESC *pSwapChainDesc</strong>: A pointer to a swap chain description which was created earlier.</li>
<li><strong>IDXGISwapChain **ppSwapChain</strong>: Returns the address of a pointer to the <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/bb174569(v=vs.85).aspx" title="IDXGISwapChain interface" target="_blank">IDXGISwapChain</a> object that represents the swap chain used for rendering.</li>
<li><strong>ID3D11Device **ppDevice</strong>: Returns the address of a pointer to an <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff476379(v=vs.85).aspx" title="ID3D11Device interface" target="_blank">ID3D11Device</a> object that represents the device created.</li>
<li><strong>D3D_FEATURE_LEVEL *pFeatureLevel</strong>: Returns a pointer to a <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff476329(v=vs.85).aspx" title="D3D_FEATURE_LEVEL enumeration" target="_blank">D3D_FEATURE_LEVEL</a>, which represents the first element in an array of feature levels supported by the device.</li>
<li><strong>ID3D11DeviceContext **ppImmediateContext</strong>: Returns the address of a pointer to an <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff476385(v=vs.85).aspx" title="ID3D11DeviceContext interface" target="_blank">ID3D11DeviceContext</a> object that represents the device context.</li>
</ul>
<p>If we execute the <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff476083(v=vs.85).aspx" title="D3D11CreateDeviceAndSwapChain function" target="_blank">D3D11CreateDeviceAndSwapChain</a> function on a computer with a video card driver that does not implement the Windows Display Driver Model version 1.2 (<a href="http://msdn.microsoft.com/en-us/library/windows/hardware/jj583805(v=vs.85).aspx" title="What&#39;s new for Windows 8 display drivers (WDDM 1.2)" target="_blank">WDDM 1.2</a>) or higher and we speicfy <strong>D3D_FEATURE_LEVEL_11_1</strong> in the feature levels array then this function will fail. The initial version of Windows 7 provided WDDM 1.1 which provides support for the <strong>D3D_FEATURE_LEVEL_11_0</strong> feature level and earlier but if we specify <strong>D3D_FEATURE_LEVEL_11_1</strong> then the <strong>D3D11CreateDeviceAndSwapChain</strong> function will fail. In fact, if you do not have the latest version of the Windows SDK, the <strong>D3D_FEATURE_LEVEL_11_1</strong> enumeration value may not even be defined and you won’t be able to compile this code. If this is the case for you, make sure you update Visual Studio 2012 to the latest version using the Windows Update utility. In the case this function does fail, we simply try again, but this time we remove the <strong>D3D_FEATURE_LEVEL_11_1</strong> value from the <strong>featureLevels</strong> array.</p>
<div class="notranslate">
<div><div id="highlighter_635176" class="syntaxhighlighter  cpp"><table border="0" cellpadding="0" cellspacing="0"><caption>main.cpp</caption><tbody><tr><td class="gutter"><div class="line number287 index0 alt2">287</div><div class="line number288 index1 alt1">288</div><div class="line number289 index2 alt2">289</div><div class="line number290 index3 alt1">290</div><div class="line number291 index4 alt2">291</div><div class="line number292 index5 alt1">292</div><div class="line number293 index6 alt2">293</div><div class="line number294 index7 alt1">294</div><div class="line number295 index8 alt2">295</div><div class="line number296 index9 alt1">296</div><div class="line number297 index10 alt2">297</div><div class="line number298 index11 alt1">298</div></td><td class="code"><div class="container"><div class="line number287 index0 alt2"><code class="cpp keyword bold">if</code> <code class="cpp plain">( hr == E_INVALIDARG )</code></div><div class="line number288 index1 alt1"><code class="cpp plain">{</code></div><div class="line number289 index2 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">hr = D3D11CreateDeviceAndSwapChain( nullptr, D3D_DRIVER_TYPE_HARDWARE, </code></div><div class="line number290 index3 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">nullptr, createDeviceFlags, &amp;featureLevels[1], _countof(featureLevels) - 1, </code></div><div class="line number291 index4 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">D3D11_SDK_VERSION, &amp;swapChainDesc, &amp;g_d3dSwapChain, &amp;g_d3dDevice, &amp;featureLevel,</code></div><div class="line number292 index5 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">&amp;g_d3dDeviceContext );</code></div><div class="line number293 index6 alt2"><code class="cpp plain">}</code></div><div class="line number294 index7 alt1">&nbsp;</div><div class="line number295 index8 alt2"><code class="cpp keyword bold">if</code> <code class="cpp plain">( FAILED(hr) )</code></div><div class="line number296 index9 alt1"><code class="cpp plain">{</code></div><div class="line number297 index10 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">return</code> <code class="cpp plain">-1;</code></div><div class="line number298 index11 alt1"><code class="cpp plain">}</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>The <strong>D3D11CreateDeviceAndSwapChain</strong> function is invoked again, this time without the <strong>D3D_FEATURE_LEVEL_11_1</strong> enumeration value.</p>
<p>On line 295, we check again if it still failed. If this is the case then it is likely that there is no compatible hardware for any of the feature levels we are requesting. In that case you might want to try one of the other driver types such as <strong>D3D_DRIVER_TYPE_WARP</strong> but please consider <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff728764(v=vs.85).aspx" title="Limitations Creating WARP and Reference Devices" target="_blank">Limitations Creating WARP and Reference Devices</a> before trying this. I’ll leave this up to the reader to implement if they so desire.</p>
<p>If our program gets this far, then we have a valid <strong>D3D11Device</strong>, <strong>D3D11DeviceContext</strong>, and <strong>DXGISwapChain</strong> and we can continue to initialize the swap chain to prepare it for rendering graphics into.</p>
<span id="Create_a_RenderTargetView"><h3>Create a RenderTargetView</h3></span>
<p>The first step is to create a render target view from the swap chain’s back buffer.</p>
<div class="notranslate">
<div><div id="highlighter_168558" class="syntaxhighlighter  cpp"><table border="0" cellpadding="0" cellspacing="0"><caption>main.cpp</caption><tbody><tr><td class="gutter"><div class="line number302 index0 alt1">302</div><div class="line number303 index1 alt2">303</div><div class="line number304 index2 alt1">304</div><div class="line number305 index3 alt2">305</div><div class="line number306 index4 alt1">306</div><div class="line number307 index5 alt2">307</div><div class="line number308 index6 alt1">308</div><div class="line number309 index7 alt2">309</div><div class="line number310 index8 alt1">310</div><div class="line number311 index9 alt2">311</div><div class="line number312 index10 alt1">312</div><div class="line number313 index11 alt2">313</div><div class="line number314 index12 alt1">314</div><div class="line number315 index13 alt2">315</div><div class="line number316 index14 alt1">316</div><div class="line number317 index15 alt2">317</div></td><td class="code"><div class="container"><div class="line number302 index0 alt1"><code class="cpp comments">// Next initialize the back buffer of the swap chain and associate it to a </code></div><div class="line number303 index1 alt2"><code class="cpp comments">// render target view.</code></div><div class="line number304 index2 alt1"><code class="cpp plain">ID3D11Texture2D* backBuffer;</code></div><div class="line number305 index3 alt2"><code class="cpp plain">hr = g_d3dSwapChain-&gt;GetBuffer( 0, __uuidof(ID3D11Texture2D), (</code><code class="cpp color1 bold">LPVOID</code><code class="cpp plain">*)&amp;backBuffer );</code></div><div class="line number306 index4 alt1"><code class="cpp keyword bold">if</code> <code class="cpp plain">( FAILED( hr ) )</code></div><div class="line number307 index5 alt2"><code class="cpp plain">{</code></div><div class="line number308 index6 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">return</code> <code class="cpp plain">-1;</code></div><div class="line number309 index7 alt2"><code class="cpp plain">}</code></div><div class="line number310 index8 alt1">&nbsp;</div><div class="line number311 index9 alt2"><code class="cpp plain">hr = g_d3dDevice-&gt;CreateRenderTargetView( backBuffer, nullptr, &amp;g_d3dRenderTargetView );</code></div><div class="line number312 index10 alt1"><code class="cpp keyword bold">if</code> <code class="cpp plain">( FAILED( hr ) )</code></div><div class="line number313 index11 alt2"><code class="cpp plain">{</code></div><div class="line number314 index12 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">return</code> <code class="cpp plain">-1;</code></div><div class="line number315 index13 alt2"><code class="cpp plain">}</code></div><div class="line number316 index14 alt1">&nbsp;</div><div class="line number317 index15 alt2"><code class="cpp plain">SafeRelease( backBuffer );</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>On line 305, we use the swap chain’s <strong>GetBuffer</strong> method to retrieve a pointer to the swap chain’s single back buffer. The swap chain’s back buffer is automatically created based on the content of the <strong>DXGI_SWAP_CHAIN_DESC</strong> variable that we passed to the <strong>D3D11CreateDeviceAndSwapChain</strong> function so we do not need to manually create a texture for this purpose. However we do need to associate the backbuffer to a render target view in order to render to the swap chain’s back buffer.</p>
<p>A render target view is used by the Output Merger (OM) stage to draw the final colors emitted by the pixel shader. A render target view allows you to specify an area of a resource which is suitable for rendering to. For example, you can create a larger resource and specify that a smaller region of that larger resource be used as the render target for the output merger stage by creating a render target view of the smaller sub resource.</p>
<p>On line 311 the render target view is created from the entire <strong>backBuffer</strong> resource by using the <strong>ID3D11Device::CreateRenderTargetView</strong> method.</p>
<p>The <strong>ID3D11Device::CreateRenderTargetView</strong> has the following signature <a href="https://www.3dgep.com/introduction-to-directx-11/#CreateRenderTargetView">[29]</a>:</p>
<div class="notranslate">
<div><div id="highlighter_891409" class="syntaxhighlighter  cpp"><table border="0" cellpadding="0" cellspacing="0"><caption>ID3D11Device::CreateRenderTargetView method</caption><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="cpp color1 bold">HRESULT</code> <code class="cpp plain">CreateRenderTargetView(</code></div><div class="line number2 index1 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">[in]&nbsp;&nbsp; ID3D11Resource *pResource,</code></div><div class="line number3 index2 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">[in]&nbsp;&nbsp; </code><code class="cpp keyword bold">const</code> <code class="cpp plain">D3D11_RENDER_TARGET_VIEW_DESC *pDesc,</code></div><div class="line number4 index3 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">[out]&nbsp; ID3D11RenderTargetView **ppRTView</code></div><div class="line number5 index4 alt2"><code class="cpp plain">);</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>Where:</p>
<ul>
<li><strong>ID3D11Resource *pResource</strong>: Pointer to a <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff476584(v=vs.85).aspx" title="ID3D11Resource interface" target="_blank">ID3D11Resource </a>that represents a render target. This resource must have been created with the <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff476085(v=vs.85).aspx" title="D3D11_BIND_FLAG enumeration" target="_blank">D3D11_BIND_RENDER_TARGET</a> flag.</li>
<li><strong>const D3D11_RENDER_TARGET_VIEW_DESC *pDesc</strong>: Pointer to a <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff476201(v=vs.85).aspx" title="D3D11_RENDER_TARGET_VIEW_DESC structure" target="_blank">D3D11_RENDER_TARGET_VIEW_DESC</a> that represents a render-target view description. Set this parameter to <strong>NULL</strong> to create a view that accesses all of the subresources in mipmap level 0.</li>
<li><strong>ID3D11RenderTargetView **ppRTView</strong>: Address of a pointer to an <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff476582(v=vs.85).aspx" title="ID3D11RenderTargetView interface" target="_blank">ID3D11RenderTargetView</a>. Set this parameter to <strong>NULL</strong> to validate the other input parameters (the method will return <strong>S_FALSE</strong> if the other input parameters pass validation).</li>
</ul>
<p>In this case, because we want to create a render target view from the entire back buffer resource, we can pass <strong>NULL</strong> (or <strong>nullptr</strong>) for the 2nd parameter to this method.</p>
<p>After creating the render target view, we can release the reference to the back buffer texture. On line 317, the reference to the backBuffer COM object is released.</p>
<p>Although the swap chain is automatically created with a color buffer, we cannot start rendering 3D graphics until we have created a depth buffer and a depth stencil view to refer to that depth buffer. The depth buffer is necessary when drawing 3D graphics so that objects that are drawn far away from the viewer do not appear to be drawn on top of objects that appear close to the viewer regardless of the order in which they are rendered.</p>
<span id="Create_a_Depth-Stencil_Buffer"><h3>Create a Depth-Stencil Buffer</h3></span>
<p>Let’s first create a 2D texture that will be used as a depth (and stencil) buffer.</p>
<div class="notranslate">
<div><div id="highlighter_403210" class="syntaxhighlighter  cpp"><table border="0" cellpadding="0" cellspacing="0"><caption>main.cpp</caption><tbody><tr><td class="gutter"><div class="line number319 index0 alt2">319</div><div class="line number320 index1 alt1">320</div><div class="line number321 index2 alt2">321</div><div class="line number322 index3 alt1">322</div><div class="line number323 index4 alt2">323</div><div class="line number324 index5 alt1">324</div><div class="line number325 index6 alt2">325</div><div class="line number326 index7 alt1">326</div><div class="line number327 index8 alt2">327</div><div class="line number328 index9 alt1">328</div><div class="line number329 index10 alt2">329</div><div class="line number330 index11 alt1">330</div><div class="line number331 index12 alt2">331</div><div class="line number332 index13 alt1">332</div><div class="line number333 index14 alt2">333</div><div class="line number334 index15 alt1">334</div><div class="line number335 index16 alt2">335</div><div class="line number336 index17 alt1">336</div><div class="line number337 index18 alt2">337</div><div class="line number338 index19 alt1">338</div></td><td class="code"><div class="container"><div class="line number319 index0 alt2"><code class="cpp comments">// Create the depth buffer for use with the depth/stencil view.</code></div><div class="line number320 index1 alt1"><code class="cpp plain">D3D11_TEXTURE2D_DESC depthStencilBufferDesc;</code></div><div class="line number321 index2 alt2"><code class="cpp plain">ZeroMemory( &amp;depthStencilBufferDesc, </code><code class="cpp keyword bold">sizeof</code><code class="cpp plain">(D3D11_TEXTURE2D_DESC) );</code></div><div class="line number322 index3 alt1">&nbsp;</div><div class="line number323 index4 alt2"><code class="cpp plain">depthStencilBufferDesc.ArraySize = 1;</code></div><div class="line number324 index5 alt1"><code class="cpp plain">depthStencilBufferDesc.BindFlags = D3D11_BIND_DEPTH_STENCIL;</code></div><div class="line number325 index6 alt2"><code class="cpp plain">depthStencilBufferDesc.CPUAccessFlags = 0; </code><code class="cpp comments">// No CPU access required.</code></div><div class="line number326 index7 alt1"><code class="cpp plain">depthStencilBufferDesc.Format = DXGI_FORMAT_D24_UNORM_S8_UINT;</code></div><div class="line number327 index8 alt2"><code class="cpp plain">depthStencilBufferDesc.Width = clientWidth;</code></div><div class="line number328 index9 alt1"><code class="cpp plain">depthStencilBufferDesc.Height = clientHeight;</code></div><div class="line number329 index10 alt2"><code class="cpp plain">depthStencilBufferDesc.MipLevels = 1;</code></div><div class="line number330 index11 alt1"><code class="cpp plain">depthStencilBufferDesc.SampleDesc.Count = 1;</code></div><div class="line number331 index12 alt2"><code class="cpp plain">depthStencilBufferDesc.SampleDesc.Quality = 0;</code></div><div class="line number332 index13 alt1"><code class="cpp plain">depthStencilBufferDesc.Usage = D3D11_USAGE_DEFAULT;</code></div><div class="line number333 index14 alt2">&nbsp;</div><div class="line number334 index15 alt1"><code class="cpp plain">hr = g_d3dDevice-&gt;CreateTexture2D( &amp;depthStencilBufferDesc, nullptr, &amp;g_d3dDepthStencilBuffer );</code></div><div class="line number335 index16 alt2"><code class="cpp keyword bold">if</code> <code class="cpp plain">( FAILED(hr) )</code></div><div class="line number336 index17 alt1"><code class="cpp plain">{</code></div><div class="line number337 index18 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">return</code> <code class="cpp plain">-1;</code></div><div class="line number338 index19 alt1"><code class="cpp plain">}</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>To create the texture, we must first define a <strong>D3D11_TEXTURE2D_DESC</strong> variable that will be used to describe the texture we want to create.</p>
<p>The <strong>D3D11_TEXTURE2D_DESC</strong> structure has the following members <a href="https://www.3dgep.com/introduction-to-directx-11/#D3D11_TEXTURE2D_DESC">[30]</a>: </p>
<div class="notranslate">
<div><div id="highlighter_387615" class="syntaxhighlighter  cpp"><table border="0" cellpadding="0" cellspacing="0"><caption>D3D11_TEXTURE2D_DESC structure</caption><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="cpp keyword bold">typedef</code> <code class="cpp keyword bold">struct</code> <code class="cpp plain">D3D11_TEXTURE2D_DESC {</code></div><div class="line number2 index1 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp color1 bold">UINT</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="cpp plain">Width;</code></div><div class="line number3 index2 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp color1 bold">UINT</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="cpp plain">Height;</code></div><div class="line number4 index3 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp color1 bold">UINT</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="cpp plain">MipLevels;</code></div><div class="line number5 index4 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp color1 bold">UINT</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="cpp plain">ArraySize;</code></div><div class="line number6 index5 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">DXGI_FORMAT&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Format;</code></div><div class="line number7 index6 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">DXGI_SAMPLE_DESC SampleDesc;</code></div><div class="line number8 index7 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">D3D11_USAGE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Usage;</code></div><div class="line number9 index8 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp color1 bold">UINT</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="cpp plain">BindFlags;</code></div><div class="line number10 index9 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp color1 bold">UINT</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="cpp plain">CPUAccessFlags;</code></div><div class="line number11 index10 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp color1 bold">UINT</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="cpp plain">MiscFlags;</code></div><div class="line number12 index11 alt1"><code class="cpp plain">} D3D11_TEXTURE2D_DESC;</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>Where:</p>
<ul>
<li><strong>UINT Width</strong>: Texture width (in texels). This should be the same width as the swap chain’s back buffer.</li>
<li><strong>UINT Height</strong>: Texture height (in texels). This should be the same height as the swap chain’s back buffer.</li>
<li><strong>UINT MipLevels</strong>: The maximum number of mipmap levels in the texture. See the remarks in <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff476231(v=vs.85).aspx" title="D3D11_TEX1D_SRV structure" target="_blank">D3D11_TEX1D_SRV</a>. Use 1 for a multisampled texture; or 0 to generate a full set of subtextures.</li>
<li><strong>UINT ArraySize</strong>: Number of textures in the texture array. For single textures, use 1.</li>
<li><strong>DXGI_FORMAT Format</strong>: The texture format. For this texture, we use <strong>DXGI_FORMAT_D24_UNORM_S8_UINT</strong> which is a 32-bit z-buffer format that supports 24 bits for depth and 8 bits for stencil. (See <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/bb173059(v=vs.85).aspx" title="DXGI_FORMAT enumeration" target="_blank">DXGI_FORMAT</a>).</li>
<li><strong>DXGI_SAMPLE_DESC SampleDesc</strong>: Structure that specifies multisampling parameters for the texture. See <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/bb173072(v=vs.85).aspx" title="DXGI_SAMPLE_DESC structure" target="_blank">DXGI_SAMPLE_DESC</a>. The value of the <strong>SampleDesc</strong> member should match the <strong>SampleDesc</strong> member of the <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/bb173075(v=vs.85).aspx" title="DXGI_SWAP_CHAIN_DESC structure" target="_blank">DXGI_SWAP_CHAIN_DESC</a> structure which was created earlier.</li>
<li><strong>D3D11_USAGE Usage</strong>: Value that identifies how the texture is to be read from and written to. It can be one of the following values <a href="https://www.3dgep.com/introduction-to-directx-11/#D3D11_USAGE">[31]</a>:
<ul>
<li><strong>D3D11_USAGE_DEFAULT</strong> (Default): A resource that requires read and write access by the GPU. This is likely to be the most common usage choice.</li>
<li><strong>D3D11_USAGE_IMMUTABLE</strong>: A resource that can only be read by the GPU. It cannot be written by the GPU, and cannot be accessed at all by the CPU. This type of resource must be initialized when it is created, since it cannot be changed after creation.</li>
<li><strong>D3D11_USAGE_DYNAMIC</strong>: A resource that is accessible by both the GPU (read only) and the CPU (write only). A dynamic resource is a good choice for a resource that will be updated by the CPU at least once per frame. To update a dynamic resource, use a <strong>Map</strong> method.</li>
<li><strong>D3D11_USAGE_STAGING</strong>: A resource that supports data transfer (copy) from the GPU to the CPU.</li>
</ul>
</li>
<li><strong>UINT BindFlags</strong>: Identifies how to bind a resource to the pipeline (see <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff476085(v=vs.85).aspx" title="D3D11_BIND_FLAG enumeration" target="_blank">D3D11_BIND_FLAG</a>). In this case, we specify <strong>D3D11_BIND_DEPTH_STENCIL</strong> which indicates that this buffer is to be used as a depth-stencil target for the output-merger stage.</li>
<li><strong>UINT CPUAccessFlags</strong>: Specifies the types of CPU access allowed for a resource (see <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff476106(v=vs.85).aspx" title="D3D11_CPU_ACCESS_FLAG enumeration" target="_blank">D3D11_CPU_ACCESS_FLAG</a>). This value can be <strong>0</strong> in which case no CPU access is required for the resource.</li>
<li><strong>UINT MiscFlags</strong>: Identifies additional options for resources (see <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff476203(v=vs.85).aspx" title="D3D11_RESOURCE_MISC_FLAG enumeration" target="_blank">D3D11_RESOURCE_MISC_FLAG</a>).</li>
</ul>
<p>With the <strong>D3D11_TEXTURE2D_DESC</strong> variable configured, we can create the texture resource with the <strong>ID3D11Device::CreateTexture2D</strong> method. This method has the following signature <a href="https://www.3dgep.com/introduction-to-directx-11/#CreateTexture2D">[32]</a>: </p>
<div class="notranslate">
<div><div id="highlighter_897938" class="syntaxhighlighter  cpp"><table border="0" cellpadding="0" cellspacing="0"><caption>ID3D11Device::CreateTexture2D method</caption><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="cpp color1 bold">HRESULT</code> <code class="cpp plain">CreateTexture2D(</code></div><div class="line number2 index1 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">[in]&nbsp;&nbsp; </code><code class="cpp keyword bold">const</code> <code class="cpp plain">D3D11_TEXTURE2D_DESC *pDesc,</code></div><div class="line number3 index2 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">[in]&nbsp;&nbsp; </code><code class="cpp keyword bold">const</code> <code class="cpp plain">D3D11_SUBRESOURCE_DATA *pInitialData,</code></div><div class="line number4 index3 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">[out]&nbsp; ID3D11Texture2D **ppTexture2D</code></div><div class="line number5 index4 alt2"><code class="cpp plain">);</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>Where: </p>
<ul>
<li><strong>const D3D11_TEXTURE2D_DESC *pDesc</strong>: A pointer to a <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff476253(v=vs.85).aspx" title="D3D11_TEXTURE2D_DESC structure" target="_blank">D3D11_TEXTURE2D_DESC</a> structure that describes a 2D texture resource.</li>
<li><strong>const D3D11_SUBRESOURCE_DATA *pInitialData</strong>: A pointer to an array of <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff476220(v=vs.85).aspx" title="D3D11_SUBRESOURCE_DATA structure" target="_blank">D3D11_SUBRESOURCE_DATA</a> structures that describe subresources for the 2D texture resource. If the resource is multisampled, <strong>pInitialData</strong> must be <strong>NULL</strong> because multisampled resources cannot be initialized with data when they are created. If the resource is created using the <strong>D3D11_USAGE_IMMUTABLE</strong> usage flag, then <strong>pInitialData</strong> must be valid and cannot be <strong>NULL</strong>.</li>
<li><strong>ID3D11Texture2D **ppTexture2D</strong>: A pointer to a buffer that receives a pointer to a ID3D11Texture2D interface for the created texture.</li>
</ul>
<span id="Create_a_Depth-Stencil_View"><h3>Create a Depth-Stencil View</h3></span>
<p>After we have created the depth/stencil buffer resource, we must create a <strong>ID3D11DepthStencilView</strong> before we can use this depth buffer for rendering. To do this, we will use the <strong>ID3D11Device::CreateDepthStencilView</strong> method. </p>
<div class="notranslate">
<div><div id="highlighter_762129" class="syntaxhighlighter  cpp"><table border="0" cellpadding="0" cellspacing="0"><caption>main.cpp</caption><tbody><tr><td class="gutter"><div class="line number340 index0 alt1">340</div><div class="line number341 index1 alt2">341</div><div class="line number342 index2 alt1">342</div><div class="line number343 index3 alt2">343</div><div class="line number344 index4 alt1">344</div></td><td class="code"><div class="container"><div class="line number340 index0 alt1"><code class="cpp plain">hr = g_d3dDevice-&gt;CreateDepthStencilView( g_d3dDepthStencilBuffer, nullptr, &amp;g_d3dDepthStencilView );</code></div><div class="line number341 index1 alt2"><code class="cpp keyword bold">if</code> <code class="cpp plain">( FAILED(hr) )</code></div><div class="line number342 index2 alt1"><code class="cpp plain">{</code></div><div class="line number343 index3 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">return</code> <code class="cpp plain">-1;</code></div><div class="line number344 index4 alt1"><code class="cpp plain">}</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>The <strong>ID3D11Device::CreateDepthStencilView</strong> method has the following signature <a href="https://www.3dgep.com/introduction-to-directx-11/#CreateDepthStencilView">[33]</a>:</p>
<div class="notranslate">
<div><div id="highlighter_858357" class="syntaxhighlighter  cpp"><table border="0" cellpadding="0" cellspacing="0"><caption>ID3D11Device::CreateDepthStencilView method</caption><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="cpp color1 bold">HRESULT</code> <code class="cpp plain">CreateDepthStencilView(</code></div><div class="line number2 index1 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">[in]&nbsp;&nbsp; ID3D11Resource *pResource,</code></div><div class="line number3 index2 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">[in]&nbsp;&nbsp; </code><code class="cpp keyword bold">const</code> <code class="cpp plain">D3D11_DEPTH_STENCIL_VIEW_DESC *pDesc,</code></div><div class="line number4 index3 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">[out]&nbsp; ID3D11DepthStencilView **ppDepthStencilView</code></div><div class="line number5 index4 alt2"><code class="cpp plain">);</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>Where:</p>
<ul>
<li><strong>ID3D11Resource *pResource</strong>: Pointer to the resource that will serve as the depth-stencil surface. This resource must have been created with the <strong>D3D11_BIND_DEPTH_STENCIL</strong> flag.</li>
<li><strong>const D3D11_DEPTH_STENCIL_VIEW_DESC *pDesc</strong>: Pointer to a depth-stencil-view description (see <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff476112(v=vs.85).aspx" title="D3D11_DEPTH_STENCIL_VIEW_DESC structure" target="_blank">D3D11_DEPTH_STENCIL_VIEW_DESC</a>). Set this parameter to <strong>NULL</strong> to create a view that accesses mipmap level 0 of the entire resource (using the format the resource was created with).</li>
<li><strong>ID3D11DepthStencilView **ppDepthStencilView</strong>: Address of a pointer to an <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff476377(v=vs.85).aspx" title="ID3D11DepthStencilView interface" target="_blank">ID3D11DepthStencilView</a>.</li>
</ul>
<p>Similar to the color buffer of the swap chain, we want to create a depth-stencil-view of the entire resource. In this case, we can simply supply <strong>NULL</strong> (or <strong>nullptr</strong>) for the 2nd parameter to the <strong>CreateDepthStencilView</strong> method.</p>
<p>At this point we have initialized the render buffers that are used by our DirectX application. Next we need to create a depth/stencil state object which controls how depth-stencil testing is performed by the output-merger stage and a rasterizer state object which controls how the rasterizer stage behaves.</p>
<span id="Create_a_Depth-Stencil_State_Object"><h3>Create a Depth-Stencil State Object</h3></span>
<p>First let’s create the <strong>ID3D11DepthStencilState</strong> object. To do this, we first create a <strong>D3D11_DEPTH_STENCIL_DESC</strong> variable that describes the <strong>ID3D11DepthStencilState</strong> object.</p>
<div class="notranslate">
<div><div id="highlighter_901434" class="syntaxhighlighter  cpp"><table border="0" cellpadding="0" cellspacing="0"><caption>main.cpp</caption><tbody><tr><td class="gutter"><div class="line number346 index0 alt1">346</div><div class="line number347 index1 alt2">347</div><div class="line number348 index2 alt1">348</div><div class="line number349 index3 alt2">349</div><div class="line number350 index4 alt1">350</div><div class="line number351 index5 alt2">351</div><div class="line number352 index6 alt1">352</div><div class="line number353 index7 alt2">353</div><div class="line number354 index8 alt1">354</div><div class="line number355 index9 alt2">355</div></td><td class="code"><div class="container"><div class="line number346 index0 alt1"><code class="cpp comments">// Setup depth/stencil state.</code></div><div class="line number347 index1 alt2"><code class="cpp plain">D3D11_DEPTH_STENCIL_DESC depthStencilStateDesc;</code></div><div class="line number348 index2 alt1"><code class="cpp plain">ZeroMemory( &amp;depthStencilStateDesc, </code><code class="cpp keyword bold">sizeof</code><code class="cpp plain">(D3D11_DEPTH_STENCIL_DESC) );</code></div><div class="line number349 index3 alt2">&nbsp;</div><div class="line number350 index4 alt1"><code class="cpp plain">depthStencilStateDesc.DepthEnable = TRUE;</code></div><div class="line number351 index5 alt2"><code class="cpp plain">depthStencilStateDesc.DepthWriteMask = D3D11_DEPTH_WRITE_MASK_ALL;</code></div><div class="line number352 index6 alt1"><code class="cpp plain">depthStencilStateDesc.DepthFunc = D3D11_COMPARISON_LESS;</code></div><div class="line number353 index7 alt2"><code class="cpp plain">depthStencilStateDesc.StencilEnable = FALSE;</code></div><div class="line number354 index8 alt1">&nbsp;</div><div class="line number355 index9 alt2"><code class="cpp plain">hr = g_d3dDevice-&gt;CreateDepthStencilState( &amp;depthStencilStateDesc, &amp;g_d3dDepthStencilState );</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>The <strong>D3D11_DEPTH_STENCIL_DESC</strong> is a structure with the following members <a href="https://www.3dgep.com/introduction-to-directx-11/#D3D11_DEPTH_STENCIL_DESC">[34]</a>:</p>
<div class="notranslate">
<div><div id="highlighter_177922" class="syntaxhighlighter  cpp"><table border="0" cellpadding="0" cellspacing="0"><caption>D3D11_DEPTH_STENCIL_DESC structure</caption><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="cpp keyword bold">typedef</code> <code class="cpp keyword bold">struct</code> <code class="cpp plain">D3D11_DEPTH_STENCIL_DESC {</code></div><div class="line number2 index1 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp color1 bold">BOOL</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="cpp plain">DepthEnable;</code></div><div class="line number3 index2 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">D3D11_DEPTH_WRITE_MASK&nbsp;&nbsp;&nbsp;&nbsp; DepthWriteMask;</code></div><div class="line number4 index3 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">D3D11_COMPARISON_FUNC&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; DepthFunc;</code></div><div class="line number5 index4 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp color1 bold">BOOL</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="cpp plain">StencilEnable;</code></div><div class="line number6 index5 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">UINT8&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; StencilReadMask;</code></div><div class="line number7 index6 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">UINT8&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; StencilWriteMask;</code></div><div class="line number8 index7 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">D3D11_DEPTH_STENCILOP_DESC FrontFace;</code></div><div class="line number9 index8 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">D3D11_DEPTH_STENCILOP_DESC BackFace;</code></div><div class="line number10 index9 alt1"><code class="cpp plain">} D3D11_DEPTH_STENCIL_DESC;</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>Where:</p>
<ul>
<li><strong>BOOL DepthEnable</strong>: Set to <strong>TRUE</strong> to enable depth testing, or set to <strong>FALSE</strong> to disable depth testing.</li>
<li><strong>D3D11_DEPTH_WRITE_MASK DepthWriteMask</strong>: Identify a portion of the depth-stencil buffer that can be modified by depth data. This variable can be one of the following values <a href="https://www.3dgep.com/introduction-to-directx-11/#D3D11_DEPTH_WRITE_MASK">[35]</a>:
<ul>
<li><strong>D3D11_DEPTH_WRITE_MASK_ZERO</strong>: Turn off writes to the depth-stencil buffer.</li>
<li><strong>D3D11_DEPTH_WRITE_MASK_ALL</strong>: Turn on writes to the depth-stencil buffer.</li>
</ul>
</li>
<li><strong>D3D11_COMPARISON_FUNC DepthFunc</strong>: A function that compares depth data against existing depth data. The function options are listed in <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff476101(v=vs.85).aspx" title="D3D11_COMPARISON_FUNC enumeration" target="_blank">D3D11_COMPARISON_FUNC</a>.</li>
<li><strong>BOOL StencilEnable</strong>: Set to <strong>TRUE</strong> to enable stencil testing, or set to <strong>FALSE</strong> to disable stencil testing.</li>
<li><strong>UINT8 StencilReadMask</strong>: Identify a portion of the depth-stencil buffer for reading stencil data.</li>
<li><strong>UINT8 StencilWriteMask</strong>: Identify a portion of the depth-stencil buffer for writing stencil data.</li>
<li><strong>D3D11_DEPTH_STENCILOP_DESC FrontFace</strong>: Identify how to use the results of the depth test and the stencil test for pixels whose surface normal is facing towards the camera (see <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff476109(v=vs.85).aspx" title="D3D11_DEPTH_STENCILOP_DESC structure" target="_blank">D3D11_DEPTH_STENCILOP_DESC</a>).</li>
<li><strong>D3D11_DEPTH_STENCILOP_DESC BackFace</strong>: Identify how to use the results of the depth test and the stencil test for pixels whose surface normal is facing away from the camera (see <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff476109(v=vs.85).aspx" title="D3D11_DEPTH_STENCILOP_DESC structure" target="_blank">D3D11_DEPTH_STENCILOP_DESC</a>).</li>
</ul>
<p>In this case, we enable depth testing and set the depth function to <strong>D3D11_COMPARISON_LESS</strong> which says that if the source data is less than the destination data (that is, the source data is closer to the eye), then the depth comparison passes.</p>
<p>If we wanted to render a transparent effect (such as a particle effect) but the transparent objects are not depth sorted, we would need to enable the depth test function so that the transparent object are still occluded by opaque object but disable depth writes by setting the <strong>DepthWriteMask</strong> member variable to <strong>D3D11_DEPTH_WRITE_MASK_ZERO</strong> so that the transparent objects do not occlude any other transparent objects. </p>
<p>Since we are not using the stencil testing for this demo, we simply set the <strong>StencilEnable</strong> flag to <strong>FALSE</strong> and forego setting any of the other stencil related variables.</p>
<p>With the <strong>D3D11_DEPTH_STENCIL_DESC</strong> structure setup, we can create the <strong>ID3D11DepthStencilState</strong> object using the <strong>ID3D11Device::CreateDepthStencilState</strong> method.</p>
<p>The <strong>ID3D11Device::CreateDepthStencilState</strong> method has the following signature <a href="https://www.3dgep.com/introduction-to-directx-11/#CreateDepthStencilState">[36]</a>:</p>
<div class="notranslate">
<div><div id="highlighter_195311" class="syntaxhighlighter  cpp"><table border="0" cellpadding="0" cellspacing="0"><caption>ID3D11Device::CreateDepthStencilState method</caption><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="cpp color1 bold">HRESULT</code> <code class="cpp plain">CreateDepthStencilState(</code></div><div class="line number2 index1 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">[in]&nbsp;&nbsp; </code><code class="cpp keyword bold">const</code> <code class="cpp plain">D3D11_DEPTH_STENCIL_DESC *pDepthStencilDesc,</code></div><div class="line number3 index2 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">[out]&nbsp; ID3D11DepthStencilState **ppDepthStencilState</code></div><div class="line number4 index3 alt1"><code class="cpp plain">);</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>Where:</p>
<ul>
<li><strong>const D3D11_DEPTH_STENCIL_DESC *pDepthStencilDesc</strong>: Pointer to a depth-stencil state description (see <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff476110(v=vs.85).aspx" title="D3D11_DEPTH_STENCIL_DESC structure" target="_blank">D3D11_DEPTH_STENCIL_DESC</a>).</li>
<li><strong>ID3D11DepthStencilState **ppDepthStencilState</strong>: Address of a pointer to the depth-stencil state object created (see <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff476375(v=vs.85).aspx" title="ID3D11DepthStencilState interface" target="_blank">ID3D11DepthStencilState</a>).</li>
</ul>
<span id="Create_a_Rasterizer_State_Object"><h3>Create a Rasterizer State Object</h3></span>
<p>The final step in initializing the application for 3D rendering is setting up the rasterizer state object. Similar to the depth-stencil state object, we need to define a <strong>D3D11_RASTERIZER_DESC</strong> structure that defines how the rasterizer state object behaves.</p>
<div class="notranslate">
<div><div id="highlighter_324140" class="syntaxhighlighter  cpp"><table border="0" cellpadding="0" cellspacing="0"><caption>main.cpp</caption><tbody><tr><td class="gutter"><div class="line number357 index0 alt2">357</div><div class="line number358 index1 alt1">358</div><div class="line number359 index2 alt2">359</div><div class="line number360 index3 alt1">360</div><div class="line number361 index4 alt2">361</div><div class="line number362 index5 alt1">362</div><div class="line number363 index6 alt2">363</div><div class="line number364 index7 alt1">364</div><div class="line number365 index8 alt2">365</div><div class="line number366 index9 alt1">366</div><div class="line number367 index10 alt2">367</div><div class="line number368 index11 alt1">368</div><div class="line number369 index12 alt2">369</div><div class="line number370 index13 alt1">370</div><div class="line number371 index14 alt2">371</div><div class="line number372 index15 alt1">372</div><div class="line number373 index16 alt2">373</div><div class="line number374 index17 alt1">374</div><div class="line number375 index18 alt2">375</div><div class="line number376 index19 alt1">376</div><div class="line number377 index20 alt2">377</div></td><td class="code"><div class="container"><div class="line number357 index0 alt2"><code class="cpp comments">// Setup rasterizer state.</code></div><div class="line number358 index1 alt1"><code class="cpp plain">D3D11_RASTERIZER_DESC rasterizerDesc;</code></div><div class="line number359 index2 alt2"><code class="cpp plain">ZeroMemory( &amp;rasterizerDesc, </code><code class="cpp keyword bold">sizeof</code><code class="cpp plain">(D3D11_RASTERIZER_DESC) );</code></div><div class="line number360 index3 alt1">&nbsp;</div><div class="line number361 index4 alt2"><code class="cpp plain">rasterizerDesc.AntialiasedLineEnable = FALSE;</code></div><div class="line number362 index5 alt1"><code class="cpp plain">rasterizerDesc.CullMode = D3D11_CULL_BACK;</code></div><div class="line number363 index6 alt2"><code class="cpp plain">rasterizerDesc.DepthBias = 0;</code></div><div class="line number364 index7 alt1"><code class="cpp plain">rasterizerDesc.DepthBiasClamp = 0.0f;</code></div><div class="line number365 index8 alt2"><code class="cpp plain">rasterizerDesc.DepthClipEnable = TRUE;</code></div><div class="line number366 index9 alt1"><code class="cpp plain">rasterizerDesc.FillMode = D3D11_FILL_SOLID;</code></div><div class="line number367 index10 alt2"><code class="cpp plain">rasterizerDesc.FrontCounterClockwise = FALSE;</code></div><div class="line number368 index11 alt1"><code class="cpp plain">rasterizerDesc.MultisampleEnable = FALSE;</code></div><div class="line number369 index12 alt2"><code class="cpp plain">rasterizerDesc.ScissorEnable = FALSE;</code></div><div class="line number370 index13 alt1"><code class="cpp plain">rasterizerDesc.SlopeScaledDepthBias = 0.0f;</code></div><div class="line number371 index14 alt2">&nbsp;</div><div class="line number372 index15 alt1"><code class="cpp comments">// Create the rasterizer state object.</code></div><div class="line number373 index16 alt2"><code class="cpp plain">hr = g_d3dDevice-&gt;CreateRasterizerState( &amp;rasterizerDesc, &amp;g_d3dRasterizerState );</code></div><div class="line number374 index17 alt1"><code class="cpp keyword bold">if</code> <code class="cpp plain">( FAILED(hr) )</code></div><div class="line number375 index18 alt2"><code class="cpp plain">{</code></div><div class="line number376 index19 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">return</code> <code class="cpp plain">-1;</code></div><div class="line number377 index20 alt2"><code class="cpp plain">}</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>The <strong>D3D11_RASTERIZER_DESC</strong> structure has the following members <a href="https://www.3dgep.com/introduction-to-directx-11/#D3D11_RASTERIZER_DESC">[37]</a>:</p>
<div class="notranslate">
<div><div id="highlighter_584846" class="syntaxhighlighter  cpp"><table border="0" cellpadding="0" cellspacing="0"><caption>D3D11_RASTERIZER_DESC structure</caption><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="cpp keyword bold">typedef</code> <code class="cpp keyword bold">struct</code> <code class="cpp plain">D3D11_RASTERIZER_DESC {</code></div><div class="line number2 index1 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">D3D11_FILL_MODE FillMode;</code></div><div class="line number3 index2 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">D3D11_CULL_MODE CullMode;</code></div><div class="line number4 index3 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp color1 bold">BOOL</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="cpp plain">FrontCounterClockwise;</code></div><div class="line number5 index4 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp color1 bold">INT</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="cpp plain">DepthBias;</code></div><div class="line number6 index5 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp color1 bold">FLOAT</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="cpp plain">DepthBiasClamp;</code></div><div class="line number7 index6 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp color1 bold">FLOAT</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="cpp plain">SlopeScaledDepthBias;</code></div><div class="line number8 index7 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp color1 bold">BOOL</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="cpp plain">DepthClipEnable;</code></div><div class="line number9 index8 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp color1 bold">BOOL</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="cpp plain">ScissorEnable;</code></div><div class="line number10 index9 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp color1 bold">BOOL</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="cpp plain">MultisampleEnable;</code></div><div class="line number11 index10 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp color1 bold">BOOL</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="cpp plain">AntialiasedLineEnable;</code></div><div class="line number12 index11 alt1"><code class="cpp plain">} D3D11_RASTERIZER_DESC;</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>Where:</p>
<ul>
<li><strong>D3D11_FILL_MODE FillMode</strong>: Determines the fill mode to use when rendering and can be one of the following values <a href="https://www.3dgep.com/introduction-to-directx-11/#D3D11_FILL_MODE">[38]</a>:
<ul>
<li><strong>D3D11_FILL_WIREFRAME</strong>: Draw lines connecting the vertices.</li>
<li><strong>D3D11_FILL_SOLID</strong>: Fill the triangles formed by the vertices.</li>
</ul>
</li><li><strong>D3D11_CULL_MODE CullMode</strong>: Indicates triangles facing the specified direction are not drawn. This variable can have one of the following values <a href="https://www.3dgep.com/introduction-to-directx-11/#D3D11_CULL_MODE">[39]</a>:
<ul>
<li><strong>D3D11_CULL_NONE</strong>: Always draw all triangles.</li>
<li><strong>D3D11_CULL_FRONT</strong>: Do not draw triangles that are front-facing.</li>
<li><strong>D3D11_CULL_BACK</strong>: Do not draw triangles that are back-facing.</li>
</ul>
</li><li><strong>BOOL FrontCounterClockwise</strong>: Determines if a triangle is front- or back-facing. If this parameter is <strong>TRUE</strong>, a triangle will be considered front-facing if its vertices are counter-clockwise on the render target and considered back-facing if they are clockwise. If this parameter is <strong>FALSE</strong>, the opposite is true.</li>
<li><strong>INT DepthBias</strong>: Depth value added to a given pixel. For info about depth bias, see <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/cc308048(v=vs.85).aspx" title="Depth Bias" target="_blank">Depth Bias</a>.</li>
<li><strong>FLOAT DepthBiasClamp</strong>: Maximum depth bias of a pixel. For info about depth bias, see <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/cc308048(v=vs.85).aspx" title="Depth Bias" target="_blank">Depth Bias</a>.</li>
<li><strong>FLOAT SlopeScaledDepthBias</strong>: Scalar on a given pixel’s slope. For info about depth bias, see <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/cc308048(v=vs.85).aspx" title="Depth Bias" target="_blank">Depth Bias</a>.</li>
<li><strong>BOOL DepthClipEnable</strong>: Enable clipping based on distance.<br>
The hardware always performs x and y clipping of rasterized coordinates. When <strong>DepthClipEnable</strong> is set to the default–<strong>TRUE</strong>, the hardware also clips the z value. When you set <strong>DepthClipEnable</strong> to <strong>FALSE</strong>, the hardware skips the z clipping.</li>
<li><strong>BOOL ScissorEnable</strong>: Enable scissor-rectangle culling. All pixels outside an active scissor rectangle are culled. Scissor rectangles can be specified using the <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff476478(v=vs.85).aspx" title="ID3D11DeviceContext::RSSetScissorRects method" target="_blank">ID3D11DeviceContext::RSSetScissorRects</a> method.</li>
<li><strong>BOOL MultisampleEnable</strong>: Specifies whether to use the quadrilateral or alpha line anti-aliasing algorithm on multisample antialiasing (MSAA) render targets. Set to <strong>TRUE</strong> to use the quadrilateral line anti-aliasing algorithm and to <strong>FALSE</strong> to use the alpha line anti-aliasing algorithm.</li>
<li><strong>BOOL AntialiasedLineEnable</strong>: Specifies whether to enable line antialiasing; only applies if doing line drawing and <strong>MultisampleEnable</strong> is <strong>FALSE</strong>.</li>
</ul>
<p>With the <strong>D3D11_RASTERIZER_DESC</strong> structure filled in, we can create the <strong>ID3D11RasterizerState</strong> object using the <strong>ID3D11Device::CreateRasterizerState</strong> method.</p>
<p>The <strong>ID3D11Device::CreateRasterizerState</strong> method has the following signature <a href="https://www.3dgep.com/introduction-to-directx-11/#CreateRasterizerState">[40]</a>:</p>
<div class="notranslate">
<div><div id="highlighter_795243" class="syntaxhighlighter  cpp"><table border="0" cellpadding="0" cellspacing="0"><caption>ID3D11Device::CreateRasterizerState method</caption><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="cpp color1 bold">HRESULT</code> <code class="cpp plain">CreateRasterizerState(</code></div><div class="line number2 index1 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">[in]&nbsp;&nbsp; </code><code class="cpp keyword bold">const</code> <code class="cpp plain">D3D11_RASTERIZER_DESC *pRasterizerDesc,</code></div><div class="line number3 index2 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">[out]&nbsp; ID3D11RasterizerState **ppRasterizerState</code></div><div class="line number4 index3 alt1"><code class="cpp plain">);</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>Where:</p>
<ul>
<li><strong>const D3D11_RASTERIZER_DESC *pRasterizerDesc</strong>: Pointer to a rasterizer state description.</li>
<li><strong>ID3D11RasterizerState **ppRasterizerState</strong>: Address of a pointer to the rasterizer state object created (see <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff476580(v=vs.85).aspx" title="ID3D11RasterizerState interface" target="_blank">ID3D11RasterizerState</a>).</li>
</ul>
<span id="Initialize_the_Viewport"><h3>Initialize the Viewport</h3></span>
<p>Although not strictly considered part of the Direct3D initialization phase, setting up a viewport definition is a necessary component of initializing the rasterizer stage. The viewport defines the area in screen space where our final render will go. For this application, we will be rendering to the entire client area of the application window but we could also define two viewports if we wanted to implement split screen multiplayer or a picture-in-picture effect. </p>
<p>To configure the viewport, we need to know the width and height of the client area. We have already computed the width and height of the client rectangle on lines 243-244 of the <strong>InitDirectX</strong> function and we used the client area to determine the size of the swap chain’s back buffer and the depth-stencil buffer. We will set the viewport to the same dimensions.</p>
<div class="notranslate">
<div><div id="highlighter_193192" class="syntaxhighlighter  cpp"><table border="0" cellpadding="0" cellspacing="0"><caption>main.cpp</caption><tbody><tr><td class="gutter"><div class="line number379 index0 alt2">379</div><div class="line number380 index1 alt1">380</div><div class="line number381 index2 alt2">381</div><div class="line number382 index3 alt1">382</div><div class="line number383 index4 alt2">383</div><div class="line number384 index5 alt1">384</div><div class="line number385 index6 alt2">385</div><div class="line number386 index7 alt1">386</div><div class="line number387 index8 alt2">387</div><div class="line number388 index9 alt1">388</div></td><td class="code"><div class="container"><div class="line number379 index0 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp comments">// Initialize the viewport to occupy the entire client area.</code></div><div class="line number380 index1 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">g_Viewport.Width = </code><code class="cpp keyword bold">static_cast</code><code class="cpp plain">&lt;</code><code class="cpp color1 bold">float</code><code class="cpp plain">&gt;(clientWidth);</code></div><div class="line number381 index2 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">g_Viewport.Height = </code><code class="cpp keyword bold">static_cast</code><code class="cpp plain">&lt;</code><code class="cpp color1 bold">float</code><code class="cpp plain">&gt;(clientHeight);</code></div><div class="line number382 index3 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">g_Viewport.TopLeftX = 0.0f;</code></div><div class="line number383 index4 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">g_Viewport.TopLeftY = 0.0f;</code></div><div class="line number384 index5 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">g_Viewport.MinDepth = 0.0f;</code></div><div class="line number385 index6 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">g_Viewport.MaxDepth = 1.0f;</code></div><div class="line number386 index7 alt1">&nbsp;</div><div class="line number387 index8 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">return</code> <code class="cpp plain">0;</code></div><div class="line number388 index9 alt1"><code class="cpp plain">}</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>The <strong>g_Viewport</strong> global variable is of type <strong>D3D11_VIEWPORT</strong>. This structure has the following members <a href="https://www.3dgep.com/introduction-to-directx-11/#D3D11_VIEWPORT">[41]</a>:</p>
<div class="notranslate">
<div><div id="highlighter_572548" class="syntaxhighlighter  cpp"><table border="0" cellpadding="0" cellspacing="0"><caption>D3D11_VIEWPORT structure</caption><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="cpp keyword bold">typedef</code> <code class="cpp keyword bold">struct</code> <code class="cpp plain">D3D11_VIEWPORT {</code></div><div class="line number2 index1 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp color1 bold">FLOAT</code> <code class="cpp plain">TopLeftX;</code></div><div class="line number3 index2 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp color1 bold">FLOAT</code> <code class="cpp plain">TopLeftY;</code></div><div class="line number4 index3 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp color1 bold">FLOAT</code> <code class="cpp plain">Width;</code></div><div class="line number5 index4 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp color1 bold">FLOAT</code> <code class="cpp plain">Height;</code></div><div class="line number6 index5 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp color1 bold">FLOAT</code> <code class="cpp plain">MinDepth;</code></div><div class="line number7 index6 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp color1 bold">FLOAT</code> <code class="cpp plain">MaxDepth;</code></div><div class="line number8 index7 alt1"><code class="cpp plain">} D3D11_VIEWPORT;</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>Where: </p>
<ul>
<li><strong>FLOAT TopLeftX</strong>: X position of the left hand side of the viewport.</li>
<li><strong>FLOAT TopLeftY</strong>: Y position of the top of the viewport.</li>
<li><strong>FLOAT Width</strong>: Width of the viewport.</li>
<li><strong>FLOAT Height</strong>: Height of the viewport.</li>
<li><strong>FLOAT MinDepth</strong>: Minimum depth of the viewport. Ranges between 0 and 1.</li>
<li><strong>FLOAT MaxDepth</strong>: Maximum depth of the viewport. Ranges between 0 and 1.</li>
</ul>
<p>Now that we have initialized Direct3D, let’s update the <strong>wWinMain</strong> to include this change.</p>
<span id="Update_the_Main_Function"><h2>Update the Main Function</h2></span>
<p>At this point we can update the main function to include the function to initialize Direct3D.</p>
<div class="notranslate">
<div><div id="highlighter_986600" class="syntaxhighlighter  cpp"><table border="0" cellpadding="0" cellspacing="0"><caption>main.cpp</caption><tbody><tr><td class="gutter"><div class="line number741 index0 alt2">741</div><div class="line number742 index1 alt1">742</div><div class="line number743 index2 alt2">743</div><div class="line number744 index3 alt1">744</div><div class="line number745 index4 alt2">745</div><div class="line number746 index5 alt1">746</div><div class="line number747 index6 alt2">747</div><div class="line number748 index7 alt1">748</div><div class="line number749 index8 alt2">749</div><div class="line number750 index9 alt1">750</div><div class="line number751 index10 alt2">751</div><div class="line number752 index11 alt1">752</div><div class="line number753 index12 alt2">753</div><div class="line number754 index13 alt1">754</div><div class="line number755 index14 alt2">755</div><div class="line number756 index15 alt1">756</div><div class="line number757 index16 alt2">757</div><div class="line number758 index17 alt1">758</div><div class="line number759 index18 alt2 highlighted">759</div><div class="line number760 index19 alt1 highlighted">760</div><div class="line number761 index20 alt2 highlighted">761</div><div class="line number762 index21 alt1 highlighted">762</div><div class="line number763 index22 alt2 highlighted">763</div><div class="line number764 index23 alt1">764</div><div class="line number765 index24 alt2">765</div><div class="line number766 index25 alt1">766</div><div class="line number767 index26 alt2">767</div><div class="line number768 index27 alt1">768</div></td><td class="code"><div class="container"><div class="line number741 index0 alt2"><code class="cpp color1 bold">int</code> <code class="cpp plain">WINAPI wWinMain( </code><code class="cpp color1 bold">HINSTANCE</code> <code class="cpp plain">hInstance, </code><code class="cpp color1 bold">HINSTANCE</code> <code class="cpp plain">prevInstance, </code><code class="cpp color1 bold">LPWSTR</code> <code class="cpp plain">cmdLine, </code><code class="cpp color1 bold">int</code> <code class="cpp plain">cmdShow )</code></div><div class="line number742 index1 alt1"><code class="cpp plain">{</code></div><div class="line number743 index2 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">UNREFERENCED_PARAMETER( prevInstance );</code></div><div class="line number744 index3 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">UNREFERENCED_PARAMETER( cmdLine );</code></div><div class="line number745 index4 alt2">&nbsp;</div><div class="line number746 index5 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp comments">// Check for DirectX Math library support.</code></div><div class="line number747 index6 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">if</code> <code class="cpp plain">( !XMVerifyCPUSupport() )</code></div><div class="line number748 index7 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">{</code></div><div class="line number749 index8 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">MessageBox( nullptr, TEXT(</code><code class="cpp string">"Failed to verify DirectX Math library support."</code><code class="cpp plain">), TEXT(</code><code class="cpp string">"Error"</code><code class="cpp plain">), MB_OK );</code></div><div class="line number750 index9 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">return</code> <code class="cpp plain">-1;</code></div><div class="line number751 index10 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number752 index11 alt1">&nbsp;</div><div class="line number753 index12 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">if</code><code class="cpp plain">( InitApplication(hInstance, cmdShow) != 0 )</code></div><div class="line number754 index13 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">{</code></div><div class="line number755 index14 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">MessageBox( nullptr, TEXT(</code><code class="cpp string">"Failed to create applicaiton window."</code><code class="cpp plain">), TEXT(</code><code class="cpp string">"Error"</code><code class="cpp plain">), MB_OK );</code></div><div class="line number756 index15 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">return</code> <code class="cpp plain">-1;</code></div><div class="line number757 index16 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number758 index17 alt1">&nbsp;</div><div class="line number759 index18 alt2 highlighted"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">if</code> <code class="cpp plain">( InitDirectX(hInstance, g_EnableVSync) != 0 )</code></div><div class="line number760 index19 alt1 highlighted"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">{</code></div><div class="line number761 index20 alt2 highlighted"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">MessageBox( nullptr, TEXT(</code><code class="cpp string">"Failed to create DirectX device and swap chain."</code><code class="cpp plain">), TEXT(</code><code class="cpp string">"Error"</code><code class="cpp plain">), MB_OK );</code></div><div class="line number762 index21 alt1 highlighted"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">return</code> <code class="cpp plain">-1;</code></div><div class="line number763 index22 alt2 highlighted"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number764 index23 alt1">&nbsp;</div><div class="line number765 index24 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp color1 bold">int</code> <code class="cpp plain">returnCode = Run();</code></div><div class="line number766 index25 alt1">&nbsp;</div><div class="line number767 index26 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">return</code> <code class="cpp plain">returnCode;</code></div><div class="line number768 index27 alt1"><code class="cpp plain">}</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>If we run the application again, we will still only see a blank window because we still haven’t rendered anything onto the screen.</p>
<p>Up until now, we have only seen the generic initialization code that is required for a minimum Direct3D application. Next we will look at the initialization code that is specific for this particular demo. Before we do that, I would like to diverge to the subject of shaders. First we will create a simple vertex shader and pixel shader that we can use to render our geometry.</p>
<span id="Shaders"><h1>Shaders</h1></span>
<p>Up until DirectX 9, the Direct3D API featured a fixed-function pipeline. Using the fixed-function pipeline the graphics programmer was not required to write shaders. As of DirectX 10, the fixed-function pipeline has been deprecated and replaced by a programmable shader pipeline. The minimum required shaders for a DirectX 10 or newer application are a vertex shader and a pixel shader. The vertex shader is responsible for transforming the incoming vertex position into clip-space as required by the rasterizer stage and the pixel shader is responsible for computing the final pixel color from the interpolated vertex attributes.</p>
<p>The shader language for DirectX is called High Level Shading Language (<strong>HLSL</strong>). HLSL is a C-like (and C++-like as of shader model 5.0) programming language that has support for variables, structs (and interfaces and classes as of shader model 5.0), functions, and various flow control constructs such as if, for, while, do, and switch.</p>
<p>HLSL has another kind of language syntax which is not used in C or C++ programming called <strong>semantics</strong>. A semantic is a name which is associated to a shader input or output variable. Semantics are required on all variables that are passed between shader stages. In the generic case, the value of the semantic is arbitrary. The only requirement is that there is a matching semantic associated to an output variable in the source shader stage with an input variable in the destination shader stage. For example, the vertex shader might declare an output variable called <strong>out_color</strong> of type <strong>float4</strong> which is associated to the <strong>COLOR</strong> semantic and the pixel shader declares an input variable called <strong>in_color</strong> of type <strong>float4</strong> which is also associated to the <strong>COLOR</strong> semantic. This will cause the value of the <strong>out_color</strong> variable declared in the vertex shader to be connected to the value of the <strong>in_color</strong> variable in the pixel shader.</p>
<div id="attachment_5663" style="width: 829px" class="wp-caption alignnone"><a href="./Introduction to DirectX 113D Game Engine Programming_files/Shader-Semantics.png"><img src="./Introduction to DirectX 113D Game Engine Programming_files/Shader-Semantics.png" alt="Shader Semantics" width="819" height="147" class="size-full wp-image-5663" srcset="https://www.3dgep.com/wp-content/uploads/2014/03/Shader-Semantics.png 819w, https://www.3dgep.com/wp-content/uploads/2014/03/Shader-Semantics-300x53.png 300w, https://www.3dgep.com/wp-content/uploads/2014/03/Shader-Semantics-500x89.png 500w" sizes="(max-width: 819px) 100vw, 819px"></a><p class="wp-caption-text">Shader Semantics</p></div>
<p>We will also use semantics to bind the geometry coming from the application to the input assembler and vertex shader stages in the following sections.</p>
<p>Besides these generic semantics, HLSL also defines a set of System-Value semantics <a href="https://www.3dgep.com/introduction-to-directx-11/#SystemValueSemantics">[42]</a> which you can associate to input and output variables that have a special meaning to the rendering pipeline. All system-value semantics begin with a <strong>SV_</strong> prefix such as <strong>SV_Position</strong>. As an example, the <strong>SV_Position</strong> system-value semantic is used to associate a float4 output variable from the vertex shader with the homogeneous clip-space position required by the rasterizer.</p>
<p>For more information on HLSL syntax, please refer to the MSDN documentation on <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/bb509615(v=vs.85).aspx" title="HLSL Language Syntax" target="_blank">HLSL Language Syntax</a>.</p>
<p>Since the vertex shader stage comes first in the rendering pipeline, let’s take a look at the vertex shader first.</p>
<span id="Vertex_Shader"><h2>Vertex Shader</h2></span>
<p>The vertex shader consumes vertex attributes from the Input Assembler stage and transforms the vertex position into homogeneous clip-space for the rasterizer stage. The vertex shader can also manipulate other vertex attributes (for example shift and scale texture coordinates) but this is optional in a vertex shader.</p>
<p>The input to the vertex shader is the object-space vertex position and any other vertex attributes that are passed by the application. At a minimum, We need to transform the object-space vertex position into homogeneous clip-space for use by the rasterizer. To perform this transformation, we will multiply the object-space vertex position by the model-view-projection matrix. The model-view-projection matrix is a combination of the geometry’s world matrix, the camera’s view matrix, and the camera’s projection matrix. We will need to pass these matrices to the vertex shader to perform the transformation. We will use constant buffers to store the matrices based on the frequency at which they are updated. Let’s see how we do this.</p>
<div class="notranslate">
<div><div id="highlighter_159902" class="syntaxhighlighter  cpp"><table border="0" cellpadding="0" cellspacing="0"><caption>SimpleVertexShader.hlsl</caption><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="cpp plain">cbuffer PerApplication : </code><code class="cpp keyword bold">register</code><code class="cpp plain">( b0 )</code></div><div class="line number2 index1 alt1"><code class="cpp plain">{</code></div><div class="line number3 index2 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">matrix projectionMatrix;</code></div><div class="line number4 index3 alt1"><code class="cpp plain">}</code></div><div class="line number5 index4 alt2">&nbsp;</div><div class="line number6 index5 alt1"><code class="cpp plain">cbuffer PerFrame : </code><code class="cpp keyword bold">register</code><code class="cpp plain">( b1 )</code></div><div class="line number7 index6 alt2"><code class="cpp plain">{</code></div><div class="line number8 index7 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">matrix viewMatrix;</code></div><div class="line number9 index8 alt2"><code class="cpp plain">}</code></div><div class="line number10 index9 alt1">&nbsp;</div><div class="line number11 index10 alt2"><code class="cpp plain">cbuffer PerObject : </code><code class="cpp keyword bold">register</code><code class="cpp plain">( b2 )</code></div><div class="line number12 index11 alt1"><code class="cpp plain">{</code></div><div class="line number13 index12 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">matrix worldMatrix;</code></div><div class="line number14 index13 alt1"><code class="cpp plain">}</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>First we declare three constant buffers using the <strong>cbuffer</strong> type. Each constant buffer is assigned to constant buffer registers by supplying the <strong>b</strong> register type. Explicitly assigning the constant buffer registers in this way is optional as the shader compiler will do this anyways if we don’t explicitly assign the registers but doing this provides more control over the placement of the buffers.</p>
<p>You will notice that we split the 3 matrices according to how frequently the matrix is updated. The projection matrix is usually updated when the application is started (in this demo anyways) and the view matrix is updated once per frame and the world matrix is updated for each separate object that will be rendered using this shader. By separating the variables in this way, we can reduce the amount of data that must be sent over the GPU bus. Of course this is an example showing the use of constant buffers. In your own shaders, you may want to compute the combined model-view-projection matrix in the application and only update a single uniform matrix variable in the shader.</p>
<p>Next we need to define a set of variables that will be passed from the application to the vertex shader. For this purpose, we will define a structure that will contain all of the input attributes for the vertex.</p>
<div class="notranslate">
<div><div id="highlighter_370899" class="syntaxhighlighter  cpp"><table border="0" cellpadding="0" cellspacing="0"><caption>SimpleVertexShader.hlsl</caption><tbody><tr><td class="gutter"><div class="line number16 index0 alt1">16</div><div class="line number17 index1 alt2">17</div><div class="line number18 index2 alt1">18</div><div class="line number19 index3 alt2">19</div><div class="line number20 index4 alt1">20</div></td><td class="code"><div class="container"><div class="line number16 index0 alt1"><code class="cpp keyword bold">struct</code> <code class="cpp plain">AppData</code></div><div class="line number17 index1 alt2"><code class="cpp plain">{</code></div><div class="line number18 index2 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">float3 position : POSITION;</code></div><div class="line number19 index3 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">float3 color: COLOR;</code></div><div class="line number20 index4 alt1"><code class="cpp plain">};</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>The <strong>AppData</strong> struct is used to encapsulate all of the vertex attributes that are sent from the application (the code to map vertex attributes from the application to varying shader variables will be shown later). These are the varying input variables to the vertex shader.</p>
<p>Here we also see the first use of semantics. The <strong>position</strong> variable has the <strong>POSITION</strong> semantic and the color variable has the <strong>COLOR</strong> semantic. We will use these semantics to connect the application variables to the shader variables.</p>
<p>Similar to the input variables, we will define a struct which encapsulates the output variables. These variables are sent from the vertex shader to the pixel shader.</p>
<div class="notranslate">
<div><div id="highlighter_385647" class="syntaxhighlighter  cpp"><table border="0" cellpadding="0" cellspacing="0"><caption>SimpleVertexShader.hlsl</caption><tbody><tr><td class="gutter"><div class="line number22 index0 alt1">22</div><div class="line number23 index1 alt2">23</div><div class="line number24 index2 alt1">24</div><div class="line number25 index3 alt2">25</div><div class="line number26 index4 alt1">26</div></td><td class="code"><div class="container"><div class="line number22 index0 alt1"><code class="cpp keyword bold">struct</code> <code class="cpp plain">VertexShaderOutput</code></div><div class="line number23 index1 alt2"><code class="cpp plain">{</code></div><div class="line number24 index2 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">float4 color : COLOR;</code></div><div class="line number25 index3 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">float4 position : SV_POSITION;</code></div><div class="line number26 index4 alt1"><code class="cpp plain">};</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>The <strong>VertexShaderOutput</strong> defines the variables that will be output from the vertex shader. At a minimum, the vertex shader must output a <strong>float4</strong> variable bound to the <strong>SV_Position</strong> system-value semantic as this is required by the rasterizer stage.</p>
<p>The <strong>color</strong> variable is bound to the <strong>COLOR</strong> semantic. The pixel shader will also need a matching <strong>float4</strong> input variable which is bound to the <strong>COLOR</strong> semantic to allow this variable to pass from the vertex shader stage to the pixel shader stage. In order for the color variable in the vertex shader to be correctly bound to the matching variable in the pixel shader, not only does the semantics need to match but the register they are bound to must also match. For this reason, I placed the <strong>color</strong> variable before the <strong>position</strong> variable in the <strong>VertexShaderOutput</strong> structure. This way, the first register will be assigned to the <strong>color</strong> variable in both the vertex shader and the pixel shader (as we will see briefly).</p>
<p>Now let’s see the entry point function of the vertex shader.</p>
<div class="notranslate">
<div><div id="highlighter_51684" class="syntaxhighlighter  cpp"><table border="0" cellpadding="0" cellspacing="0"><caption>SimpleVertexShader.hlsl</caption><tbody><tr><td class="gutter"><div class="line number28 index0 alt1">28</div><div class="line number29 index1 alt2">29</div><div class="line number30 index2 alt1">30</div><div class="line number31 index3 alt2">31</div><div class="line number32 index4 alt1">32</div><div class="line number33 index5 alt2">33</div><div class="line number34 index6 alt1">34</div><div class="line number35 index7 alt2">35</div><div class="line number36 index8 alt1">36</div><div class="line number37 index9 alt2">37</div></td><td class="code"><div class="container"><div class="line number28 index0 alt1"><code class="cpp plain">VertexShaderOutput SimpleVertexShader( AppData IN )</code></div><div class="line number29 index1 alt2"><code class="cpp plain">{</code></div><div class="line number30 index2 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">VertexShaderOutput OUT;</code></div><div class="line number31 index3 alt2">&nbsp;</div><div class="line number32 index4 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">matrix mvp = mul( projectionMatrix, mul( viewMatrix, worldMatrix ) );</code></div><div class="line number33 index5 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">OUT.position = mul( mvp, float4( IN.position, 1.0f ) );</code></div><div class="line number34 index6 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">OUT.color = float4( IN.color, 1.0f );</code></div><div class="line number35 index7 alt2">&nbsp;</div><div class="line number36 index8 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">return</code> <code class="cpp plain">OUT;</code></div><div class="line number37 index9 alt2"><code class="cpp plain">}</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>The <strong>SimpleVertexShader</strong> function is the entry point for the vertex shader program. It takes an <strong>AppData</strong> struct variable as input and returns a <strong>VertexShaderOutput</strong> struct as output.</p>
<p>On line 32, the combined model-view-projection matrix is computed by multiplying the projection, view, and world matrix together. You will notice that we are post-multiplying the world matrix by the view matrix and the model-view matrix by the projection matrix. If you have done some programming with DirectX in the past, you may have used row-major matrix order in which case you would have swapped the order of multiplications. Since DirectX 10, the default order for matrices in HLSL is column-major so we will stick to this convention in this demo and future DirectX demos. </p>
<p>Using column-major matrices means that we have to post-multiply the vertex position by the model-view-projection matrix to correctly transform the vertex position from object-space to homogeneous clip-space.</p>
<p>On line 34 the vertex color is simply passed as-is to pixel shader.</p>
<p>Next we will create a pixel shader that will be used to determine the final pixel color of our geometry.</p>
<span id="Pixel_Shader"><h2>Pixel Shader</h2></span>
<p>The pixel shader for this demo is even simpler than the vertex shader. In this case we simply output the color value passed from the vertex shader to the currently bound render target by returning a value that is bound to the <strong>SV_Target</strong> system value semantic.</p>
<div class="notranslate">
<div><div id="highlighter_701223" class="syntaxhighlighter  cpp"><table border="0" cellpadding="0" cellspacing="0"><caption>SimplePixelShader.hlsl</caption><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="cpp keyword bold">struct</code> <code class="cpp plain">PixelShaderInput</code></div><div class="line number2 index1 alt1"><code class="cpp plain">{</code></div><div class="line number3 index2 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">float4 color : COLOR;</code></div><div class="line number4 index3 alt1"><code class="cpp plain">};</code></div><div class="line number5 index4 alt2">&nbsp;</div><div class="line number6 index5 alt1"><code class="cpp plain">float4 SimplePixelShader( PixelShaderInput IN ) : SV_TARGET</code></div><div class="line number7 index6 alt2"><code class="cpp plain">{</code></div><div class="line number8 index7 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">return</code> <code class="cpp plain">IN.color;</code></div><div class="line number9 index8 alt2"><code class="cpp plain">}</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>The <strong>PixelShaderInput</strong> struct defines the input variables that we expect to be passed from the vertex shader stage. In this case, we only need the color value from the vertex shader which was bound to the <strong>COLOR</strong> semantic. We don’t need the <strong>position</strong> variable which was bound to the <strong>SV_Position</strong> system-value semantic because that variable was only required by the rasterizer stage. </p>
<span id="Compiling_Shaders"><h2>Compiling Shaders</h2></span>
<p>Now that we have defined the shaders we need to use them in our application. Before we can use them we must compile these shaders into a format that the GPU can understand. We can chose to precompile the shaders in the application’s compilation phase or we can load the HLSL shaders at runtime and compile them “on-the-fly”. </p>
<p>If we compile the shaders with the compilation phase of our application then we can distribute our shaders with the application in a pre-compiled format and we can load the shaders faster because they don’t require compilation during the loading of the application.</p>
<p>If we decide to compile the shaders at runtime then we may get noticeably slower load times if we have a lot of shaders to compile but we have more control over how the shader is loaded based on runtime logic.</p>
<span id="Precompiled_Shaders"><h3>Precompiled Shaders</h3></span>
<p>As of Visual Studio 2012, files with the <strong>hlsl</strong> extension that are added to your project will be compiled by the <strong>FXC.exe</strong> HLSL shader compiler during the compilation phase of your project. The shader code can be compiled either into a byte array that you can include directly in your source code or you can compile to a compiled shader file which you can load at runtime.</p>
<p>Add the <strong>SimpleVertexShader.hlsl</strong> file and the <strong>SimplePixelShader.hlsl</strong> file to your project.</p>
<p>Right-click the <strong>SimpleVertexShader.hlsl</strong> file in the solution explorer and select Properties from the pop-up menu that appears.</p>
<div id="attachment_5667" style="width: 862px" class="wp-caption alignnone"><a href="./Introduction to DirectX 113D Game Engine Programming_files/SimpleVertexShader-Properties.png"><img src="./Introduction to DirectX 113D Game Engine Programming_files/SimpleVertexShader-Properties.png" alt="SimpleVertexShader Properties" width="852" height="604" class="size-full wp-image-5667" srcset="https://www.3dgep.com/wp-content/uploads/2014/03/SimpleVertexShader-Properties.png 852w, https://www.3dgep.com/wp-content/uploads/2014/03/SimpleVertexShader-Properties-300x212.png 300w, https://www.3dgep.com/wp-content/uploads/2014/03/SimpleVertexShader-Properties-423x300.png 423w" sizes="(max-width: 852px) 100vw, 852px"></a><p class="wp-caption-text">SimpleVertexShader Properties</p></div>
<p>For both Debug and Release builds, select the <strong>HLSL Compiler &gt; General</strong> options and set the <strong>Entrypoint Name</strong> property to <strong>SimpleVertexShader</strong> to match the name of the entry point function defined in the shader.</p>
<p>Set the <strong>Shader Type</strong> to <strong>Vertex Shader (/vs)</strong> and set the <strong>Shader Model</strong> to the shader model you want to support.</p>
<p>Select the <strong>HLSL Compiler &gt; Output Files</strong> node.</p>
<div id="attachment_5669" style="width: 862px" class="wp-caption alignnone"><a href="./Introduction to DirectX 113D Game Engine Programming_files/SimpleVertexShader-Properties-2.png"><img src="./Introduction to DirectX 113D Game Engine Programming_files/SimpleVertexShader-Properties-2.png" alt="SimpleVertexShader Properties (2)" width="852" height="604" class="size-full wp-image-5669" srcset="https://www.3dgep.com/wp-content/uploads/2014/03/SimpleVertexShader-Properties-2.png 852w, https://www.3dgep.com/wp-content/uploads/2014/03/SimpleVertexShader-Properties-2-300x212.png 300w, https://www.3dgep.com/wp-content/uploads/2014/03/SimpleVertexShader-Properties-2-423x300.png 423w" sizes="(max-width: 852px) 100vw, 852px"></a><p class="wp-caption-text">SimpleVertexShader Properties (2)</p></div>
<p>The <strong>Header Variable Name</strong> property determines the name of the global variable that is declared in the header file which is used to refer to the compiled byte array of your shader.</p>
<p>The <strong>Header File Name</strong> determines the location of the header file where the compiled shader byte array will be written to. The location of this property is relative to the folder where your project file is located.</p>
<p>The <strong>Object File Name</strong> determines the location of the the file that contains the compiled shader object file is written to. </p>
<p>Follow these steps for the pixel shader as well.</p>
<p>You do not need to specify both the <strong>Header File Name</strong> and the <strong>Object File Name</strong> because you will usually only use one or the other. In the next section I will show how you can use either of these options to load the precompiled shader object in the application.</p>
<span id="Runtime_Compiled_Shader"><h3>Runtime Compiled Shader</h3></span>
<p>The other way to compile your shaders is to compile them at runtime. Using this method requires the d3dcompiler runtime to be distributed with your application and if you are building a DirectX application for the Windows App store then you should not use this method. This method should only be used to test and debug your shaders or if you do not intend to distribute your DirectX application on the Windows App store and you don’t mind the extra load time of compiling your shaders at runtime.</p>
<p>To load the shader at runtime, we will define a template function called <strong>LoadShader</strong> to load a shader from a file path. Since the loading of the shader object is similar regardless of the type of the shader except for a few lines of code, the LoadShader function will be templated on the type of shader object we are loading.</p>
<p>We will probably also want to take the feature level of the end-users graphics hardware into consideration when loading our shaders. If the end-users computer only supports feature level 10_0 we should not try to compile our shaders using Shader Model 5.0. The <strong>GetLatestProfile</strong> template function will return the latest shader profile based on the feature level of the end-users computer.</p>
<span id="Get_the_Latest_Profile"><h4>Get the Latest Profile</h4></span>
<p>First let’s declare the <strong>GetLatestProfile</strong> template function.</p>
<div class="notranslate">
<div><div id="highlighter_471699" class="syntaxhighlighter  cpp"><table border="0" cellpadding="0" cellspacing="0"><caption>main.cpp</caption><tbody><tr><td class="gutter"><div class="line number534 index0 alt1">534</div><div class="line number535 index1 alt2">535</div><div class="line number536 index2 alt1">536</div></td><td class="code"><div class="container"><div class="line number534 index0 alt1"><code class="cpp comments">// Get the latest profile for the specified shader type.</code></div><div class="line number535 index1 alt2"><code class="cpp keyword bold">template</code><code class="cpp plain">&lt; </code><code class="cpp keyword bold">class</code> <code class="cpp plain">ShaderClass &gt;</code></div><div class="line number536 index2 alt1"><code class="cpp plain">std::string GetLatestProfile();</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>Next we will specialize this function based on the vertex shader type.</p>
<div class="notranslate">
<div><div id="highlighter_863669" class="syntaxhighlighter  cpp"><table border="0" cellpadding="0" cellspacing="0"><caption>main.cpp</caption><tbody><tr><td class="gutter"><div class="line number538 index0 alt1">538</div><div class="line number539 index1 alt2">539</div><div class="line number540 index2 alt1">540</div><div class="line number541 index3 alt2">541</div><div class="line number542 index4 alt1">542</div><div class="line number543 index5 alt2">543</div><div class="line number544 index6 alt1">544</div><div class="line number545 index7 alt2">545</div><div class="line number546 index8 alt1">546</div><div class="line number547 index9 alt2">547</div><div class="line number548 index10 alt1">548</div><div class="line number549 index11 alt2">549</div><div class="line number550 index12 alt1">550</div><div class="line number551 index13 alt2">551</div><div class="line number552 index14 alt1">552</div><div class="line number553 index15 alt2">553</div><div class="line number554 index16 alt1">554</div><div class="line number555 index17 alt2">555</div><div class="line number556 index18 alt1">556</div><div class="line number557 index19 alt2">557</div><div class="line number558 index20 alt1">558</div><div class="line number559 index21 alt2">559</div><div class="line number560 index22 alt1">560</div><div class="line number561 index23 alt2">561</div><div class="line number562 index24 alt1">562</div><div class="line number563 index25 alt2">563</div><div class="line number564 index26 alt1">564</div><div class="line number565 index27 alt2">565</div><div class="line number566 index28 alt1">566</div><div class="line number567 index29 alt2">567</div><div class="line number568 index30 alt1">568</div><div class="line number569 index31 alt2">569</div><div class="line number570 index32 alt1">570</div><div class="line number571 index33 alt2">571</div><div class="line number572 index34 alt1">572</div><div class="line number573 index35 alt2">573</div><div class="line number574 index36 alt1">574</div><div class="line number575 index37 alt2">575</div><div class="line number576 index38 alt1">576</div><div class="line number577 index39 alt2">577</div><div class="line number578 index40 alt1">578</div></td><td class="code"><div class="container"><div class="line number538 index0 alt1"><code class="cpp keyword bold">template</code><code class="cpp plain">&lt;&gt;</code></div><div class="line number539 index1 alt2"><code class="cpp plain">std::string GetLatestProfile&lt;ID3D11VertexShader&gt;()</code></div><div class="line number540 index2 alt1"><code class="cpp plain">{</code></div><div class="line number541 index3 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp functions bold">assert</code><code class="cpp plain">( g_d3dDevice );</code></div><div class="line number542 index4 alt1">&nbsp;</div><div class="line number543 index5 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp comments">// Query the current feature level:</code></div><div class="line number544 index6 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">D3D_FEATURE_LEVEL featureLevel = g_d3dDevice-&gt;GetFeatureLevel();</code></div><div class="line number545 index7 alt2">&nbsp;</div><div class="line number546 index8 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">switch</code><code class="cpp plain">( featureLevel )</code></div><div class="line number547 index9 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">{</code></div><div class="line number548 index10 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">case</code> <code class="cpp plain">D3D_FEATURE_LEVEL_11_1:</code></div><div class="line number549 index11 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">case</code> <code class="cpp plain">D3D_FEATURE_LEVEL_11_0:</code></div><div class="line number550 index12 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">{</code></div><div class="line number551 index13 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">return</code> <code class="cpp string">"vs_5_0"</code><code class="cpp plain">;</code></div><div class="line number552 index14 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number553 index15 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">break</code><code class="cpp plain">;</code></div><div class="line number554 index16 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">case</code> <code class="cpp plain">D3D_FEATURE_LEVEL_10_1:</code></div><div class="line number555 index17 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">{</code></div><div class="line number556 index18 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">return</code> <code class="cpp string">"vs_4_1"</code><code class="cpp plain">;</code></div><div class="line number557 index19 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number558 index20 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">break</code><code class="cpp plain">;</code></div><div class="line number559 index21 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">case</code> <code class="cpp plain">D3D_FEATURE_LEVEL_10_0:</code></div><div class="line number560 index22 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">{</code></div><div class="line number561 index23 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">return</code> <code class="cpp string">"vs_4_0"</code><code class="cpp plain">;</code></div><div class="line number562 index24 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number563 index25 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">break</code><code class="cpp plain">;</code></div><div class="line number564 index26 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">case</code> <code class="cpp plain">D3D_FEATURE_LEVEL_9_3:</code></div><div class="line number565 index27 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">{</code></div><div class="line number566 index28 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">return</code> <code class="cpp string">"vs_4_0_level_9_3"</code><code class="cpp plain">;</code></div><div class="line number567 index29 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number568 index30 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">break</code><code class="cpp plain">;</code></div><div class="line number569 index31 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">case</code> <code class="cpp plain">D3D_FEATURE_LEVEL_9_2:</code></div><div class="line number570 index32 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">case</code> <code class="cpp plain">D3D_FEATURE_LEVEL_9_1:</code></div><div class="line number571 index33 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">{</code></div><div class="line number572 index34 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">return</code> <code class="cpp string">"vs_4_0_level_9_1"</code><code class="cpp plain">;</code></div><div class="line number573 index35 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number574 index36 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">break</code><code class="cpp plain">;</code></div><div class="line number575 index37 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">} </code><code class="cpp comments">// switch( featureLevel )</code></div><div class="line number576 index38 alt1">&nbsp;</div><div class="line number577 index39 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">return</code> <code class="cpp string">""</code><code class="cpp plain">;</code></div><div class="line number578 index40 alt1"><code class="cpp plain">}</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>This version of the template function returns the latest vertex shader profile that can be used to compile the vertex shader given the specific feature level supported by the end-user’s hardware.</p>
<p>And we will also provide a specialization for the pixel shader type.</p>
<div class="notranslate">
<div><div id="highlighter_954254" class="syntaxhighlighter  cpp"><table border="0" cellpadding="0" cellspacing="0"><caption>main.cpp</caption><tbody><tr><td class="gutter"><div class="line number580 index0 alt1">580</div><div class="line number581 index1 alt2">581</div><div class="line number582 index2 alt1">582</div><div class="line number583 index3 alt2">583</div><div class="line number584 index4 alt1">584</div><div class="line number585 index5 alt2">585</div><div class="line number586 index6 alt1">586</div><div class="line number587 index7 alt2">587</div><div class="line number588 index8 alt1">588</div><div class="line number589 index9 alt2">589</div><div class="line number590 index10 alt1">590</div><div class="line number591 index11 alt2">591</div><div class="line number592 index12 alt1">592</div><div class="line number593 index13 alt2">593</div><div class="line number594 index14 alt1">594</div><div class="line number595 index15 alt2">595</div><div class="line number596 index16 alt1">596</div><div class="line number597 index17 alt2">597</div><div class="line number598 index18 alt1">598</div><div class="line number599 index19 alt2">599</div><div class="line number600 index20 alt1">600</div><div class="line number601 index21 alt2">601</div><div class="line number602 index22 alt1">602</div><div class="line number603 index23 alt2">603</div><div class="line number604 index24 alt1">604</div><div class="line number605 index25 alt2">605</div><div class="line number606 index26 alt1">606</div><div class="line number607 index27 alt2">607</div><div class="line number608 index28 alt1">608</div><div class="line number609 index29 alt2">609</div><div class="line number610 index30 alt1">610</div><div class="line number611 index31 alt2">611</div><div class="line number612 index32 alt1">612</div><div class="line number613 index33 alt2">613</div><div class="line number614 index34 alt1">614</div><div class="line number615 index35 alt2">615</div><div class="line number616 index36 alt1">616</div><div class="line number617 index37 alt2">617</div><div class="line number618 index38 alt1">618</div></td><td class="code"><div class="container"><div class="line number580 index0 alt1"><code class="cpp keyword bold">template</code><code class="cpp plain">&lt;&gt;</code></div><div class="line number581 index1 alt2"><code class="cpp plain">std::string GetLatestProfile&lt;ID3D11PixelShader&gt;()</code></div><div class="line number582 index2 alt1"><code class="cpp plain">{</code></div><div class="line number583 index3 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp functions bold">assert</code><code class="cpp plain">( g_d3dDevice );</code></div><div class="line number584 index4 alt1">&nbsp;</div><div class="line number585 index5 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp comments">// Query the current feature level:</code></div><div class="line number586 index6 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">D3D_FEATURE_LEVEL featureLevel = g_d3dDevice-&gt;GetFeatureLevel();</code></div><div class="line number587 index7 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">switch</code><code class="cpp plain">( featureLevel )</code></div><div class="line number588 index8 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">{</code></div><div class="line number589 index9 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">case</code> <code class="cpp plain">D3D_FEATURE_LEVEL_11_1:</code></div><div class="line number590 index10 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">case</code> <code class="cpp plain">D3D_FEATURE_LEVEL_11_0:</code></div><div class="line number591 index11 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">{</code></div><div class="line number592 index12 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">return</code> <code class="cpp string">"ps_5_0"</code><code class="cpp plain">;</code></div><div class="line number593 index13 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number594 index14 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">break</code><code class="cpp plain">;</code></div><div class="line number595 index15 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">case</code> <code class="cpp plain">D3D_FEATURE_LEVEL_10_1:</code></div><div class="line number596 index16 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">{</code></div><div class="line number597 index17 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">return</code> <code class="cpp string">"ps_4_1"</code><code class="cpp plain">;</code></div><div class="line number598 index18 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number599 index19 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">break</code><code class="cpp plain">;</code></div><div class="line number600 index20 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">case</code> <code class="cpp plain">D3D_FEATURE_LEVEL_10_0:</code></div><div class="line number601 index21 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">{</code></div><div class="line number602 index22 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">return</code> <code class="cpp string">"ps_4_0"</code><code class="cpp plain">;</code></div><div class="line number603 index23 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number604 index24 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">break</code><code class="cpp plain">;</code></div><div class="line number605 index25 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">case</code> <code class="cpp plain">D3D_FEATURE_LEVEL_9_3:</code></div><div class="line number606 index26 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">{</code></div><div class="line number607 index27 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">return</code> <code class="cpp string">"ps_4_0_level_9_3"</code><code class="cpp plain">;</code></div><div class="line number608 index28 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number609 index29 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">break</code><code class="cpp plain">;</code></div><div class="line number610 index30 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">case</code> <code class="cpp plain">D3D_FEATURE_LEVEL_9_2:</code></div><div class="line number611 index31 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">case</code> <code class="cpp plain">D3D_FEATURE_LEVEL_9_1:</code></div><div class="line number612 index32 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">{</code></div><div class="line number613 index33 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">return</code> <code class="cpp string">"ps_4_0_level_9_1"</code><code class="cpp plain">;</code></div><div class="line number614 index34 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number615 index35 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">break</code><code class="cpp plain">;</code></div><div class="line number616 index36 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number617 index37 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">return</code> <code class="cpp string">""</code><code class="cpp plain">;</code></div><div class="line number618 index38 alt1"><code class="cpp plain">}</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>This version of the function returns the latest pixel shader profile that can be used to compile the pixel shader.</p>
<p>Feel free to implement template specializations for the geometry shader, hull shader and domain shader types. Keep in mind that geometry shaders are only supported as of feature level 10_0 and hull and domain shaders are only supported as of feature level 11_0 <a href="https://www.3dgep.com/introduction-to-directx-11/#FeatureLevels">[43]</a>.</p>
<span id="Create_a_Shader_Object"><h4>Create a Shader Object</h4></span>
<p>Another function that should be specialized based on the shader type is a function that will create a shader object based on the shader type. This is the only part of the <strong>LoadShader</strong> function that is different depending on what kind of shader is being loaded.</p>
<p>First we will define a template function that will create the shader object.</p>
<div class="notranslate">
<div><div id="highlighter_363316" class="syntaxhighlighter  cpp"><table border="0" cellpadding="0" cellspacing="0"><caption>main.cpp</caption><tbody><tr><td class="gutter"><div class="line number620 index0 alt1">620</div><div class="line number621 index1 alt2">621</div></td><td class="code"><div class="container"><div class="line number620 index0 alt1"><code class="cpp keyword bold">template</code><code class="cpp plain">&lt; </code><code class="cpp keyword bold">class</code> <code class="cpp plain">ShaderClass &gt;</code></div><div class="line number621 index1 alt2"><code class="cpp plain">ShaderClass* CreateShader( ID3DBlob* pShaderBlob, ID3D11ClassLinkage* pClassLinkage );</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>The <strong>CreateShader</strong> template function takes a binary object and the class linkage object and creates the appropriate shader object.</p>
<p>First let’s specialize this template function on the <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff476641(v=vs.85).aspx" title="ID3D11VertexShader interface" target="_blank">ID3D11VertexShader</a> type.</p>
<div class="notranslate">
<div><div id="highlighter_395495" class="syntaxhighlighter  cpp"><table border="0" cellpadding="0" cellspacing="0"><caption>main.cpp</caption><tbody><tr><td class="gutter"><div class="line number623 index0 alt2">623</div><div class="line number624 index1 alt1">624</div><div class="line number625 index2 alt2">625</div><div class="line number626 index3 alt1">626</div><div class="line number627 index4 alt2">627</div><div class="line number628 index5 alt1">628</div><div class="line number629 index6 alt2">629</div><div class="line number630 index7 alt1">630</div><div class="line number631 index8 alt2">631</div><div class="line number632 index9 alt1">632</div><div class="line number633 index10 alt2">633</div></td><td class="code"><div class="container"><div class="line number623 index0 alt2"><code class="cpp keyword bold">template</code><code class="cpp plain">&lt;&gt;</code></div><div class="line number624 index1 alt1"><code class="cpp plain">ID3D11VertexShader* CreateShader&lt;ID3D11VertexShader&gt;( ID3DBlob* pShaderBlob, ID3D11ClassLinkage* pClassLinkage )</code></div><div class="line number625 index2 alt2"><code class="cpp plain">{</code></div><div class="line number626 index3 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp functions bold">assert</code><code class="cpp plain">( g_d3dDevice );</code></div><div class="line number627 index4 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp functions bold">assert</code><code class="cpp plain">( pShaderBlob );</code></div><div class="line number628 index5 alt1">&nbsp;</div><div class="line number629 index6 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">ID3D11VertexShader* pVertexShader = nullptr;</code></div><div class="line number630 index7 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">g_d3dDevice-&gt;CreateVertexShader( pShaderBlob-&gt;GetBufferPointer(), pShaderBlob-&gt;GetBufferSize(), pClassLinkage, &amp;pVertexShader );</code></div><div class="line number631 index8 alt2">&nbsp;</div><div class="line number632 index9 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">return</code> <code class="cpp plain">pVertexShader;</code></div><div class="line number633 index10 alt2"><code class="cpp plain">}</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>This function uses the <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff476524(v=vs.85).aspx" title="ID3D11Device::CreateVertexShader method" target="_blank">ID3D11Device::CreateVertexShader</a> method to create the vertex shader object.</p>
<p>Next, we’ll specialize on the <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff476576(v=vs.85).aspx" title="ID3D11PixelShader interface" target="_blank">ID3D11PixelShader</a> shader type.</p>
<div class="notranslate">
<div><div id="highlighter_577681" class="syntaxhighlighter  cpp"><table border="0" cellpadding="0" cellspacing="0"><caption>main.cpp</caption><tbody><tr><td class="gutter"><div class="line number635 index0 alt2">635</div><div class="line number636 index1 alt1">636</div><div class="line number637 index2 alt2">637</div><div class="line number638 index3 alt1">638</div><div class="line number639 index4 alt2">639</div><div class="line number640 index5 alt1">640</div><div class="line number641 index6 alt2">641</div><div class="line number642 index7 alt1">642</div><div class="line number643 index8 alt2">643</div><div class="line number644 index9 alt1">644</div><div class="line number645 index10 alt2">645</div></td><td class="code"><div class="container"><div class="line number635 index0 alt2"><code class="cpp keyword bold">template</code><code class="cpp plain">&lt;&gt;</code></div><div class="line number636 index1 alt1"><code class="cpp plain">ID3D11PixelShader* CreateShader&lt;ID3D11PixelShader&gt;( ID3DBlob* pShaderBlob, ID3D11ClassLinkage* pClassLinkage )</code></div><div class="line number637 index2 alt2"><code class="cpp plain">{</code></div><div class="line number638 index3 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp functions bold">assert</code><code class="cpp plain">( g_d3dDevice );</code></div><div class="line number639 index4 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp functions bold">assert</code><code class="cpp plain">( pShaderBlob );</code></div><div class="line number640 index5 alt1">&nbsp;</div><div class="line number641 index6 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">ID3D11PixelShader* pPixelShader = nullptr;</code></div><div class="line number642 index7 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">g_d3dDevice-&gt;CreatePixelShader( pShaderBlob-&gt;GetBufferPointer(), pShaderBlob-&gt;GetBufferSize(), pClassLinkage, &amp;pPixelShader );</code></div><div class="line number643 index8 alt2">&nbsp;</div><div class="line number644 index9 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">return</code> <code class="cpp plain">pPixelShader;</code></div><div class="line number645 index10 alt2"><code class="cpp plain">}</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>Clearly this version of the template function is not much different than that of the vertex shader type except in the method that is used to create the shader object but we needed to do this to simplify the functionality of the <strong>LoadShader</strong> function which I will show next.</p>
<span id="Load_a_Shader"><h4>Load a Shader</h4></span>
<p>The <strong>LoadShader</strong> template function takes the file path to a HLSL shader file, the entry point function in that file, and a compatible profile to compile the shader to and returns the initialized shader object.</p>
<div class="notranslate">
<div><div id="highlighter_963359" class="syntaxhighlighter  cpp"><table border="0" cellpadding="0" cellspacing="0"><caption>main.cpp</caption><tbody><tr><td class="gutter"><div class="line number648 index0 alt1">648</div><div class="line number649 index1 alt2">649</div><div class="line number650 index2 alt1">650</div><div class="line number651 index3 alt2">651</div><div class="line number652 index4 alt1">652</div><div class="line number653 index5 alt2">653</div><div class="line number654 index6 alt1">654</div><div class="line number655 index7 alt2">655</div><div class="line number656 index8 alt1">656</div><div class="line number657 index9 alt2">657</div><div class="line number658 index10 alt1">658</div><div class="line number659 index11 alt2">659</div></td><td class="code"><div class="container"><div class="line number648 index0 alt1"><code class="cpp keyword bold">template</code><code class="cpp plain">&lt; </code><code class="cpp keyword bold">class</code> <code class="cpp plain">ShaderClass &gt;</code></div><div class="line number649 index1 alt2"><code class="cpp plain">ShaderClass* LoadShader( </code><code class="cpp keyword bold">const</code> <code class="cpp plain">std::wstring&amp; fileName, </code><code class="cpp keyword bold">const</code> <code class="cpp plain">std::string&amp; entryPoint, </code><code class="cpp keyword bold">const</code> <code class="cpp plain">std::string&amp; _profile )</code></div><div class="line number650 index2 alt1"><code class="cpp plain">{</code></div><div class="line number651 index3 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">ID3DBlob* pShaderBlob = nullptr;</code></div><div class="line number652 index4 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">ID3DBlob* pErrorBlob = nullptr;</code></div><div class="line number653 index5 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">ShaderClass* pShader = nullptr;</code></div><div class="line number654 index6 alt1">&nbsp;</div><div class="line number655 index7 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">std::string profile = _profile;</code></div><div class="line number656 index8 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">if</code> <code class="cpp plain">( profile == </code><code class="cpp string">"latest"</code> <code class="cpp plain">)</code></div><div class="line number657 index9 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">{</code></div><div class="line number658 index10 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">profile = GetLatestProfile&lt;ShaderClass&gt;();</code></div><div class="line number659 index11 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">}</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>The <strong>LoadShader</strong> function accepts the profile to use to compile the shader but we can also use the special value <strong>“latest”</strong> profile value which specifies that the latest profile for the current feature level should be used.</p>
<p>The next step is to compile the HLSL shader into a Binary Large Object (BLOB) using the <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/hh446872(v=vs.85).aspx" title="D3DCompileFromFile function" target="_blank">D3DCompileFromFile</a> function.</p>
<div class="notranslate">
<div><div id="highlighter_712487" class="syntaxhighlighter  cpp"><table border="0" cellpadding="0" cellspacing="0"><caption>main.cpp</caption><tbody><tr><td class="gutter"><div class="line number661 index0 alt2">661</div><div class="line number662 index1 alt1">662</div><div class="line number663 index2 alt2">663</div><div class="line number664 index3 alt1">664</div><div class="line number665 index4 alt2">665</div><div class="line number666 index5 alt1">666</div><div class="line number667 index6 alt2">667</div><div class="line number668 index7 alt1">668</div><div class="line number669 index8 alt2">669</div><div class="line number670 index9 alt1">670</div><div class="line number671 index10 alt2">671</div><div class="line number672 index11 alt1">672</div><div class="line number673 index12 alt2">673</div><div class="line number674 index13 alt1">674</div><div class="line number675 index14 alt2">675</div><div class="line number676 index15 alt1">676</div><div class="line number677 index16 alt2">677</div><div class="line number678 index17 alt1">678</div><div class="line number679 index18 alt2">679</div><div class="line number680 index19 alt1">680</div><div class="line number681 index20 alt2">681</div><div class="line number682 index21 alt1">682</div></td><td class="code"><div class="container"><div class="line number661 index0 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp color1 bold">UINT</code> <code class="cpp plain">flags = D3DCOMPILE_ENABLE_STRICTNESS;</code></div><div class="line number662 index1 alt1"><code class="cpp preprocessor">#if _DEBUG</code></div><div class="line number663 index2 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">flags |= D3DCOMPILE_DEBUG;</code></div><div class="line number664 index3 alt1"><code class="cpp preprocessor">#endif</code></div><div class="line number665 index4 alt2">&nbsp;</div><div class="line number666 index5 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp color1 bold">HRESULT</code> <code class="cpp plain">hr = D3DCompileFromFile( fileName.c_str(), nullptr, </code></div><div class="line number667 index6 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">D3D_COMPILE_STANDARD_FILE_INCLUDE, entryPoint.c_str(), profile.c_str(), </code></div><div class="line number668 index7 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">flags, 0, &amp;pShaderBlob, &amp;pErrorBlob );</code></div><div class="line number669 index8 alt2">&nbsp;</div><div class="line number670 index9 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">if</code> <code class="cpp plain">( FAILED( hr ) )</code></div><div class="line number671 index10 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">{</code></div><div class="line number672 index11 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">if</code> <code class="cpp plain">( pErrorBlob )</code></div><div class="line number673 index12 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">{</code></div><div class="line number674 index13 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">std::string errorMessage = (</code><code class="cpp color1 bold">char</code><code class="cpp plain">*)pErrorBlob-&gt;GetBufferPointer();</code></div><div class="line number675 index14 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">OutputDebugStringA( errorMessage.c_str() );</code></div><div class="line number676 index15 alt1">&nbsp;</div><div class="line number677 index16 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">SafeRelease(pShaderBlob);</code></div><div class="line number678 index17 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">SafeRelease(pErrorBlob);</code></div><div class="line number679 index18 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number680 index19 alt1">&nbsp;</div><div class="line number681 index20 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">return</code> <code class="cpp keyword bold">false</code><code class="cpp plain">;</code></div><div class="line number682 index21 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">}</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>The <strong>D3DCompileFromFile</strong> function has the following signature <a href="https://www.3dgep.com/introduction-to-directx-11/#D3DCompileFromFile">[44]</a>:</p>
<div class="notranslate">
<div><div id="highlighter_293884" class="syntaxhighlighter  cpp"><table border="0" cellpadding="0" cellspacing="0"><caption>D3DCompileFromFile function</caption><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="cpp color1 bold">HRESULT</code> <code class="cpp plain">WINAPI D3DCompileFromFile(</code></div><div class="line number2 index1 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">in&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp color1 bold">LPCWSTR</code> <code class="cpp plain">pFileName,</code></div><div class="line number3 index2 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">in_opt&nbsp;&nbsp; </code><code class="cpp keyword bold">const</code> <code class="cpp plain">D3D_SHADER_MACRO *pDefines,</code></div><div class="line number4 index3 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">in_opt&nbsp;&nbsp; ID3DInclude *pInclude,</code></div><div class="line number5 index4 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">in&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp color1 bold">LPCSTR</code> <code class="cpp plain">pEntrypoint,</code></div><div class="line number6 index5 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">in&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp color1 bold">LPCSTR</code> <code class="cpp plain">pTarget,</code></div><div class="line number7 index6 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">in&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp color1 bold">UINT</code> <code class="cpp plain">Flags1,</code></div><div class="line number8 index7 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">in&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp color1 bold">UINT</code> <code class="cpp plain">Flags2,</code></div><div class="line number9 index8 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">out&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ID3DBlob **ppCode,</code></div><div class="line number10 index9 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">out_opt&nbsp; ID3DBlob **ppErrorMsgs</code></div><div class="line number11 index10 alt2"><code class="cpp plain">);</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>Where: </p>
<ul>
<li><strong>LPCWSTR pFileName</strong>: A pointer to a constant null-terminated string that contains the name of the file that contains the shader code.</li>
<li><strong>const D3D_SHADER_MACRO *pDefines</strong>: An optional array of <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff728732(v=vs.85).aspx" title="D3D_SHADER_MACRO structure" target="_blank">D3D_SHADER_MACRO</a> structures that define shader macros. Each macro definition contains a name and a NULL-terminated definition. If not used, set to <strong>NULL</strong>.</li>
<li><strong>ID3DInclude *pInclude</strong>: An optional pointer to an <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff728746(v=vs.85).aspx" title="ID3DInclude interface" target="_blank">ID3DInclude</a> interface that the compiler uses to handle include files. If you set this parameter to <strong>NULL</strong> and the shader contains a <strong>#include</strong> directive, a compile error occurs. You can pass the <strong>D3D_COMPILE_STANDARD_FILE_INCLUDE</strong> macro, which is a pointer to a default include handler. This default include handler includes files that are relative to the current directory.</li>
<li><strong>LPCSTR pEntrypoint</strong>: A pointer to a constant null-terminated string that contains the name of the shader entry point function where shader execution begins.</li>
<li><strong>LPCSTR pTarget</strong>: A pointer to a constant null-terminated string that specifies the shader target or set of shader features to compile against. The shader target can be a shader model (for example, shader model 2, shader model 3, shader model 4, or shader model 5 and later). The target can also be an effect type (for example, fx_4_1). For info about the targets that various profiles support, see <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/jj215820(v=vs.85).aspx" title="Specifying Compiler Targets" target="_blank">Specifying Compiler Targets</a>.</li>
<li><strong>UINT Flags1</strong>: A combination of shader <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/gg615083(v=vs.85).aspx" title="D3DCOMPILE Constants" target="_blank">compile options</a> that are combined by using a bitwise OR operation. The resulting value specifies how the compiler compiles the HLSL code.</li>
<li><strong>UINT Flags2</strong>: A combination of <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/gg615084(v=vs.85).aspx" title="D3DCOMPILE_EFFECT Constants" target="_blank">effect compile options</a> that are combined by using a bitwise OR operation. The resulting value specifies how the compiler compiles the effect. When you compile a shader and not an effect file, <strong>D3DCompileFromFile</strong> ignores <strong>Flags2</strong> and should be set to 0.</li>
<li><strong>ID3DBlob **ppCode</strong>: A pointer to a variable that receives a pointer to the <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff728743(v=vs.85).aspx" title="ID3DBlob interface" target="_blank">ID3DBlob</a> interface that you can use to access the compiled code.</li>
<li><strong>ID3DBlob **ppErrorMsgs</strong>: An optional pointer to a variable that receives a pointer to the <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff728743(v=vs.85).aspx" title="ID3DBlob interface" target="_blank">ID3DBlob</a> interface that you can use to access compiler error messages, or <strong>NULL</strong> if there are no errors.</li>
</ul>
<p>If the shader compilation fails, (which is likely to happen if our shader contains a syntax error) <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/hh446872(v=vs.85).aspx" title="D3DCompileFromFile function" target="_blank">D3DCompileFromFile</a> returns a <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff476174(v=vs.85).aspx" title="Direct3D 11 Return Codes" target="_blank">Direct3D 11 error code</a> and we can use the error blob to determine the error that occured. The <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/aa363362(v=vs.85).aspx" title="OutputDebugString function" target="_blank">OutputDebugString</a> function can be used to send the error message directly to the Visual Studio debug log.</p>
<p>At this point we only have the shader blob but we still need to create a shader object from the binary blob object. We can use the <strong>CreateShader</strong> template function we defined earlier.</p>
<div class="notranslate">
<div><div id="highlighter_114489" class="syntaxhighlighter  cpp"><table border="0" cellpadding="0" cellspacing="0"><caption>main.cpp</caption><tbody><tr><td class="gutter"><div class="line number684 index0 alt1">684</div><div class="line number685 index1 alt2">685</div><div class="line number686 index2 alt1">686</div><div class="line number687 index3 alt2">687</div><div class="line number688 index4 alt1">688</div><div class="line number689 index5 alt2">689</div><div class="line number690 index6 alt1">690</div></td><td class="code"><div class="container"><div class="line number684 index0 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">pShader = CreateShader&lt;ShaderClass&gt;( pShaderBlob, nullptr );</code></div><div class="line number685 index1 alt2">&nbsp;</div><div class="line number686 index2 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">SafeRelease( pShaderBlob );</code></div><div class="line number687 index3 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">SafeRelease( pErrorBlob );</code></div><div class="line number688 index4 alt1">&nbsp;</div><div class="line number689 index5 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">return</code> <code class="cpp plain">pShader;</code></div><div class="line number690 index6 alt1"><code class="cpp plain">}</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>The compiled shader object is now ready for use by the rendering pipeline.</p>
<span id="DirectX_Demo_Cont8230"><h1>DirectX Demo Cont…</h1></span>
<p>Now that we have seen two simple HLSL shaders and we have compiled and loaded the shaders into shader objects let’s put them to good use in our application.</p>
<span id="Load_Demo_Content"><h2>Load Demo Content</h2></span>
<p>The <strong>LoadContent</strong> function will be used to load demo specific content. The content that should be loaded in this function would be shaders that are specific to the demo, geometry that will be rendered in the scene, and textures or any other resources that are specific to this particular demo.</p>
<span id="Vertex_Buffer"><h3>Vertex Buffer</h3></span>
<p>In the <strong>LoadContent</strong> function, we’ll create two buffers. The first buffer will contain the vertex data that defines the geometry that will be rendered on the screen. The second buffer will contain the index data that defines the order to send the vertex data to the GPU for rendering.</p>
<div class="notranslate">
<div><div id="highlighter_876938" class="syntaxhighlighter  cpp"><table border="0" cellpadding="0" cellspacing="0"><caption>main.cpp</caption><tbody><tr><td class="gutter"><div class="line number390 index0 alt1">390</div><div class="line number391 index1 alt2">391</div><div class="line number392 index2 alt1">392</div><div class="line number393 index3 alt2">393</div><div class="line number394 index4 alt1">394</div><div class="line number395 index5 alt2">395</div><div class="line number396 index6 alt1">396</div><div class="line number397 index7 alt2">397</div><div class="line number398 index8 alt1">398</div><div class="line number399 index9 alt2">399</div><div class="line number400 index10 alt1">400</div><div class="line number401 index11 alt2">401</div><div class="line number402 index12 alt1">402</div><div class="line number403 index13 alt2">403</div><div class="line number404 index14 alt1">404</div><div class="line number405 index15 alt2">405</div><div class="line number406 index16 alt1">406</div><div class="line number407 index17 alt2">407</div><div class="line number408 index18 alt1">408</div><div class="line number409 index19 alt2">409</div><div class="line number410 index20 alt1">410</div><div class="line number411 index21 alt2">411</div><div class="line number412 index22 alt1">412</div></td><td class="code"><div class="container"><div class="line number390 index0 alt1"><code class="cpp color1 bold">bool</code> <code class="cpp plain">LoadContent()</code></div><div class="line number391 index1 alt2"><code class="cpp plain">{</code></div><div class="line number392 index2 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp functions bold">assert</code><code class="cpp plain">( g_d3dDevice );</code></div><div class="line number393 index3 alt2">&nbsp;</div><div class="line number394 index4 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp comments">// Create an initialize the vertex buffer.</code></div><div class="line number395 index5 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">D3D11_BUFFER_DESC vertexBufferDesc;</code></div><div class="line number396 index6 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">ZeroMemory( &amp;vertexBufferDesc, </code><code class="cpp keyword bold">sizeof</code><code class="cpp plain">(D3D11_BUFFER_DESC) );</code></div><div class="line number397 index7 alt2">&nbsp;</div><div class="line number398 index8 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">vertexBufferDesc.BindFlags = D3D11_BIND_VERTEX_BUFFER;</code></div><div class="line number399 index9 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">vertexBufferDesc.ByteWidth = </code><code class="cpp keyword bold">sizeof</code><code class="cpp plain">( VertexPosColor ) * _countof(g_Vertices);</code></div><div class="line number400 index10 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">vertexBufferDesc.CPUAccessFlags = 0;</code></div><div class="line number401 index11 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">vertexBufferDesc.Usage = D3D11_USAGE_DEFAULT;</code></div><div class="line number402 index12 alt1">&nbsp;</div><div class="line number403 index13 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">D3D11_SUBRESOURCE_DATA resourceData;</code></div><div class="line number404 index14 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">ZeroMemory( &amp;resourceData, </code><code class="cpp keyword bold">sizeof</code><code class="cpp plain">(D3D11_SUBRESOURCE_DATA) );</code></div><div class="line number405 index15 alt2">&nbsp;</div><div class="line number406 index16 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">resourceData.pSysMem = g_Vertices;</code></div><div class="line number407 index17 alt2">&nbsp;</div><div class="line number408 index18 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp color1 bold">HRESULT</code> <code class="cpp plain">hr = g_d3dDevice-&gt;CreateBuffer( &amp;vertexBufferDesc, &amp;resourceData, &amp;g_d3dVertexBuffer );</code></div><div class="line number409 index19 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">if</code> <code class="cpp plain">( FAILED(hr) )</code></div><div class="line number410 index20 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">{</code></div><div class="line number411 index21 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">return</code> <code class="cpp keyword bold">false</code><code class="cpp plain">;</code></div><div class="line number412 index22 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">}</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>To create a buffer we need two things; a <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff476092(v=vs.85).aspx" title="D3D11_BUFFER_DESC structure" target="_blank">D3D11_BUFFER_DESC</a> structure that describes the buffer we are creating and a <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff476220(v=vs.85).aspx" title="D3D11_SUBRESOURCE_DATA structure" target="_blank">D3D11_SUBRESOURCE_DATA</a> structure that defines the data to initialize the buffer with.</p>
<p>The <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff476092(v=vs.85).aspx" title="D3D11_BUFFER_DESC structure" target="_blank">D3D11_BUFFER_DESC</a> structure has the following definition <a href="https://www.3dgep.com/introduction-to-directx-11/#D3D11_BUFFER_DESC">[45]</a>:</p>
<div class="notranslate">
<div><div id="highlighter_111275" class="syntaxhighlighter  cpp"><table border="0" cellpadding="0" cellspacing="0"><caption>D3D11_BUFFER_DESC structure</caption><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="cpp keyword bold">typedef</code> <code class="cpp keyword bold">struct</code> <code class="cpp plain">D3D11_BUFFER_DESC {</code></div><div class="line number2 index1 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp color1 bold">UINT</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="cpp plain">ByteWidth;</code></div><div class="line number3 index2 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">D3D11_USAGE Usage;</code></div><div class="line number4 index3 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp color1 bold">UINT</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="cpp plain">BindFlags;</code></div><div class="line number5 index4 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp color1 bold">UINT</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="cpp plain">CPUAccessFlags;</code></div><div class="line number6 index5 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp color1 bold">UINT</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="cpp plain">MiscFlags;</code></div><div class="line number7 index6 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp color1 bold">UINT</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="cpp plain">StructureByteStride;</code></div><div class="line number8 index7 alt1"><code class="cpp plain">} D3D11_BUFFER_DESC;</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>Where:</p>
<ul>
<li><strong>UINT ByteWidth</strong>: The size of the buffer in bytes.</li>
<li><strong>D3D11_USAGE Usage</strong>: Identify how the buffer is expected to be read from and written to. Frequency of update is a key factor. The most common value is typically <strong>D3D11_USAGE_DEFAULT</strong>; see <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff476259(v=vs.85).aspx" title="D3D11_USAGE enumeration" target="_blank">D3D11_USAGE</a> for all possible values.</li>
<li><strong>UINT BindFlags</strong>: Identify how the buffer will be bound to the pipeline (see <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff476085(v=vs.85).aspx" title="D3D11_BIND_FLAG enumeration" target="_blank">D3D11_BIND_FLAG</a>). Since this is a vertex buffer we specify the <strong>D3D11_BIND_VERTEX_BUFFER</strong> which allows this buffer to be bound as a vertex buffer to the input-assembler stage.</li>
<li><strong>UINT CPUAccessFlags</strong>: CPU access flags (see <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff476106(v=vs.85).aspx" title="D3D11_CPU_ACCESS_FLAG enumeration" target="_blank">D3D11_CPU_ACCESS_FLAG</a>) or 0 if no CPU access is necessary.</li>
<li><strong>UINT MiscFlags</strong>: Miscellaneous flags (see <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff476203(v=vs.85).aspx" title="D3D11_RESOURCE_MISC_FLAG enumeration" target="_blank">D3D11_RESOURCE_MISC_FLAG</a>) or 0 if unused.</li>
<li><strong>UINT StructureByteStride</strong>: The size of each element in the buffer structure (in bytes) when the buffer represents a structured buffer. For more info about structured buffers, see <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff476335(v=vs.85).aspx#Structured_Buffer" title="Structured Buffer" target="_blank">Structured Buffer</a>.</li>
</ul>
<p>The <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff476220(v=vs.85).aspx" title="D3D11_SUBRESOURCE_DATA structure" target="_blank">D3D11_SUBRESOURCE_DATA</a> structure is used to specify the data that is used to initialize a buffer when it is created.</p>
<p>The <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff476220(v=vs.85).aspx" title="D3D11_SUBRESOURCE_DATA structure" target="_blank">D3D11_SUBRESOURCE_DATA</a> structure has the following definition <a href="https://www.3dgep.com/introduction-to-directx-11/#D3D11_SUBRESOURCE_DATA">[46]</a>:</p>
<div class="notranslate">
<div><div id="highlighter_94098" class="syntaxhighlighter  cpp"><table border="0" cellpadding="0" cellspacing="0"><caption>D3D11_SUBRESOURCE_DATA structure</caption><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="cpp keyword bold">typedef</code> <code class="cpp keyword bold">struct</code> <code class="cpp plain">D3D11_SUBRESOURCE_DATA {</code></div><div class="line number2 index1 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp keyword bold">const</code> <code class="cpp keyword bold">void</code> <code class="cpp plain">*pSysMem;</code></div><div class="line number3 index2 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp color1 bold">UINT</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="cpp plain">SysMemPitch;</code></div><div class="line number4 index3 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp color1 bold">UINT</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="cpp plain">SysMemSlicePitch;</code></div><div class="line number5 index4 alt2"><code class="cpp plain">} D3D11_SUBRESOURCE_DATA;</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>Where:</p>
<ul>
<li><strong>const void *pSysMem</strong>: A pointer to the data to initialize the buffer with.</li>
<li><strong>UINT SysMemPitch</strong>: The distance (in bytes) from the beginning of one line of a texture to the next line. System-memory pitch is used only for 2D and 3D texture data as it is has no meaning for the other resource types.</li>
<li><strong>UINT SysMemSlicePitch</strong>: The distance (in bytes) from the beginning of one depth level to the next. System-memory-slice pitch is only used for 3D texture data as it has no meaning for the other resource types.</li>
</ul>
<p>On line 406, we set the <strong>pSysMem</strong> member of the <strong>resourceData</strong> variable to the <strong>g_Vertices</strong> array which was defined in the main preamble.</p>
<p>The <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff476501(v=vs.85).aspx" title="ID3D11Device::CreateBuffer method" target="_blank">ID3D11Device::CreateBuffer</a> method is used to create the vertex buffer which can be bound to the input-assembler stage to render the cube geometry.</p>
<p>The <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff476501(v=vs.85).aspx" title="ID3D11Device::CreateBuffer method" target="_blank">ID3D11Device::CreateBuffer</a> method has the following signature <a href="https://www.3dgep.com/introduction-to-directx-11/#CreateBuffer">[47]</a>:</p>
<div class="notranslate">
<div><div id="highlighter_94722" class="syntaxhighlighter  cpp"><table border="0" cellpadding="0" cellspacing="0"><caption>ID3D11Device::CreateBuffer method</caption><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="cpp color1 bold">HRESULT</code> <code class="cpp plain">CreateBuffer(</code></div><div class="line number2 index1 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">[in]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="cpp keyword bold">const</code> <code class="cpp plain">D3D11_BUFFER_DESC *pDesc,</code></div><div class="line number3 index2 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">[in, optional]&nbsp;&nbsp; </code><code class="cpp keyword bold">const</code> <code class="cpp plain">D3D11_SUBRESOURCE_DATA *pInitialData,</code></div><div class="line number4 index3 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">[out, optional]&nbsp; ID3D11Buffer **ppBuffer</code></div><div class="line number5 index4 alt2"><code class="cpp plain">);</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>Where:</p>
<ul>
<li><strong>const D3D11_BUFFER_DESC *pDesc</strong>: A pointer to a <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff476092(v=vs.85).aspx" title="D3D11_BUFFER_DESC structure" target="_blank">D3D11_BUFFER_DESC</a> structure that describes the buffer.</li>
<li><strong>const D3D11_SUBRESOURCE_DATA *pInitialData</strong>: A pointer to a <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff476220(v=vs.85).aspx" title="D3D11_SUBRESOURCE_DATA structure" target="_blank">D3D11_SUBRESOURCE_DATA</a> structure that describes the initialization data; use <strong>NULL</strong> to allocate space only (with the exception that it cannot be <strong>NULL</strong> if the usage flag is <strong>D3D11_USAGE_IMMUTABLE</strong>).</li>
<li><strong>ID3D11Buffer **ppBuffer</strong>: Address of a pointer to the <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff476351(v=vs.85).aspx" title="ID3D11Buffer interface" target="_blank">ID3D11Buffer</a> interface for the buffer object created.</li>
</ul>
<p>Next, we’ll create an index buffer using a similar method.</p>
<span id="Index_Buffer"><h3>Index Buffer</h3></span>
<p>Similar to the vertex buffer, we’ll use the <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff476501(v=vs.85).aspx" title="ID3D11Device::CreateBuffer method" target="_blank">ID3D11Device::CreateBuffer</a> method to create and initialize the index buffer. The only difference between the vertex buffer and the index buffer is the bind flags of the index buffer will be <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff476085(v=vs.85).aspx" title="D3D11_BIND_FLAG enumeration" target="_blank">D3D11_BIND_INDEX_BUFFER</a> and the data that is used to initialize the buffer.</p>
<div class="notranslate">
<div><div id="highlighter_229594" class="syntaxhighlighter  cpp"><table border="0" cellpadding="0" cellspacing="0"><caption>main.cpp</caption><tbody><tr><td class="gutter"><div class="line number414 index0 alt1">414</div><div class="line number415 index1 alt2">415</div><div class="line number416 index2 alt1">416</div><div class="line number417 index3 alt2">417</div><div class="line number418 index4 alt1">418</div><div class="line number419 index5 alt2">419</div><div class="line number420 index6 alt1">420</div><div class="line number421 index7 alt2">421</div><div class="line number422 index8 alt1">422</div><div class="line number423 index9 alt2">423</div><div class="line number424 index10 alt1">424</div><div class="line number425 index11 alt2">425</div><div class="line number426 index12 alt1">426</div><div class="line number427 index13 alt2">427</div><div class="line number428 index14 alt1">428</div></td><td class="code"><div class="container"><div class="line number414 index0 alt1"><code class="cpp comments">// Create and initialize the index buffer.</code></div><div class="line number415 index1 alt2"><code class="cpp plain">D3D11_BUFFER_DESC indexBufferDesc;</code></div><div class="line number416 index2 alt1"><code class="cpp plain">ZeroMemory( &amp;indexBufferDesc, </code><code class="cpp keyword bold">sizeof</code><code class="cpp plain">(D3D11_BUFFER_DESC) );</code></div><div class="line number417 index3 alt2">&nbsp;</div><div class="line number418 index4 alt1"><code class="cpp plain">indexBufferDesc.BindFlags = D3D11_BIND_INDEX_BUFFER;</code></div><div class="line number419 index5 alt2"><code class="cpp plain">indexBufferDesc.ByteWidth = </code><code class="cpp keyword bold">sizeof</code><code class="cpp plain">(</code><code class="cpp color1 bold">WORD</code><code class="cpp plain">) * _countof(g_Indicies);</code></div><div class="line number420 index6 alt1"><code class="cpp plain">indexBufferDesc.CPUAccessFlags = 0;</code></div><div class="line number421 index7 alt2"><code class="cpp plain">indexBufferDesc.Usage = D3D11_USAGE_DEFAULT;</code></div><div class="line number422 index8 alt1"><code class="cpp plain">resourceData.pSysMem = g_Indicies;</code></div><div class="line number423 index9 alt2">&nbsp;</div><div class="line number424 index10 alt1"><code class="cpp plain">hr = g_d3dDevice-&gt;CreateBuffer( &amp; indexBufferDesc, &amp;resourceData, &amp;g_d3dIndexBuffer );</code></div><div class="line number425 index11 alt2"><code class="cpp keyword bold">if</code> <code class="cpp plain">( FAILED(hr) )</code></div><div class="line number426 index12 alt1"><code class="cpp plain">{</code></div><div class="line number427 index13 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">return</code> <code class="cpp keyword bold">false</code><code class="cpp plain">;</code></div><div class="line number428 index14 alt1"><code class="cpp plain">}</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>Now we need to define the three constant buffers that will be used to store the constant uniform variables used in the vertex shader.</p>
<span id="Constant_Buffers"><h3>Constant Buffers</h3></span>
<p>Creating the constant buffers is very similar to creating the vertex and index buffers expect will will only initialize the size of the constant buffers but not the contents of the constant buffers. The contents of these constant buffers will be initialized later.</p>
<div class="notranslate">
<div><div id="highlighter_238779" class="syntaxhighlighter  cpp"><table border="0" cellpadding="0" cellspacing="0"><caption>main.cpp</caption><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="cpp comments">// Create the constant buffers for the variables defined in the vertex shader.</code></div><div class="line number2 index1 alt1"><code class="cpp plain">D3D11_BUFFER_DESC constantBufferDesc;</code></div><div class="line number3 index2 alt2"><code class="cpp plain">ZeroMemory( &amp;constantBufferDesc, </code><code class="cpp keyword bold">sizeof</code><code class="cpp plain">(D3D11_BUFFER_DESC) );</code></div><div class="line number4 index3 alt1">&nbsp;</div><div class="line number5 index4 alt2"><code class="cpp plain">constantBufferDesc.BindFlags = D3D11_BIND_CONSTANT_BUFFER;</code></div><div class="line number6 index5 alt1"><code class="cpp plain">constantBufferDesc.ByteWidth = </code><code class="cpp keyword bold">sizeof</code><code class="cpp plain">( XMMATRIX );</code></div><div class="line number7 index6 alt2"><code class="cpp plain">constantBufferDesc.CPUAccessFlags = 0;</code></div><div class="line number8 index7 alt1"><code class="cpp plain">constantBufferDesc.Usage = D3D11_USAGE_DEFAULT;</code></div><div class="line number9 index8 alt2">&nbsp;</div><div class="line number10 index9 alt1"><code class="cpp plain">hr = g_d3dDevice-&gt;CreateBuffer( &amp;constantBufferDesc, nullptr, &amp;g_d3dConstantBuffers[CB_Appliation] );</code></div><div class="line number11 index10 alt2"><code class="cpp keyword bold">if</code> <code class="cpp plain">( FAILED(hr) )</code></div><div class="line number12 index11 alt1"><code class="cpp plain">{</code></div><div class="line number13 index12 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">return</code> <code class="cpp keyword bold">false</code><code class="cpp plain">;</code></div><div class="line number14 index13 alt1"><code class="cpp plain">}</code></div><div class="line number15 index14 alt2"><code class="cpp plain">hr = g_d3dDevice-&gt;CreateBuffer( &amp;constantBufferDesc, nullptr, &amp;g_d3dConstantBuffers[CB_Frame] );</code></div><div class="line number16 index15 alt1"><code class="cpp keyword bold">if</code> <code class="cpp plain">( FAILED(hr) )</code></div><div class="line number17 index16 alt2"><code class="cpp plain">{</code></div><div class="line number18 index17 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">return</code> <code class="cpp keyword bold">false</code><code class="cpp plain">;</code></div><div class="line number19 index18 alt2"><code class="cpp plain">}</code></div><div class="line number20 index19 alt1"><code class="cpp plain">hr = g_d3dDevice-&gt;CreateBuffer( &amp;constantBufferDesc, nullptr, &amp;g_d3dConstantBuffers[CB_Object] );</code></div><div class="line number21 index20 alt2"><code class="cpp keyword bold">if</code> <code class="cpp plain">( FAILED(hr) )</code></div><div class="line number22 index21 alt1"><code class="cpp plain">{</code></div><div class="line number23 index22 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">return</code> <code class="cpp keyword bold">false</code><code class="cpp plain">;</code></div><div class="line number24 index23 alt1"><code class="cpp plain">}</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>In this case, we specify <strong>D3D11_BIND_CONSTANT_BUFFER</strong> for the bind flags of the constant buffers and we use <strong>nullptr</strong> for the <strong>D3D11_SUBRESOURCE_DATA</strong> parameter to just allocate memory for the buffer but not initialize that memory.</p>
<p>Since we will need to update the contents of the constant buffer in the application, you may be tempted to set the buffer’s <strong>Usage</strong> property to <strong>D3D11_USAGE_DYNAMIC</strong> and the <strong>CPUAccessFlags</strong> to <strong>D3D11_CPU_ACCESS_WRITE</strong>. You must resist this temptation! Later we will update the contents of this buffer using the <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff476486(v=vs.85).aspx" title="ID3D11DeviceContext::UpdateSubresource method" target="_blank">ID3D11DeviceContext::UpdateSubresource</a> method and this method expects constant buffers to be initialized with <strong>D3D11_USAGE_DEFAULT</strong> usage flag and buffers that are created with the <strong>D3D11_USAGE_DEFAULT</strong> flag must have their <strong>CPUAccessFlags</strong> set to 0.</p>
<p>Each of these three constant buffers only contains a single 4×4 matrix but a constant buffer may contain any number of matrices, vectors, or scalars. The only requirement is that the constant buffer is created the same size as the constant buffer defined in the shader in which it is used.</p>
<p>Now let’s load some shaders.</p>
<span id="Load_Shaders"><h3>Load Shaders</h3></span>
<p>As mentioned in the <a href="https://www.3dgep.com/introduction-to-directx-11/#Compiling_Shaders">Compiling Shaders</a> section, there are several ways to load the shader at runtime.</p>
<ol>
<li>Load and compile the shader at runtime.</li>
<li>Load a precompiled shader object.</li>
<li>Create a shader from a byte array.</li>
</ol>
<span id="Load_and_Compile_at_Runtime"><h4>Load and Compile at Runtime</h4></span>
<p>We can use the <a href="https://www.3dgep.com/introduction-to-directx-11/#Load_a_Shader">LoadShader</a> template function described earlier to load and compile the HLSL shaders at runtime.</p>
<div class="notranslate">
<div><div id="highlighter_885270" class="syntaxhighlighter  cpp"><table border="0" cellpadding="0" cellspacing="0"><caption>main.cpp</caption><tbody><tr><td class="gutter"><div class="line number455 index0 alt2">455</div><div class="line number456 index1 alt1">456</div><div class="line number457 index2 alt2">457</div></td><td class="code"><div class="container"><div class="line number455 index0 alt2"><code class="cpp comments">// Load the shaders</code></div><div class="line number456 index1 alt1"><code class="cpp plain">g_d3dVertexShader = LoadShader&lt;ID3D11VertexShader&gt;( L</code><code class="cpp string">"../data/shaders/SimpleVertexShader.hlsl"</code><code class="cpp plain">, </code><code class="cpp string">"SimpleVertexShader"</code><code class="cpp plain">, </code><code class="cpp string">"latest"</code> <code class="cpp plain">);</code></div><div class="line number457 index2 alt2"><code class="cpp plain">g_d3dPixelShader = LoadShader&lt;ID3D11PixelShader&gt;( L</code><code class="cpp string">"../data/shaders/SimplePixelShader.hlsl"</code><code class="cpp plain">, </code><code class="cpp string">"SimplePixelShader"</code><code class="cpp plain">, </code><code class="cpp string">"latest"</code> <code class="cpp plain">);</code></div></div></td></tr></tbody></table></div></div>
</div>
<span id="Load_a_Precompiled_Shader_Object"><h4>Load a Precompiled Shader Object</h4></span>
<p>If we want to load a precompiled shader object, we can use the <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/hh446877(v=vs.85).aspx" title="D3DReadFileToBlob function" target="_blank">D3DReadFileToBlob</a> function to load the precompiled shader directly to a <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff728743(v=vs.85).aspx" title="ID3DBlob interface" target="_blank">ID3DBlob</a> interface.</p>
<div class="notranslate">
<div><div id="highlighter_287564" class="syntaxhighlighter  cpp"><table border="0" cellpadding="0" cellspacing="0"><caption>main.cpp</caption><tbody><tr><td class="gutter"><div class="line number459 index0 alt2">459</div><div class="line number460 index1 alt1">460</div><div class="line number461 index2 alt2">461</div><div class="line number462 index3 alt1">462</div><div class="line number463 index4 alt2">463</div><div class="line number464 index5 alt1">464</div><div class="line number465 index6 alt2">465</div><div class="line number466 index7 alt1">466</div><div class="line number467 index8 alt2">467</div><div class="line number468 index9 alt1">468</div><div class="line number469 index10 alt2">469</div><div class="line number470 index11 alt1">470</div><div class="line number471 index12 alt2">471</div><div class="line number472 index13 alt1">472</div><div class="line number473 index14 alt2">473</div><div class="line number474 index15 alt1">474</div><div class="line number475 index16 alt2">475</div><div class="line number476 index17 alt1">476</div><div class="line number477 index18 alt2">477</div></td><td class="code"><div class="container"><div class="line number459 index0 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp comments">// Load the compiled vertex shader.</code></div><div class="line number460 index1 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">ID3DBlob* vertexShaderBlob;</code></div><div class="line number461 index2 alt2"><code class="cpp preprocessor">#if _DEBUG</code></div><div class="line number462 index3 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp color1 bold">LPCWSTR</code> <code class="cpp plain">compiledVertexShaderObject = L</code><code class="cpp string">"SimpleVertexShader_d.cso"</code><code class="cpp plain">;</code></div><div class="line number463 index4 alt2"><code class="cpp preprocessor">#else</code></div><div class="line number464 index5 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp color1 bold">LPCWSTR</code> <code class="cpp plain">compiledVertexShaderObject = L</code><code class="cpp string">"SimpleVertexShader.cso"</code><code class="cpp plain">;</code></div><div class="line number465 index6 alt2"><code class="cpp preprocessor">#endif</code></div><div class="line number466 index7 alt1">&nbsp;</div><div class="line number467 index8 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">hr = D3DReadFileToBlob( compiledVertexShaderObject, &amp;vertexShaderBlob );</code></div><div class="line number468 index9 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">if</code> <code class="cpp plain">( FAILED(hr) )</code></div><div class="line number469 index10 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">{</code></div><div class="line number470 index11 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">return</code> <code class="cpp keyword bold">false</code><code class="cpp plain">;</code></div><div class="line number471 index12 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number472 index13 alt1">&nbsp;</div><div class="line number473 index14 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">hr = g_d3dDevice-&gt;CreateVertexShader( vertexShaderBlob-&gt;GetBufferPointer(), vertexShaderBlob-&gt;GetBufferSize(), nullptr, &amp;g_d3dVertexShader );</code></div><div class="line number474 index15 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">if</code> <code class="cpp plain">( FAILED( hr ) )</code></div><div class="line number475 index16 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">{</code></div><div class="line number476 index17 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">return</code> <code class="cpp keyword bold">false</code><code class="cpp plain">;</code></div><div class="line number477 index18 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">}</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>How to create the compiled shader object (.cso) was explained in the <a href="https://www.3dgep.com/introduction-to-directx-11/#Precompiled_Shaders">Precompiled Shaders</a> section of this article.</p>
<span id="Load_from_Byte_Array"><h4>Load from Byte Array</h4></span>
<p>And the final method which is probably the easiest and most portable way to load a precompiled shader is to load the shader from a byte array. The FXC.exe compiler can write the definition of the byte array to a header file which can be included in the application and use the byte array to create the shader. Suppose we configured the shader compiler to output the byte array for the vertex shader into a global variable named <strong>g_SimpleVertexShader</strong> and the byte array for the pixel shader into a global variable named <strong>g_SimplePixelShader</strong> then we could load the shaders in this way:</p>
<div class="notranslate">
<div><div id="highlighter_365969" class="syntaxhighlighter  cpp"><table border="0" cellpadding="0" cellspacing="0"><caption>main.cpp</caption><tbody><tr><td class="gutter"><div class="line number482 index0 alt1">482</div><div class="line number483 index1 alt2">483</div><div class="line number484 index2 alt1">484</div><div class="line number485 index3 alt2">485</div><div class="line number486 index4 alt1">486</div><div class="line number487 index5 alt2">487</div><div class="line number488 index6 alt1">488</div><div class="line number489 index7 alt2">489</div><div class="line number490 index8 alt1">490</div><div class="line number491 index9 alt2">491</div><div class="line number492 index10 alt1">492</div></td><td class="code"><div class="container"><div class="line number482 index0 alt1"><code class="cpp plain">hr = g_d3dDevice-&gt;CreateVertexShader( g_SimpleVertexShader, </code><code class="cpp keyword bold">sizeof</code><code class="cpp plain">(g_SimpleVertexShader), nullptr, &amp;g_d3dVertexShader );</code></div><div class="line number483 index1 alt2"><code class="cpp keyword bold">if</code> <code class="cpp plain">( FAILED( hr ) )</code></div><div class="line number484 index2 alt1"><code class="cpp plain">{</code></div><div class="line number485 index3 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">return</code> <code class="cpp keyword bold">false</code><code class="cpp plain">;</code></div><div class="line number486 index4 alt1"><code class="cpp plain">}</code></div><div class="line number487 index5 alt2">&nbsp;</div><div class="line number488 index6 alt1"><code class="cpp plain">hr = g_d3dDevice-&gt;CreatePixelShader( g_SimplePixelShader, </code><code class="cpp keyword bold">sizeof</code><code class="cpp plain">(g_SimplePixelShader), nullptr, &amp;g_d3dPixelShader );</code></div><div class="line number489 index7 alt2"><code class="cpp keyword bold">if</code> <code class="cpp plain">( FAILED( hr ) )</code></div><div class="line number490 index8 alt1"><code class="cpp plain">{</code></div><div class="line number491 index9 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">return</code> <code class="cpp keyword bold">false</code><code class="cpp plain">;</code></div><div class="line number492 index10 alt1"><code class="cpp plain">}</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>Now that we have seen multiple methods for loading a shader, we need to define an <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff476575(v=vs.85).aspx" title="ID3D11InputLayout interface" target="_blank">ID3D11InputLayout</a> interface object which maps the vertex buffer elements to the varying vertex attributes in the vertex shader.</p>
<span id="Input_Layout"><h3>Input Layout</h3></span>
<p>The <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff476575(v=vs.85).aspx" title="ID3D11InputLayout interface" target="_blank">ID3D11InputLayout</a> interface is used to define how the vertex data attached to the input-assembler stage is layed out in memory. An instance of the <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff476575(v=vs.85).aspx" title="ID3D11InputLayout interface" target="_blank">ID3D11InputLayout</a> interface object is created using the <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff476512(v=vs.85).aspx" title="ID3D11Device::CreateInputLayout method" target="_blank">ID3D11Device::CreateInputLayout</a> method. This method has the following signature <a href="https://www.3dgep.com/introduction-to-directx-11/#CreateInputLayout">[48]</a>:</p>
<div class="notranslate">
<div><div id="highlighter_326136" class="syntaxhighlighter  cpp"><table border="0" cellpadding="0" cellspacing="0"><caption>ID3D11Device::CreateInputLayout method</caption><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="cpp color1 bold">HRESULT</code> <code class="cpp plain">CreateInputLayout(</code></div><div class="line number2 index1 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">[in]&nbsp;&nbsp; </code><code class="cpp keyword bold">const</code> <code class="cpp plain">D3D11_INPUT_ELEMENT_DESC *pInputElementDescs,</code></div><div class="line number3 index2 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">[in]&nbsp;&nbsp; </code><code class="cpp color1 bold">UINT</code> <code class="cpp plain">NumElements,</code></div><div class="line number4 index3 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">[in]&nbsp;&nbsp; </code><code class="cpp keyword bold">const</code> <code class="cpp keyword bold">void</code> <code class="cpp plain">*pShaderBytecodeWithInputSignature,</code></div><div class="line number5 index4 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">[in]&nbsp;&nbsp; </code><code class="cpp color1 bold">SIZE_T</code> <code class="cpp plain">BytecodeLength,</code></div><div class="line number6 index5 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">[out]&nbsp; ID3D11InputLayout **ppInputLayout</code></div><div class="line number7 index6 alt2"><code class="cpp plain">);</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>Where:</p>
<ul>
<li><strong>const D3D11_INPUT_ELEMENT_DESC *pInputElementDescs</strong>: An array of the input-assembler stage input data types; each type is described by an element description (see <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff476180(v=vs.85).aspx" title="D3D11_INPUT_ELEMENT_DESC structure" target="_blank">D3D11_INPUT_ELEMENT_DESC</a>). This structure will be described in the next section.</li>
<li><strong>UINT NumElements</strong>: The number of input elements in the <strong>pInputElementDescs</strong> array.</li>
<li><strong>const void *pShaderBytecodeWithInputSignature</strong>: A pointer to the compiled shader. The compiled shader code contains a input signature which is validated against the array of elements.</li>
<li><strong>SIZE_T BytecodeLength</strong>: The size in bytes of the <strong>pShaderBytecodeWithInputSignature</strong> array.</li>
<li><strong>ID3D11InputLayout **ppInputLayout</strong>: A pointer to the input-layout object created (see <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff476575(v=vs.85).aspx" title="ID3D11InputLayout interface" target="_blank">ID3D11InputLayout</a>).</li>
</ul>
<p>The input-layout is created from an array of <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff476180(v=vs.85).aspx" title="D3D11_INPUT_ELEMENT_DESC structure" target="_blank">D3D11_INPUT_ELEMENT_DESC</a> structures. Each element in the array describes a single element of the vertex buffer that is bound to the input-assembler stage.</p>
<p>The <strong>D3D11_INPUT_ELEMENT_DESC</strong> structure has the following definition <a href="https://www.3dgep.com/introduction-to-directx-11/#D3D11_INPUT_ELEMENT_DESC">[49]</a>:</p>
<div class="notranslate">
<div><div id="highlighter_792515" class="syntaxhighlighter  cpp"><table border="0" cellpadding="0" cellspacing="0"><caption>D3D11_INPUT_ELEMENT_DESC structure</caption><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="cpp keyword bold">typedef</code> <code class="cpp keyword bold">struct</code> <code class="cpp plain">D3D11_INPUT_ELEMENT_DESC {</code></div><div class="line number2 index1 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp color1 bold">LPCSTR</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="cpp plain">SemanticName;</code></div><div class="line number3 index2 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp color1 bold">UINT</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="cpp plain">SemanticIndex;</code></div><div class="line number4 index3 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">DXGI_FORMAT&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Format;</code></div><div class="line number5 index4 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp color1 bold">UINT</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="cpp plain">InputSlot;</code></div><div class="line number6 index5 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp color1 bold">UINT</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="cpp plain">AlignedByteOffset;</code></div><div class="line number7 index6 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">D3D11_INPUT_CLASSIFICATION InputSlotClass;</code></div><div class="line number8 index7 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp color1 bold">UINT</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="cpp plain">InstanceDataStepRate;</code></div><div class="line number9 index8 alt2"><code class="cpp plain">} D3D11_INPUT_ELEMENT_DESC;</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>Where: </p>
<ul>
<li><strong>LPCSTR SemanticName</strong>: The HLSL semantic associated with this element in a shader input-signature.</li>
<li><strong>UINT SemanticIndex</strong>: The semantic index for the element. A semantic index modifies a semantic, with an integer index number. A semantic index is only needed in a case where there is more than one element with the same semantic.</li>
<li><strong>DXGI_FORMAT Format</strong>: The data type of the element data. See <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/bb173059(v=vs.85).aspx" title="DXGI_FORMAT enumeration" target="_blank">DXGI_FORMAT</a>. For example, if the element describes a 4-component floating point vector, the <strong>Format</strong> flag would be set to <strong>DXGI_FORMAT_R32G32B32A32_FLOAT</strong>.</li>
<li><strong>UINT InputSlot</strong>: If using a single vertex buffer with interleaved vertex attributes then the input slot should always be 0. If using several packed vertex buffers where each vertex buffer contains the vertex data for a single vertex attribute, then the input slot is the index of the vertex buffer that is attached to the input assembler stage.</li>
<li><strong>UINT AlignedByteOffset</strong>: Offset (in bytes) between each element. Use <strong>D3D11_APPEND_ALIGNED_ELEMENT</strong> for convenience to define the current element directly after the previous one, including any packing if necessary.</li>
<li><strong>D3D11_INPUT_CLASSIFICATION InputSlotClass</strong>: Identifies the input data class for a single input slot. This member can have one of the following values <a href="https://www.3dgep.com/introduction-to-directx-11/#D3D11_INPUT_CLASSIFICATION">[50]</a>:
<ul>
<li><strong>D3D11_INPUT_PER_VERTEX_DATA</strong>: Input data is per-vertex data.</li>
<li><strong>D3D11_INPUT_PER_INSTANCE_DATA</strong>: Input data is per-instance data.</li>
</ul>
</li><li><strong>UINT InstanceDataStepRate</strong>: The number of instances to draw using the same per-instance data before advancing in the buffer by one element. This value must be 0 for an element that contains per-vertex data (the slot class is set to <strong>D3D11_INPUT_PER_VERTEX_DATA</strong>).</li>
</ul>
<p>Armed with this information, we can define the <strong>D3D11_INPUT_ELEMENT_DESC</strong> array that defines the layout of our vertex data and create the <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff476575(v=vs.85).aspx" title="ID3D11InputLayout interface" target="_blank">ID3D11InputLayout</a> object.</p>
<div class="notranslate">
<div><div id="highlighter_147284" class="syntaxhighlighter  cpp"><table border="0" cellpadding="0" cellspacing="0"><caption>main.cpp</caption><tbody><tr><td class="gutter"><div class="line number482 index0 alt1">482</div><div class="line number483 index1 alt2">483</div><div class="line number484 index2 alt1">484</div><div class="line number485 index3 alt2">485</div><div class="line number486 index4 alt1">486</div><div class="line number487 index5 alt2">487</div><div class="line number488 index6 alt1">488</div><div class="line number489 index7 alt2">489</div><div class="line number490 index8 alt1">490</div><div class="line number491 index9 alt2">491</div><div class="line number492 index10 alt1">492</div><div class="line number493 index11 alt2">493</div><div class="line number494 index12 alt1">494</div><div class="line number495 index13 alt2">495</div></td><td class="code"><div class="container"><div class="line number482 index0 alt1"><code class="cpp comments">// Create the input layout for the vertex shader.</code></div><div class="line number483 index1 alt2"><code class="cpp plain">D3D11_INPUT_ELEMENT_DESC vertexLayoutDesc[] = </code></div><div class="line number484 index2 alt1"><code class="cpp plain">{</code></div><div class="line number485 index3 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">{ </code><code class="cpp string">"POSITION"</code><code class="cpp plain">, 0, DXGI_FORMAT_R32G32B32_FLOAT, 0, offsetof(VertexPosColor,Position), D3D11_INPUT_PER_VERTEX_DATA, 0 },</code></div><div class="line number486 index4 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">{ </code><code class="cpp string">"COLOR"</code><code class="cpp plain">, 0, DXGI_FORMAT_R32G32B32_FLOAT, 0, offsetof(VertexPosColor,Color), D3D11_INPUT_PER_VERTEX_DATA, 0 }</code></div><div class="line number487 index5 alt2"><code class="cpp plain">};</code></div><div class="line number488 index6 alt1">&nbsp;</div><div class="line number489 index7 alt2"><code class="cpp plain">hr = g_d3dDevice-&gt;CreateInputLayout( vertexLayoutDesc, _countof(vertexLayoutDesc), vertexShaderBlob-&gt;GetBufferPointer(), vertexShaderBlob-&gt;GetBufferSize(), &amp;g_d3dInputLayout );</code></div><div class="line number490 index8 alt1"><code class="cpp keyword bold">if</code> <code class="cpp plain">( FAILED(hr) )</code></div><div class="line number491 index9 alt2"><code class="cpp plain">{</code></div><div class="line number492 index10 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">return</code> <code class="cpp keyword bold">false</code><code class="cpp plain">;</code></div><div class="line number493 index11 alt2"><code class="cpp plain">}</code></div><div class="line number494 index12 alt1">&nbsp;</div><div class="line number495 index13 alt2"><code class="cpp plain">SafeRelease( vertexShaderBlob );</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>The vertex buffer for our cube geometry contains two attributes; the vertex position and the vertex color. Both the vertex position and the vertex color are passed to the vertex shader as a 3-component 32-bit floating-point vector. Since both attributes are stored interleaved in a single vertex buffer (instead of storing each attribute packed in separate vertex buffers) they both use the first (0) input slot. Since both of these attributes describe per-vertex (as apposed to per-instance) attributes, they use the <strong>D3D11_INPUT_PER_VERTEX_DATA</strong> input classification.</p>
<p>On line 489, the input layout object is created using the layout description.</p>
<p>With the input layout object created, we no longer need the shader blob so on line 495, the shader blob is released.</p>
<span id="Load_Pixel_Shader"><h3>Load Pixel Shader</h3></span>
<p>The pixel shader is loaded in a similar way to the vertex shader but there is no need to define the input layout for the pixel shader. The pixel shader is loaded from a precompiled shader object.</p>
<div class="notranslate">
<div><div id="highlighter_289167" class="syntaxhighlighter  cpp"><table border="0" cellpadding="0" cellspacing="0"><caption>main.cpp</caption><tbody><tr><td class="gutter"><div class="line number497 index0 alt2">497</div><div class="line number498 index1 alt1">498</div><div class="line number499 index2 alt2">499</div><div class="line number500 index3 alt1">500</div><div class="line number501 index4 alt2">501</div><div class="line number502 index5 alt1">502</div><div class="line number503 index6 alt2">503</div><div class="line number504 index7 alt1">504</div><div class="line number505 index8 alt2">505</div><div class="line number506 index9 alt1">506</div><div class="line number507 index10 alt2">507</div><div class="line number508 index11 alt1">508</div><div class="line number509 index12 alt2">509</div><div class="line number510 index13 alt1">510</div><div class="line number511 index14 alt2">511</div><div class="line number512 index15 alt1">512</div><div class="line number513 index16 alt2">513</div><div class="line number514 index17 alt1">514</div><div class="line number515 index18 alt2">515</div><div class="line number516 index19 alt1">516</div><div class="line number517 index20 alt2">517</div></td><td class="code"><div class="container"><div class="line number497 index0 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp comments">// Load the compiled pixel shader.</code></div><div class="line number498 index1 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">ID3DBlob* pixelShaderBlob;</code></div><div class="line number499 index2 alt2"><code class="cpp preprocessor">#if _DEBUG</code></div><div class="line number500 index3 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp color1 bold">LPCWSTR</code> <code class="cpp plain">compiledPixelShaderObject = L</code><code class="cpp string">"SimplePixelShader_d.cso"</code><code class="cpp plain">;</code></div><div class="line number501 index4 alt2"><code class="cpp preprocessor">#else</code></div><div class="line number502 index5 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp color1 bold">LPCWSTR</code> <code class="cpp plain">compiledPixelShaderObject = L</code><code class="cpp string">"SimplePixelShader.cso"</code><code class="cpp plain">;</code></div><div class="line number503 index6 alt2"><code class="cpp preprocessor">#endif</code></div><div class="line number504 index7 alt1">&nbsp;</div><div class="line number505 index8 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">hr = D3DReadFileToBlob( compiledPixelShaderObject, &amp;pixelShaderBlob );</code></div><div class="line number506 index9 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">if</code> <code class="cpp plain">( FAILED(hr) )</code></div><div class="line number507 index10 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">{</code></div><div class="line number508 index11 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">return</code> <code class="cpp keyword bold">false</code><code class="cpp plain">;</code></div><div class="line number509 index12 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number510 index13 alt1">&nbsp;</div><div class="line number511 index14 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">hr = g_d3dDevice-&gt;CreatePixelShader( pixelShaderBlob-&gt;GetBufferPointer(), pixelShaderBlob-&gt;GetBufferSize(), nullptr, &amp;g_d3dPixelShader );</code></div><div class="line number512 index15 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">if</code> <code class="cpp plain">( FAILED( hr ) )</code></div><div class="line number513 index16 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">{</code></div><div class="line number514 index17 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">return</code> <code class="cpp keyword bold">false</code><code class="cpp plain">;</code></div><div class="line number515 index18 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number516 index19 alt1">&nbsp;</div><div class="line number517 index20 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">SafeRelease( pixelShaderBlob );</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>This code snippet is very similar to the vertex shader loading so it will not be explained in detail.</p>
<span id="Projection_Matrix"><h3>Projection Matrix</h3></span>
<p>One final thing we can do in the <strong>LoadContent</strong> method for this demo is setup the projection matrix and update the constant buffer that stores the value of the projection matrix in the shader.</p>
<div class="notranslate">
<div><div id="highlighter_846568" class="syntaxhighlighter  cpp"><table border="0" cellpadding="0" cellspacing="0"><caption>main.cpp</caption><tbody><tr><td class="gutter"><div class="line number519 index0 alt2">519</div><div class="line number520 index1 alt1">520</div><div class="line number521 index2 alt2">521</div><div class="line number522 index3 alt1">522</div><div class="line number523 index4 alt2">523</div><div class="line number524 index5 alt1">524</div><div class="line number525 index6 alt2">525</div><div class="line number526 index7 alt1">526</div><div class="line number527 index8 alt2">527</div><div class="line number528 index9 alt1">528</div><div class="line number529 index10 alt2">529</div><div class="line number530 index11 alt1">530</div><div class="line number531 index12 alt2">531</div><div class="line number532 index13 alt1">532</div><div class="line number533 index14 alt2">533</div></td><td class="code"><div class="container"><div class="line number519 index0 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp comments">// Setup the projection matrix.</code></div><div class="line number520 index1 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">RECT clientRect;</code></div><div class="line number521 index2 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">GetClientRect( g_WindowHandle, &amp;clientRect );</code></div><div class="line number522 index3 alt1">&nbsp;</div><div class="line number523 index4 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp comments">// Compute the exact client dimensions.</code></div><div class="line number524 index5 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp comments">// This is required for a correct projection matrix.</code></div><div class="line number525 index6 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp color1 bold">float</code> <code class="cpp plain">clientWidth = </code><code class="cpp keyword bold">static_cast</code><code class="cpp plain">&lt;</code><code class="cpp color1 bold">float</code><code class="cpp plain">&gt;( clientRect.right - clientRect.left );</code></div><div class="line number526 index7 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp color1 bold">float</code> <code class="cpp plain">clientHeight = </code><code class="cpp keyword bold">static_cast</code><code class="cpp plain">&lt;</code><code class="cpp color1 bold">float</code><code class="cpp plain">&gt;( clientRect.bottom - clientRect.top );</code></div><div class="line number527 index8 alt2">&nbsp;</div><div class="line number528 index9 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">g_ProjectionMatrix = XMMatrixPerspectiveFovLH( XMConvertToRadians(45.0f), clientWidth/clientHeight, 0.1f, 100.0f );</code></div><div class="line number529 index10 alt2">&nbsp;</div><div class="line number530 index11 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">g_d3dDeviceContext-&gt;UpdateSubresource( g_d3dConstantBuffers[CB_Appliation], 0, nullptr, &amp;g_ProjectionMatrix, 0, 0 );</code></div><div class="line number531 index12 alt2">&nbsp;</div><div class="line number532 index13 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">return</code> <code class="cpp keyword bold">true</code><code class="cpp plain">;</code></div><div class="line number533 index14 alt2"><code class="cpp plain">}</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>On line 528, the projection matrix is computed from the <a href="http://msdn.microsoft.com/en-us/library/microsoft.directx_sdk.matrix.xmmatrixperspectivefovlh(v=vs.85).aspx" title="XMMatrixPerspectiveFovLH method" target="_blank">XMMatrixPerspectiveFovLH</a> function and on line 530 the contents of the projection matrix are copied into the per-appliction constant buffer using the <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff476486(v=vs.85).aspx" title="ID3D11DeviceContext::UpdateSubresource method" target="_blank">ID3D11DeviceContext::UpdateSubresource</a> method. </p>
<p>The <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff476486(v=vs.85).aspx" title="ID3D11DeviceContext::UpdateSubresource method" target="_blank">ID3D11DeviceContext::UpdateSubresource</a> method has the following signature <a href="https://www.3dgep.com/introduction-to-directx-11/#UpdateSubresource">[51]</a>:</p>
<div class="notranslate">
<div><div id="highlighter_897049" class="syntaxhighlighter  cpp"><table border="0" cellpadding="0" cellspacing="0"><caption>ID3D11DeviceContext::UpdateSubresource method</caption><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="cpp keyword bold">void</code> <code class="cpp plain">UpdateSubresource(</code></div><div class="line number2 index1 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">[in]&nbsp; ID3D11Resource *pDstResource,</code></div><div class="line number3 index2 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">[in]&nbsp; </code><code class="cpp color1 bold">UINT</code> <code class="cpp plain">DstSubresource,</code></div><div class="line number4 index3 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">[in]&nbsp; </code><code class="cpp keyword bold">const</code> <code class="cpp plain">D3D11_BOX *pDstBox,</code></div><div class="line number5 index4 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">[in]&nbsp; </code><code class="cpp keyword bold">const</code> <code class="cpp keyword bold">void</code> <code class="cpp plain">*pSrcData,</code></div><div class="line number6 index5 alt1"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">[in]&nbsp; </code><code class="cpp color1 bold">UINT</code> <code class="cpp plain">SrcRowPitch,</code></div><div class="line number7 index6 alt2"><code class="cpp spaces">&nbsp;&nbsp;</code><code class="cpp plain">[in]&nbsp; </code><code class="cpp color1 bold">UINT</code> <code class="cpp plain">SrcDepthPitch</code></div><div class="line number8 index7 alt1"><code class="cpp plain">);</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>Where:</p>
<ul>
<li><strong>ID3D11Resource *pDstResource</strong>: A pointer to the destination resource (see <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff476584(v=vs.85).aspx" title="ID3D11Resource interface" target="_blank">ID3D11Resource</a>).</li>
<li><strong>UINT DstSubresource</strong>: A zero-based index, that identifies the destination subresource. See <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff476081(v=vs.85).aspx" title="D3D11CalcSubresource function" target="_blank">D3D11CalcSubresource</a> for more details.</li>
<li><strong>const D3D11_BOX *pDstBox</strong>: A pointer to a box that defines the portion of the destination subresource to copy the resource data into. Coordinates are in bytes for buffers and in texels for textures. If NULL, the data is written to the destination subresource with no offset. The dimensions of the source must fit the destination (see <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff476089(v=vs.85).aspx" title="D3D11_BOX structure" target="_blank">D3D11_BOX</a>).</li>
<li><strong>const void *pSrcData</strong>: A pointer to the source data in memory.</li>
<li><strong>UINT SrcRowPitch</strong>: The size of one row of the source data.</li>
<li><strong>UINT SrcDepthPitch</strong>: The size of one depth slice of source data.</li>
</ul>
<p>For a shader-constant buffer; set <strong>pDstBox</strong> to <strong>NULL</strong>. It is not possible to use this method to partially update a shader-constant buffer <a href="https://www.3dgep.com/introduction-to-directx-11/#UpdateSubresource">[51]</a>.</p>
<p>Now that we have loaded the content that will be used by our demo, let’s implement the update and render functions so that we can see something interesting on the screen.</p>
<span id="The_Update_Function"><h2>The Update Function</h2></span>
<p>First we’ll implement the update function. This function doesn’t do much except setup the camera’s view matrix and create a rotation matrix for our cube.</p>
<div class="notranslate">
<div><div id="highlighter_761649" class="syntaxhighlighter  cpp"><table border="0" cellpadding="0" cellspacing="0"><caption>main.cpp</caption><tbody><tr><td class="gutter"><div class="line number805 index0 alt2">805</div><div class="line number806 index1 alt1">806</div><div class="line number807 index2 alt2">807</div><div class="line number808 index3 alt1">808</div><div class="line number809 index4 alt2">809</div><div class="line number810 index5 alt1">810</div><div class="line number811 index6 alt2">811</div><div class="line number812 index7 alt1">812</div><div class="line number813 index8 alt2">813</div><div class="line number814 index9 alt1">814</div><div class="line number815 index10 alt2">815</div><div class="line number816 index11 alt1">816</div><div class="line number817 index12 alt2">817</div><div class="line number818 index13 alt1">818</div><div class="line number819 index14 alt2">819</div><div class="line number820 index15 alt1">820</div></td><td class="code"><div class="container"><div class="line number805 index0 alt2"><code class="cpp keyword bold">void</code> <code class="cpp plain">Update(&nbsp; </code><code class="cpp color1 bold">float</code> <code class="cpp plain">deltaTime )</code></div><div class="line number806 index1 alt1"><code class="cpp plain">{</code></div><div class="line number807 index2 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">XMVECTOR eyePosition = XMVectorSet( 0, 0, -10, 1 );</code></div><div class="line number808 index3 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">XMVECTOR focusPoint = XMVectorSet( 0, 0, 0, 1 );</code></div><div class="line number809 index4 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">XMVECTOR upDirection = XMVectorSet( 0, 1, 0, 0 );</code></div><div class="line number810 index5 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">g_ViewMatrix = XMMatrixLookAtLH( eyePosition, focusPoint, upDirection );</code></div><div class="line number811 index6 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">g_d3dDeviceContext-&gt;UpdateSubresource( g_d3dConstantBuffers[CB_Frame], 0, nullptr, &amp;g_ViewMatrix, 0, 0 );</code></div><div class="line number812 index7 alt1">&nbsp;</div><div class="line number813 index8 alt2">&nbsp;</div><div class="line number814 index9 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">static</code> <code class="cpp color1 bold">float</code> <code class="cpp plain">angle = 0.0f;</code></div><div class="line number815 index10 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">angle += 90.0f * deltaTime;</code></div><div class="line number816 index11 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">XMVECTOR rotationAxis = XMVectorSet( 0, 1, 1, 0 );</code></div><div class="line number817 index12 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number818 index13 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">g_WorldMatrix = XMMatrixRotationAxis( rotationAxis, XMConvertToRadians(angle) );</code></div><div class="line number819 index14 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">g_d3dDeviceContext-&gt;UpdateSubresource( g_d3dConstantBuffers[CB_Object], 0, nullptr, &amp;g_WorldMatrix, 0, 0 );</code></div><div class="line number820 index15 alt1"><code class="cpp plain">}</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>On lines 807-810 we setup the view matrix by placing the camera 10 units back looking towards the origin.<br>
On line 810, the constant buffer which is used to store the view matrix is updated using the same method used to update the projection matrix.</p>
<p>On line 814-818 we create a rotation matrix that is used to rotate the cube and on line 819 the constant buffer that stores the object’s world matrix is updated using the same method that was used to update the view matrix and the projection matrix.</p>
<p>Before we can render we will define two helper functions. The first will clear the render target, and the depth and stencil buffers and the second will be used to present the contents of the swap chain’s back buffer to the screen.</p>
<span id="Clear"><h2>Clear</h2></span>
<p>Before we can start rendering a new frame, we must clear the old contents of the back buffer and the depth/stencil buffers.</p>
<div class="notranslate">
<div><div id="highlighter_346893" class="syntaxhighlighter  cpp"><table border="0" cellpadding="0" cellspacing="0"><caption>main.cpp</caption><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="cpp comments">// Clear the color and depth buffers.</code></div><div class="line number2 index1 alt1"><code class="cpp keyword bold">void</code> <code class="cpp plain">Clear( </code><code class="cpp keyword bold">const</code> <code class="cpp color1 bold">FLOAT</code> <code class="cpp plain">clearColor[4], </code><code class="cpp color1 bold">FLOAT</code> <code class="cpp plain">clearDepth, UINT8 clearStencil )</code></div><div class="line number3 index2 alt2"><code class="cpp plain">{</code></div><div class="line number4 index3 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">g_d3dDeviceContext-&gt;ClearRenderTargetView( g_d3dRenderTargetView, clearColor );</code></div><div class="line number5 index4 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">g_d3dDeviceContext-&gt;ClearDepthStencilView( g_d3dDepthStencilView, D3D11_CLEAR_DEPTH|D3D11_CLEAR_STENCIL, clearDepth, clearStencil );</code></div><div class="line number6 index5 alt1"><code class="cpp plain">}</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>The <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff476388(v=vs.85).aspx" title="ID3D11DeviceContext::ClearRenderTargetView method" target="_blank">ID3D11DeviceContext::ClearRenderTargetView</a> method is used to clear the back buffer to a particlular color and the <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff476387(v=vs.85).aspx" title="ID3D11DeviceContext::ClearDepthStencilView method" target="_blank">ID3D11DeviceContext::ClearDepthStencilView</a> method is used to clear the depth and stencil buffer to a particular depth value and stencil value.</p>
<p>The back buffer of the swap chain and the depth/stencil buffer must be accessed using their views.</p>
<p>After everything has finished rendering, we must tell the swap chain to present the contents of the back buffer to the screen. For this we will create a <strong>Present</strong> helper function.</p>
<span id="Present"><h2>Present</h2></span>
<p>The <strong>Present</strong> function is called at the end of the drawing code and finalizes the frame.</p>
<div class="notranslate">
<div><div id="highlighter_857889" class="syntaxhighlighter  cpp"><table border="0" cellpadding="0" cellspacing="0"><caption>main.cpp</caption><tbody><tr><td class="gutter"><div class="line number829 index0 alt2">829</div><div class="line number830 index1 alt1">830</div><div class="line number831 index2 alt2">831</div><div class="line number832 index3 alt1">832</div><div class="line number833 index4 alt2">833</div><div class="line number834 index5 alt1">834</div><div class="line number835 index6 alt2">835</div><div class="line number836 index7 alt1">836</div><div class="line number837 index8 alt2">837</div><div class="line number838 index9 alt1">838</div><div class="line number839 index10 alt2">839</div></td><td class="code"><div class="container"><div class="line number829 index0 alt2"><code class="cpp keyword bold">void</code> <code class="cpp plain">Present( </code><code class="cpp color1 bold">bool</code> <code class="cpp plain">vSync )</code></div><div class="line number830 index1 alt1"><code class="cpp plain">{</code></div><div class="line number831 index2 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">if</code> <code class="cpp plain">( vSync )</code></div><div class="line number832 index3 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">{</code></div><div class="line number833 index4 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">g_d3dSwapChain-&gt;Present( 1, 0 );</code></div><div class="line number834 index5 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number835 index6 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">else</code></div><div class="line number836 index7 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">{</code></div><div class="line number837 index8 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">g_d3dSwapChain-&gt;Present( 0, 0 );</code></div><div class="line number838 index9 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number839 index10 alt2"><code class="cpp plain">}</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>The <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/bb174576(v=vs.85).aspx" title="IDXGISwapChain::Present method" target="_blank">IDXGISwapChain::Present</a> method is used to flip the back buffer to the front for display in the application window. The <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/bb174576(v=vs.85).aspx" title="IDXGISwapChain::Present method" target="_blank">IDXGISwapChain::Present</a> method takes two parameters <a href="https://www.3dgep.com/introduction-to-directx-11/#Present">[55]</a>:</p>
<ul>
<li><strong>UINT SyncInterval</strong>: An integer that specifies how to synchronize presentation of a frame with the vertical blank. For the bit-block transfer (bitblt) model (<a href="http://msdn.microsoft.com/en-us/library/windows/desktop/bb173077(v=vs.85).aspx#DXGI_SWAP_EFFECT_DISCARD" title="DXGI_SWAP_EFFECT enumeration" target="_blank">DXGI_SWAP_EFFECT_DISCARD</a> or <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/bb173077(v=vs.85).aspx#DXGI_SWAP_EFFECT_SEQUENTIAL" title="DXGI_SWAP_EFFECT enumeration" target="_blank">DXGI_SWAP_EFFECT_SEQUENTIAL</a>), values are:
<ul>
<li><strong>0</strong>: The presentation occurs immediately, there is no synchronization.</li>
<li><strong>1,2,3,4</strong>: Synchronize presentation after the <strong>nth</strong> vertical blank.</li>
</ul>
<p>For the flip model (<a href="http://msdn.microsoft.com/en-us/library/windows/desktop/bb173077(v=vs.85).aspx#DXGI_SWAP_EFFECT_FLIP_SEQUENTIAL" title="DXGI_SWAP_EFFECT enumeration" target="_blank">DXGI_SWAP_EFFECT_FLIP_SEQUENTIAL</a>), values are:</p>
<ul>
<li><strong>0</strong>: Cancel the remaining time on the previously presented frame and discard this frame if a newer frame is queued.</li>
<li><strong>n &gt; 0</strong>: Synchronize presentation for at least <strong>n</strong> vertical blanks.</li>
</ul>
</li>
<li><strong>UINT Flags</strong>: An integer value that contains swap-chain presentation options. These options are defined by the <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/bb509554(v=vs.85).aspx" title="DXGI_PRESENT constants" target="_blank">DXGI_PRESENT</a> constants.</li>
</ul>
<p>If vertical-sync is enabled, then the presentation of the back buffer will wait until the next vertical blank for the screen. If the vertical sync is not enabled, then the contents of the back buffer will be displayed immediately without synchronization.</p>
<p>And finally everything is in place for rendering the geometry to the screen.</p>
<span id="Render"><h2>Render</h2></span>
<p>In the render function, we’ll first clear the back buffer and the depth/stencil buffers. Then we’ll initialize each stage of the rendering pipeline and finally we’ll draw the geometry.</p>
<span id="Clear_the_Screen"><h3>Clear the Screen</h3></span>
<p>The first step of our render function (after checking our preconditions) is to clear the screen.</p>
<div class="notranslate">
<div><div id="highlighter_358320" class="syntaxhighlighter  cpp"><table border="0" cellpadding="0" cellspacing="0"><caption>main.cpp</caption><tbody><tr><td class="gutter"><div class="line number841 index0 alt2">841</div><div class="line number842 index1 alt1">842</div><div class="line number843 index2 alt2">843</div><div class="line number844 index3 alt1">844</div><div class="line number845 index4 alt2">845</div><div class="line number846 index5 alt1">846</div></td><td class="code"><div class="container"><div class="line number841 index0 alt2"><code class="cpp keyword bold">void</code> <code class="cpp plain">Render()</code></div><div class="line number842 index1 alt1"><code class="cpp plain">{</code></div><div class="line number843 index2 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp functions bold">assert</code><code class="cpp plain">( g_d3dDevice );</code></div><div class="line number844 index3 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp functions bold">assert</code><code class="cpp plain">( g_d3dDeviceContext );</code></div><div class="line number845 index4 alt2">&nbsp;</div><div class="line number846 index5 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">Clear( Colors::CornflowerBlue, 1.0f, 0 );</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>On line 846, we call the <strong>Clear</strong> function to clear the contents of the back buffer and depth/stencil buffer.</p>
<span id="Setup_the_Input_Assembler_Stage"><h3>Setup the Input Assembler Stage</h3></span>
<p>The first stage of the rendering pipeline is the input assembler (<strong>IA</strong>).</p>
<div class="notranslate">
<div><div id="highlighter_330110" class="syntaxhighlighter  cpp"><table border="0" cellpadding="0" cellspacing="0"><caption>main.cpp</caption><tbody><tr><td class="gutter"><div class="line number848 index0 alt1">848</div><div class="line number849 index1 alt2">849</div><div class="line number850 index2 alt1">850</div><div class="line number851 index3 alt2">851</div><div class="line number852 index4 alt1">852</div><div class="line number853 index5 alt2">853</div><div class="line number854 index6 alt1">854</div></td><td class="code"><div class="container"><div class="line number848 index0 alt1"><code class="cpp keyword bold">const</code> <code class="cpp color1 bold">UINT</code> <code class="cpp plain">vertexStride = </code><code class="cpp keyword bold">sizeof</code><code class="cpp plain">(VertexPosColor);</code></div><div class="line number849 index1 alt2"><code class="cpp keyword bold">const</code> <code class="cpp color1 bold">UINT</code> <code class="cpp plain">offset = 0;</code></div><div class="line number850 index2 alt1">&nbsp;</div><div class="line number851 index3 alt2"><code class="cpp plain">g_d3dDeviceContext-&gt;IASetVertexBuffers( 0, 1, &amp;g_d3dVertexBuffer, &amp;vertexStride, &amp;offset );</code></div><div class="line number852 index4 alt1"><code class="cpp plain">g_d3dDeviceContext-&gt;IASetInputLayout( g_d3dInputLayout );</code></div><div class="line number853 index5 alt2"><code class="cpp plain">g_d3dDeviceContext-&gt;IASetIndexBuffer( g_d3dIndexBuffer, DXGI_FORMAT_R16_UINT, 0 );</code></div><div class="line number854 index6 alt1"><code class="cpp plain">g_d3dDeviceContext-&gt;IASetPrimitiveTopology( D3D11_PRIMITIVE_TOPOLOGY_TRIANGLELIST );</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>On line 851-854 we setup the various properties of the input assembler stage. On line 851, we bind the vertex buffer to to input assembler stage using the <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff476456(v=vs.85).aspx" title="ID3D11DeviceContext::IASetVertexBuffers method" target="_blank">ID3D11DeviceContext::IASetVertexBuffers</a> method. This method takes the following arguments <a href="https://www.3dgep.com/introduction-to-directx-11/#IASetVertexBuffers">[56]</a>:</p>
<ul>
<li><strong>UINT StartSlot</strong>: The first input slot for binding. The first vertex buffer is explicitly bound to the start slot; this causes each additional vertex buffer in the array to be implicitly bound to each subsequent input slot. The maximum of 16 or 32 input slots (ranges from 0 to <strong>D3D11_IA_VERTEX_INPUT_RESOURCE_SLOT_COUNT</strong> – 1) are available; the <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff476876(v=vs.85).aspx" title="Direct3D feature levels" target="_blank">maximum number of input slots depends on the feature level</a>.</li>
<li><strong>UINT NumBuffers</strong>: The number of vertex buffers in the array. The number of buffers (plus the starting slot) can’t exceed the total number of IA-stage input slots (ranges from 0 to <strong>D3D11_IA_VERTEX_INPUT_RESOURCE_SLOT_COUNT</strong> – <strong>StartSlot</strong>).</li>
<li><strong>ID3D11Buffer *const *ppVertexBuffers</strong>: A pointer to an array of vertex buffers (see <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff476351(v=vs.85).aspx" title="ID3D11Buffer interface" target="_blank">ID3D11Buffer</a>). The vertex buffers must have been created with the <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff476085(v=vs.85).aspx" title="D3D11_BIND_FLAG enumeration" target="_blank">D3D11_BIND_VERTEX_BUFFER</a> flag.</li>
<li><strong>const UINT *pStrides</strong>: Pointer to an array of stride values; one stride value for each buffer in the vertex-buffer array. Each stride is the size (in bytes) of the elements that are to be used from that vertex buffer.</li>
<li><strong>const UINT *pOffsets</strong>: Pointer to an array of offset values; one offset value for each buffer in the vertex-buffer array. Each offset is the number of bytes between the first element of a vertex buffer and the first element that will be used.</li>
</ul>
<p>Since we only have a single vertex buffer, the <strong>StartSlot</strong> is always 0 and the <strong>NumBuffers</strong> is 1. The <strong>StartSlot</strong> argument should match the <strong>InputSlot</strong> of the <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff476180(v=vs.85).aspx" title="D3D11_INPUT_ELEMENT_DESC structure" target="_blank">D3D11_INPUT_ELEMENT_DESC</a> elements that were configured in the <strong>LoadContent</strong> function.</p>
<p>On line 852 the input layout is specified for the input assembler stage using the <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff476454(v=vs.85).aspx" title="ID3D11DeviceContext::IASetInputLayout method" target="_blank">ID3D11DeviceContext::IASetInputLayout</a> method. The input layout object used must match the input signature of the vertex shader which is bound to the vertex shader stage while rendering.</p>
<p>On line 853 the index buffer is bound to the input assembler stage using the <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff476453(v=vs.85).aspx" title="ID3D11DeviceContext::IASetIndexBuffer method" target="_blank">ID3D11DeviceContext::IASetIndexBuffer</a> method. This method takes the following arguments <a href="https://www.3dgep.com/introduction-to-directx-11/#IASetIndexBuffer">[57]</a>:</p>
<ul>
<li><strong>ID3D11Buffer *pIndexBuffer</strong>: A pointer to an <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff476351(v=vs.85).aspx" title="ID3D11Buffer interface" target="_blank">ID3D11Buffer</a> object, that contains indices. The index buffer must have been created with the <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff476085(v=vs.85).aspx" title="D3D11_BIND_FLAG enumeration" target="_blank">D3D11_BIND_INDEX_BUFFER</a> flag.</li>
<li><strong>DXGI_FORMAT Format</strong>: A <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/bb173059(v=vs.85).aspx" title="DXGI_FORMAT enumeration" target="_blank">DXGI_FORMAT</a> that specifies the format of the data in the index buffer. The only formats allowed for index buffer data are 16-bit (<strong>DXGI_FORMAT_R16_UINT</strong>) and 32-bit (<strong>DXGI_FORMAT_R32_UINT</strong>) integers.</li>
<li><strong>UINT Offset</strong>: Offset (in bytes) from the start of the index buffer to the first index to use.</li>
</ul>
<p>And on line 854 the type of primitive that will be used for rendering is specified using the <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff476455(v=vs.85).aspx" title="ID3D11DeviceContext::IASetPrimitiveTopology method" target="_blank">ID3D11DeviceContext::IASetPrimitiveTopology</a> method. In this case we specify the <strong>D3D11_PRIMITIVE_TOPOLOGY_TRIANGLELIST</strong> primitive type which indicates to the input assembler stage that we are rending with a list of discontinuous triangles.</p>
<span id="Setup_the_Vertex_Shader_Stage"><h3>Setup the Vertex Shader Stage</h3></span>
<p>The next stage of the rendering pipeline is the vertex shader stage (<strong>VS</strong>). For the vertex shader stage we only have to specify the vertex shader which will be used to transform the object space vertices to homogeneous clip space and bind any constant buffers that are used by the vertex shader stage.</p>
<div class="notranslate">
<div><div id="highlighter_106923" class="syntaxhighlighter  cpp"><table border="0" cellpadding="0" cellspacing="0"><caption>main.cpp</caption><tbody><tr><td class="gutter"><div class="line number856 index0 alt1">856</div><div class="line number857 index1 alt2">857</div></td><td class="code"><div class="container"><div class="line number856 index0 alt1"><code class="cpp plain">g_d3dDeviceContext-&gt;VSSetShader( g_d3dVertexShader, nullptr, 0 );</code></div><div class="line number857 index1 alt2"><code class="cpp plain">g_d3dDeviceContext-&gt;VSSetConstantBuffers(0, 3, g_d3dConstantBuffers );</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>The vertex shader is bound to the vertex shader stage using the <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff476493(v=vs.85).aspx" title="ID3D11DeviceContext::VSSetShader method" target="_blank">ID3D11DeviceContext::VSSetShader</a> method. This method takes the following arguments <a href="https://www.3dgep.com/introduction-to-directx-11/#VSSetShader">[58]</a>: </p>
<ul>
<li><strong>ID3D11VertexShader *pVertexShader</strong>: Pointer to a vertex shader (see <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff476641(v=vs.85).aspx" title="ID3D11VertexShader interface" target="_blank">ID3D11VertexShader</a>). Passing in <strong>NULL</strong> disables the shader for this pipeline stage.</li>
<li><strong>ID3D11ClassInstance *const *ppClassInstances</strong>: A pointer to an array of class-instance interfaces (see <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff476353(v=vs.85).aspx" title="ID3D11ClassInstance interface" target="_blank">ID3D11ClassInstance</a>). Each interface used by a shader must have a corresponding class instance or the shader will get disabled. Set <strong>ppClassInstances</strong> to <strong>NULL</strong> if the shader does not use any interfaces.</li>
<li><strong>UINT NumClassInstances</strong>: The number of class-instance interfaces in the <strong>ppClassInstances</strong> array.</li>
</ul>
<p>On line 857 the constant buffers used by the vertex shader are bound to the vertex shader stage using the <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff476491(v=vs.85).aspx" title="ID3D11DeviceContext::VSSetConstantBuffers method" target="_blank">ID3D11DeviceContext::VSSetConstantBuffers</a> method. This method takes the following arguments:</p>
<ul>
<li><strong>UINT StartSlot</strong>: Index into the device’s zero-based array to begin setting constant buffers to (ranges from 0 to <strong>D3D11_COMMONSHADER_CONSTANT_BUFFER_API_SLOT_COUNT</strong> – 1).</li>
<li><strong>UINT NumBuffers</strong>: Number of buffers to set (ranges from 0 to <strong>D3D11_COMMONSHADER_CONSTANT_BUFFER_API_SLOT_COUNT</strong> – StartSlot).</li>
<li><strong>ID3D11Buffer *const *ppConstantBuffers</strong>: Array of constant buffers (see <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff476351(v=vs.85).aspx" title="ID3D11Buffer interface" target="_blank">ID3D11Buffer</a>) being given to the device.</li>
</ul>
<span id="Setup_the_Rasterizer_Stage"><h3>Setup the Rasterizer Stage</h3></span>
<p>After the vertex shader stage but before the pixel shader stage comes the rasterizer stage. The rasterizer stage is responsible for interpolating the various vertex attributes output from the vertex shader and invoking the pixel shader program for each screen pixel which is affected by the rendered geometry.</p>
<div class="notranslate">
<div><div id="highlighter_447850" class="syntaxhighlighter  cpp"><table border="0" cellpadding="0" cellspacing="0"><caption>main.cpp</caption><tbody><tr><td class="gutter"><div class="line number859 index0 alt2">859</div><div class="line number860 index1 alt1">860</div></td><td class="code"><div class="container"><div class="line number859 index0 alt2"><code class="cpp plain">g_d3dDeviceContext-&gt;RSSetState( g_d3dRasterizerState );</code></div><div class="line number860 index1 alt1"><code class="cpp plain">g_d3dDeviceContext-&gt;RSSetViewports( 1, &amp;g_Viewport );</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>On line 859 the rasterizer stage is initialized using the <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff476479(v=vs.85).aspx" title="ID3D11DeviceContext::RSSetState method" target="_blank">ID3D11DeviceContext::RSSetState</a> method. This method takes a pointer to a <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff476580(v=vs.85).aspx" title="ID3D11RasterizerState interface" target="_blank">ID3D11RasterizerState</a> object which we created in the <strong>InitDirectX</strong> function.</p>
<p>The rasterizer stage also needs to know about any viewports that are used to map the clip space coordinates into screen space. All viewports are bound to the rasterizer stage using the <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff476480(v=vs.85).aspx" title="ID3D11DeviceContext::RSSetViewports method" target="_blank">ID3D11DeviceContext::RSSetViewports</a> method. This takes the following arguments <a href="https://www.3dgep.com/introduction-to-directx-11/#RSSetViewports">[59]</a>: </p>
<ul>
<li><strong>UINT NumViewports</strong>: Number of viewports to bind.</li>
<li><strong>const D3D11_VIEWPORT *pViewports</strong>: An array of D3D11_VIEWPORT structures to bind to the device.</li>
</ul>
<p>All viewports must be set atomically as one operation. Any viewports not defined by the call are disabled.<br>
Which viewport to use is determined by the <strong>SV_ViewportArrayIndex</strong> semantic output by a geometry shader; if a geometry shader does not specify the semantic, Direct3D will use the first viewport in the array <a href="https://www.3dgep.com/introduction-to-directx-11/#RSSetViewports">[59]</a>.</p>
<span id="Setup_the_Pixel_Shader_Stage"><h3>Setup the Pixel Shader Stage</h3></span>
<p>Next we’ll setup the pixel shader stage. For this stage, we only have to bind the pixel shader program to the pixel shader stage.</p>
<div class="notranslate">
<div><div id="highlighter_250801" class="syntaxhighlighter  cpp"><table border="0" cellpadding="0" cellspacing="0"><caption>main.cpp</caption><tbody><tr><td class="gutter"><div class="line number862 index0 alt1">862</div></td><td class="code"><div class="container"><div class="line number862 index0 alt1"><code class="cpp plain">g_d3dDeviceContext-&gt;PSSetShader( g_d3dPixelShader, nullptr, 0 );</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>The pixel shader is bound to the pixel shader stage using the <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff476472(v=vs.85).aspx" title="ID3D11DeviceContext::PSSetShader method" target="_blank">ID3D11DeviceContext::PSSetShader</a> method. This method is similar to the method to set the vertex shader so I won’t detail the arguments here.</p>
<span id="Setup_the_Output_Merger_Stage"><h3>Setup the Output Merger Stage</h3></span>
<p>The output merger stage (as it’s name suggests) merges the output from the pixel shader onto the color and depth buffers.</p>
<div class="notranslate">
<div><div id="highlighter_224784" class="syntaxhighlighter  cpp"><table border="0" cellpadding="0" cellspacing="0"><caption>main.cpp</caption><tbody><tr><td class="gutter"><div class="line number864 index0 alt1">864</div><div class="line number865 index1 alt2">865</div></td><td class="code"><div class="container"><div class="line number864 index0 alt1"><code class="cpp plain">g_d3dDeviceContext-&gt;OMSetRenderTargets( 1, &amp;g_d3dRenderTargetView, g_d3dDepthStencilView );</code></div><div class="line number865 index1 alt2"><code class="cpp plain">g_d3dDeviceContext-&gt;OMSetDepthStencilState( g_d3dDepthStencilState, 1 );</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>The back buffer and depth/stencil buffer are bound to the output merger stage using the <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff476464(v=vs.85).aspx" title="ID3D11DeviceContext::OMSetRenderTargets method" target="_blank">ID3D11DeviceContext::OMSetRenderTargets</a> method. This method takes the following arguments <a href="https://www.3dgep.com/introduction-to-directx-11/#OMSetRenderTargets">[60]</a>:</p>
<ul>
<li><strong>UINT NumViews</strong>: Number of render targets to bind (ranges between 0 and <strong>D3D11_SIMULTANEOUS_RENDER_TARGET_COUNT</strong>). If this parameter is nonzero, the number of entries in the array to which <strong>ppRenderTargetViews</strong> points must equal the number in this parameter.</li>
<li><strong>ID3D11RenderTargetView *const *ppRenderTargetViews</strong>: Pointer to an array of <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff476582(v=vs.85).aspx" title="ID3D11RenderTargetView interface" target="_blank">ID3D11RenderTargetView</a> that represent the render targets to bind to the device. If this parameter is <strong>NULL</strong> and NumViews is 0, no render targets are bound.</li>
<li><strong>ID3D11DepthStencilView *pDepthStencilView</strong>: Pointer to a <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff476377(v=vs.85).aspx" title="ID3D11DepthStencilView interface" target="_blank">ID3D11DepthStencilView</a> that represents the depth-stencil view to bind to the device. If this parameter is <strong>NULL</strong>, the depth-stencil view is not bound.</li>
</ul>
<p>You can render to multiple render targets by mapping multiple output values to the <strong>SV_Target[n]</strong> (where <strong>n</strong> is between 0 and <strong>D3D11_SIMULTANEOUS_RENDER_TARGET_COUNT</strong>) semantic in the pixel shader. Currently, the maximum number of render target views that can be mapped to the output merger stage is eight (8).</p>
<p>On line 865, the <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff476463(v=vs.85).aspx" title="ID3D11DeviceContext::OMSetDepthStencilState method" target="_blank">ID3D11DeviceContext::OMSetDepthStencilState</a> method is used to map the <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff476375(v=vs.85).aspx" title="ID3D11DepthStencilState interface" target="_blank">ID3D11DepthStencilState</a> object that was created in the <strong>InitDirectX</strong> function. Setting the first argument of this method to <strong>NULL</strong> will use the default state listed in <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff476110(v=vs.85).aspx" title="D3D11_DEPTH_STENCIL_DESC structure" target="_blank">D3D11_DEPTH_STENCIL_DESC</a> <a href="https://www.3dgep.com/introduction-to-directx-11/#OMSetDepthStencilState">[61]</a>.</p>
<span id="Draw_the_Cube"><h3>Draw the Cube</h3></span>
<p>Now that we have initialized the various stages of the rendering pipeline, we can render the cube geometry to the screen.</p>
<div class="notranslate">
<div><div id="highlighter_314404" class="syntaxhighlighter  cpp"><table border="0" cellpadding="0" cellspacing="0"><caption>main.cpp</caption><tbody><tr><td class="gutter"><div class="line number867 index0 alt2">867</div></td><td class="code"><div class="container"><div class="line number867 index0 alt2"><code class="cpp plain">g_d3dDeviceContext-&gt;DrawIndexed( _countof(g_Indicies), 0, 0 );</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>The <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff476409(v=vs.85).aspx" title="ID3D11DeviceContext::DrawIndexed method" target="_blank">ID3D11DeviceContext::DrawIndexed</a> method is used to draw indexed primitives without instancing. The <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff476409(v=vs.85).aspx" title="ID3D11DeviceContext::DrawIndexed method" target="_blank">ID3D11DeviceContext::DrawIndexed</a> method takes the following arguments <a href="https://www.3dgep.com/introduction-to-directx-11/#DrawIndexed">[62]</a>:</p>
<ul>
<li><strong>UINT IndexCount</strong>: Number of indices in the currently bound index buffer to draw.</li>
<li><strong>UINT StartIndexLocation</strong>: The location of the first index read by the GPU from the index buffer.</li>
<li><strong>INT BaseVertexLocation</strong>: A value added to each index before reading a vertex from the vertex buffer.</li>
</ul>
<span id="Present_1"><h3>Present</h3></span>
<p>The final step in the render function is to present the swap chain’s back buffer to the screen.</p>
<div class="notranslate">
<div><div id="highlighter_72131" class="syntaxhighlighter  cpp"><table border="0" cellpadding="0" cellspacing="0"><caption>main.cpp</caption><tbody><tr><td class="gutter"><div class="line number869 index0 alt2">869</div><div class="line number870 index1 alt1">870</div></td><td class="code"><div class="container"><div class="line number869 index0 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">Present( g_EnableVSync );</code></div><div class="line number870 index1 alt1"><code class="cpp plain">}</code></div></div></td></tr></tbody></table></div></div>
</div>
<span id="Cleanup"><h2>Cleanup</h2></span>
<p>Because we are such tidy programmers, we should not forget to tidy up the resource before our application quits.</p>
<span id="UnloadContent"><h3>UnloadContent</h3></span>
<p>The <strong>UnloadContent</strong> function is used for releasing the resources that were allocated in the <strong>LoadContent</strong> method.</p>
<div class="notranslate">
<div><div id="highlighter_797081" class="syntaxhighlighter  cpp"><table border="0" cellpadding="0" cellspacing="0"><caption>main.cpp</caption><tbody><tr><td class="gutter"><div class="line number693 index0 alt2">693</div><div class="line number694 index1 alt1">694</div><div class="line number695 index2 alt2">695</div><div class="line number696 index3 alt1">696</div><div class="line number697 index4 alt2">697</div><div class="line number698 index5 alt1">698</div><div class="line number699 index6 alt2">699</div><div class="line number700 index7 alt1">700</div><div class="line number701 index8 alt2">701</div><div class="line number702 index9 alt1">702</div><div class="line number703 index10 alt2">703</div></td><td class="code"><div class="container"><div class="line number693 index0 alt2"><code class="cpp keyword bold">void</code> <code class="cpp plain">UnloadContent()</code></div><div class="line number694 index1 alt1"><code class="cpp plain">{</code></div><div class="line number695 index2 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">SafeRelease(g_d3dConstantBuffers[CB_Appliation]);</code></div><div class="line number696 index3 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">SafeRelease(g_d3dConstantBuffers[CB_Frame]);</code></div><div class="line number697 index4 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">SafeRelease(g_d3dConstantBuffers[CB_Object]);</code></div><div class="line number698 index5 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">SafeRelease(g_d3dIndexBuffer);</code></div><div class="line number699 index6 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">SafeRelease(g_d3dVertexBuffer);</code></div><div class="line number700 index7 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">SafeRelease(g_d3dInputLayout);</code></div><div class="line number701 index8 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">SafeRelease(g_d3dVertexShader);</code></div><div class="line number702 index9 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">SafeRelease(g_d3dPixelShader);</code></div><div class="line number703 index10 alt2"><code class="cpp plain">}</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>Since all of the resources we allocated are all COM objects, we can use the <strong>SafeRelease</strong> method to release the reference count of the COM objects. If the COM object’s reference count reaches 0, it will be automatically deleted by the system.</p>
<span id="Cleanup_1"><h3>Cleanup</h3></span>
<p>We should also not forget to cleanup the references to the resources allocated in the <strong>InitDirectX</strong> function.</p>
<div class="notranslate">
<div><div id="highlighter_626833" class="syntaxhighlighter  cpp"><table border="0" cellpadding="0" cellspacing="0"><caption>main.cpp</caption><tbody><tr><td class="gutter"><div class="line number872 index0 alt1">872</div><div class="line number873 index1 alt2">873</div><div class="line number874 index2 alt1">874</div><div class="line number875 index3 alt2">875</div><div class="line number876 index4 alt1">876</div><div class="line number877 index5 alt2">877</div><div class="line number878 index6 alt1">878</div><div class="line number879 index7 alt2">879</div><div class="line number880 index8 alt1">880</div><div class="line number881 index9 alt2">881</div><div class="line number882 index10 alt1">882</div></td><td class="code"><div class="container"><div class="line number872 index0 alt1"><code class="cpp keyword bold">void</code> <code class="cpp plain">Cleanup()</code></div><div class="line number873 index1 alt2"><code class="cpp plain">{</code></div><div class="line number874 index2 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">SafeRelease( g_d3dDepthStencilView );</code></div><div class="line number875 index3 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">SafeRelease( g_d3dRenderTargetView );</code></div><div class="line number876 index4 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">SafeRelease( g_d3dDepthStencilBuffer );</code></div><div class="line number877 index5 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">SafeRelease( g_d3dDepthStencilState );</code></div><div class="line number878 index6 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">SafeRelease( g_d3dRasterizerState );</code></div><div class="line number879 index7 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">SafeRelease( g_d3dSwapChain );</code></div><div class="line number880 index8 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">SafeRelease( g_d3dDeviceContext );</code></div><div class="line number881 index9 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">SafeRelease( g_d3dDevice );</code></div><div class="line number882 index10 alt1"><code class="cpp plain">}</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>Now that we have defined all of the necessary functions let’s complete the main function.</p>
<span id="Update_the_Run_Function"><h2>Update the Run Function</h2></span>
<p>At this point we should update the <strong>Run</strong> to call the <strong>Update</strong> and <strong>Render</strong> functions.</p>
<div class="notranslate">
<div><div id="highlighter_101984" class="syntaxhighlighter  cpp"><table border="0" cellpadding="0" cellspacing="0"><caption>main.cpp</caption><tbody><tr><td class="gutter"><div class="line number705 index0 alt2">705</div><div class="line number706 index1 alt1">706</div><div class="line number707 index2 alt2">707</div><div class="line number708 index3 alt1">708</div><div class="line number709 index4 alt2">709</div><div class="line number710 index5 alt1">710</div><div class="line number711 index6 alt2">711</div><div class="line number712 index7 alt1">712</div><div class="line number713 index8 alt2">713</div><div class="line number714 index9 alt1">714</div><div class="line number715 index10 alt2">715</div><div class="line number716 index11 alt1">716</div><div class="line number717 index12 alt2">717</div><div class="line number718 index13 alt1">718</div><div class="line number719 index14 alt2">719</div><div class="line number720 index15 alt1">720</div><div class="line number721 index16 alt2">721</div><div class="line number722 index17 alt1">722</div><div class="line number723 index18 alt2">723</div><div class="line number724 index19 alt1">724</div><div class="line number725 index20 alt2">725</div><div class="line number726 index21 alt1">726</div><div class="line number727 index22 alt2">727</div><div class="line number728 index23 alt1">728</div><div class="line number729 index24 alt2">729</div><div class="line number730 index25 alt1">730</div><div class="line number731 index26 alt2">731</div><div class="line number732 index27 alt1">732</div><div class="line number733 index28 alt2 highlighted">733</div><div class="line number734 index29 alt1 highlighted">734</div><div class="line number735 index30 alt2">735</div><div class="line number736 index31 alt1">736</div><div class="line number737 index32 alt2">737</div><div class="line number738 index33 alt1">738</div><div class="line number739 index34 alt2">739</div></td><td class="code"><div class="container"><div class="line number705 index0 alt2"><code class="cpp comments">/**</code></div><div class="line number706 index1 alt1"><code class="cpp spaces">&nbsp;</code><code class="cpp comments">* The main application loop.</code></div><div class="line number707 index2 alt2"><code class="cpp spaces">&nbsp;</code><code class="cpp comments">*/</code></div><div class="line number708 index3 alt1"><code class="cpp color1 bold">int</code> <code class="cpp plain">Run()</code></div><div class="line number709 index4 alt2"><code class="cpp plain">{</code></div><div class="line number710 index5 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">MSG msg = {0};</code></div><div class="line number711 index6 alt2">&nbsp;</div><div class="line number712 index7 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">static</code> <code class="cpp color1 bold">DWORD</code> <code class="cpp plain">previousTime = timeGetTime();</code></div><div class="line number713 index8 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">static</code> <code class="cpp keyword bold">const</code> <code class="cpp color1 bold">float</code> <code class="cpp plain">targetFramerate = 30.0f;</code></div><div class="line number714 index9 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">static</code> <code class="cpp keyword bold">const</code> <code class="cpp color1 bold">float</code> <code class="cpp plain">maxTimeStep = 1.0f / targetFramerate;</code></div><div class="line number715 index10 alt2">&nbsp;</div><div class="line number716 index11 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">while</code> <code class="cpp plain">( msg.message != WM_QUIT )</code></div><div class="line number717 index12 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">{</code></div><div class="line number718 index13 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">if</code> <code class="cpp plain">( PeekMessage( &amp;msg, 0, 0, 0, PM_REMOVE ) )</code></div><div class="line number719 index14 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">{</code></div><div class="line number720 index15 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">TranslateMessage( &amp;msg );</code></div><div class="line number721 index16 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">DispatchMessage( &amp;msg );</code></div><div class="line number722 index17 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number723 index18 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">else</code></div><div class="line number724 index19 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">{</code></div><div class="line number725 index20 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp color1 bold">DWORD</code> <code class="cpp plain">currentTime = timeGetTime();</code></div><div class="line number726 index21 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp color1 bold">float</code> <code class="cpp plain">deltaTime = ( currentTime - previousTime ) / 1000.0f;</code></div><div class="line number727 index22 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">previousTime = currentTime;</code></div><div class="line number728 index23 alt1">&nbsp;</div><div class="line number729 index24 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp comments">// Cap the delta time to the max time step (useful if your </code></div><div class="line number730 index25 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp comments">// debugging and you don't want the deltaTime value to explode.</code></div><div class="line number731 index26 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">deltaTime = std::min&lt;</code><code class="cpp color1 bold">float</code><code class="cpp plain">&gt;(deltaTime, maxTimeStep);</code></div><div class="line number732 index27 alt1">&nbsp;</div><div class="line number733 index28 alt2 highlighted"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">Update( deltaTime );</code></div><div class="line number734 index29 alt1 highlighted"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">Render();</code></div><div class="line number735 index30 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number736 index31 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number737 index32 alt2">&nbsp;</div><div class="line number738 index33 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">return</code> <code class="cpp keyword bold">static_cast</code><code class="cpp plain">&lt;</code><code class="cpp color1 bold">int</code><code class="cpp plain">&gt;(msg.wParam);</code></div><div class="line number739 index34 alt2"><code class="cpp plain">}</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>This function is identical to the <strong>Run</strong> function shown in the section titled <a href="https://www.3dgep.com/introduction-to-directx-11/#The_Run_Method" title="The Run Method">The Run Method</a> except now we can compile the application with the <strong>Update</strong> and <strong>Render</strong> functions uncommented.</p>
<span id="Update_the_Main_Function_1"><h2>Update the Main Function</h2></span>
<p>And the final version of the main function which also loads the demo content and performs cleanup after the main window is closed.</p>
<div class="notranslate">
<div><div id="highlighter_888073" class="syntaxhighlighter  cpp"><table border="0" cellpadding="0" cellspacing="0"><caption>main.cpp</caption><tbody><tr><td class="gutter"><div class="line number741 index0 alt2">741</div><div class="line number742 index1 alt1">742</div><div class="line number743 index2 alt2">743</div><div class="line number744 index3 alt1">744</div><div class="line number745 index4 alt2">745</div><div class="line number746 index5 alt1">746</div><div class="line number747 index6 alt2">747</div><div class="line number748 index7 alt1">748</div><div class="line number749 index8 alt2">749</div><div class="line number750 index9 alt1">750</div><div class="line number751 index10 alt2">751</div><div class="line number752 index11 alt1">752</div><div class="line number753 index12 alt2">753</div><div class="line number754 index13 alt1">754</div><div class="line number755 index14 alt2">755</div><div class="line number756 index15 alt1">756</div><div class="line number757 index16 alt2">757</div><div class="line number758 index17 alt1">758</div><div class="line number759 index18 alt2">759</div><div class="line number760 index19 alt1">760</div><div class="line number761 index20 alt2">761</div><div class="line number762 index21 alt1">762</div><div class="line number763 index22 alt2">763</div><div class="line number764 index23 alt1">764</div><div class="line number765 index24 alt2 highlighted">765</div><div class="line number766 index25 alt1 highlighted">766</div><div class="line number767 index26 alt2 highlighted">767</div><div class="line number768 index27 alt1 highlighted">768</div><div class="line number769 index28 alt2 highlighted">769</div><div class="line number770 index29 alt1">770</div><div class="line number771 index30 alt2">771</div><div class="line number772 index31 alt1">772</div><div class="line number773 index32 alt2 highlighted">773</div><div class="line number774 index33 alt1 highlighted">774</div><div class="line number775 index34 alt2">775</div><div class="line number776 index35 alt1">776</div><div class="line number777 index36 alt2">777</div></td><td class="code"><div class="container"><div class="line number741 index0 alt2"><code class="cpp color1 bold">int</code> <code class="cpp plain">WINAPI wWinMain( </code><code class="cpp color1 bold">HINSTANCE</code> <code class="cpp plain">hInstance, </code><code class="cpp color1 bold">HINSTANCE</code> <code class="cpp plain">prevInstance, </code><code class="cpp color1 bold">LPWSTR</code> <code class="cpp plain">cmdLine, </code><code class="cpp color1 bold">int</code> <code class="cpp plain">cmdShow )</code></div><div class="line number742 index1 alt1"><code class="cpp plain">{</code></div><div class="line number743 index2 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">UNREFERENCED_PARAMETER( prevInstance );</code></div><div class="line number744 index3 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">UNREFERENCED_PARAMETER( cmdLine );</code></div><div class="line number745 index4 alt2">&nbsp;</div><div class="line number746 index5 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp comments">// Check for DirectX Math library support.</code></div><div class="line number747 index6 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">if</code> <code class="cpp plain">( !XMVerifyCPUSupport() )</code></div><div class="line number748 index7 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">{</code></div><div class="line number749 index8 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">MessageBox( nullptr, TEXT(</code><code class="cpp string">"Failed to verify DirectX Math library support."</code><code class="cpp plain">), TEXT(</code><code class="cpp string">"Error"</code><code class="cpp plain">), MB_OK );</code></div><div class="line number750 index9 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">return</code> <code class="cpp plain">-1;</code></div><div class="line number751 index10 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number752 index11 alt1">&nbsp;</div><div class="line number753 index12 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">if</code><code class="cpp plain">( InitApplication(hInstance, cmdShow) != 0 )</code></div><div class="line number754 index13 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">{</code></div><div class="line number755 index14 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">MessageBox( nullptr, TEXT(</code><code class="cpp string">"Failed to create applicaiton window."</code><code class="cpp plain">), TEXT(</code><code class="cpp string">"Error"</code><code class="cpp plain">), MB_OK );</code></div><div class="line number756 index15 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">return</code> <code class="cpp plain">-1;</code></div><div class="line number757 index16 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number758 index17 alt1">&nbsp;</div><div class="line number759 index18 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">if</code> <code class="cpp plain">( InitDirectX(hInstance, g_EnableVSync) != 0 )</code></div><div class="line number760 index19 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">{</code></div><div class="line number761 index20 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">MessageBox( nullptr, TEXT(</code><code class="cpp string">"Failed to create DirectX device and swap chain."</code><code class="cpp plain">), TEXT(</code><code class="cpp string">"Error"</code><code class="cpp plain">), MB_OK );</code></div><div class="line number762 index21 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">return</code> <code class="cpp plain">-1;</code></div><div class="line number763 index22 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number764 index23 alt1">&nbsp;</div><div class="line number765 index24 alt2 highlighted"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">if</code> <code class="cpp plain">( !LoadContent() )</code></div><div class="line number766 index25 alt1 highlighted"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">{</code></div><div class="line number767 index26 alt2 highlighted"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">MessageBox( nullptr, TEXT(</code><code class="cpp string">"Failed to load content."</code><code class="cpp plain">), TEXT(</code><code class="cpp string">"Error"</code><code class="cpp plain">), MB_OK );</code></div><div class="line number768 index27 alt1 highlighted"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">return</code> <code class="cpp plain">-1;</code></div><div class="line number769 index28 alt2 highlighted"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">}</code></div><div class="line number770 index29 alt1">&nbsp;</div><div class="line number771 index30 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp color1 bold">int</code> <code class="cpp plain">returnCode = Run();</code></div><div class="line number772 index31 alt1">&nbsp;</div><div class="line number773 index32 alt2 highlighted"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">UnloadContent();</code></div><div class="line number774 index33 alt1 highlighted"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">Cleanup();</code></div><div class="line number775 index34 alt2">&nbsp;</div><div class="line number776 index35 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp keyword bold">return</code> <code class="cpp plain">returnCode;</code></div><div class="line number777 index36 alt2"><code class="cpp plain">}</code></div></div></td></tr></tbody></table></div></div>
</div>
<span id="Run_the_Demo"><h2>Run the Demo</h2></span>
<p>Now if we run the application again, we should see a rotating cube on a cornflower-blue background.</p>
<p><iframe width="560" height="315" src="./Introduction to DirectX 113D Game Engine Programming_files/M0zJFFwSxN0.html" frameborder="0" allowfullscreen=""></iframe></p>
<span id="Download_the_Demo"><h1>Download the Demo</h1></span>
<p>You can download the source code including the project files for this demo here:</p>
<p><a href="https://drive.google.com/uc?export=download&amp;id=0B0ND0J8HHfaXVWRrOEVnRmlRZms"><img src="./Introduction to DirectX 113D Game Engine Programming_files/zip-icon_03-e1382533375997.png" alt="" width="32" height="32" class="alignleft size-full wp-image-5252">DirectX11_Template.zip</a></p>
<span id="References"><h1>References</h1></span>
<p><a id="DirectX"></a>[1] Wikipedia. (2014). Directx. [online] Retrieved from: <a href="http://en.wikipedia.org/wiki/DirectX" title="DirectX" target="_blank">http://en.wikipedia.org/wiki/DirectX</a> [Accessed: 10 Mar 2014].</p>
<p><a id="Direct3D"></a>[2] Wikipedia. (2014). Direct3d. [online] Retrieved from: <a href="http://en.wikipedia.org/wiki/Direct3D" title="Direct3D" target="_blank">http://en.wikipedia.org/wiki/Direct3D</a> [Accessed: 10 Mar 2014].</p>
<p><a id="Windows_95"></a>[3] Wikipedia. (2014). Windows 95. [online] Retrieved from: <a href="http://en.wikipedia.org/wiki/Windows_95" title="Windows 95" target="_blank">http://en.wikipedia.org/wiki/Windows_95</a> [Accessed: 10 Mar 2014].</p>
<p><a id="ShaderModels"></a>[4] Msdn.microsoft.com. (2014). Shader models vs shader profiles (windows). [online] Retrieved from: <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/bb509626(v=vs.85).aspx" title="Shader Models" target="_blank">http://msdn.microsoft.com/en-us/library/windows/desktop/bb509626(v=vs.85).aspx</a> [Accessed: 11 Mar 2014].</p>
<p><a id="DirectX12"></a>[5] IGN. (2014). Gdc: microsoft to debut DirectX 12 on march 20 – ign. [online] Retrieved from: <a href="http://www.ign.com/articles/2014/03/06/gdc-microsoft-to-debut-directx-12" title="DirectX 12" target="_blank">http://www.ign.com/articles/2014/03/06/gdc-microsoft-to-debut-directx-12</a> [Accessed: 11 Mar 2014].</p>
<p><a id="Direct2D"></a>[6] Msdn.microsoft.com. (2014). Direct2D (windows). [online] Retrieved from: <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/dd370990(v=vs.85).aspx" title="Direct2D" target="_blank">http://msdn.microsoft.com/en-us/library/windows/desktop/dd370990(v=vs.85).aspx</a> [Accessed: 11 Mar 2014].</p>
<p><a id="Direct3D_2"></a>[7] Msdn.microsoft.com. (2014). Direct3D (windows). [online] Retrieved from: <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/hh309466(v=vs.85).aspx" title="Direct3D" target="_blank">http://msdn.microsoft.com/en-us/library/windows/desktop/hh309466(v=vs.85).aspx</a> [Accessed: 11 Mar 2014].</p>
<p><a id="DirectWrite"></a>[8] Msdn.microsoft.com. (2014). DirectWrite (windows). [online] Retrieved from: <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/dd368038(v=vs.85).aspx" title="DirectWrite" target="_blank">http://msdn.microsoft.com/en-us/library/windows/desktop/dd368038(v=vs.85).aspx</a> [Accessed: 11 Mar 2014].</p>
<p><a id="DirectXMath"></a>[9] Msdn.microsoft.com. (2014). DirectXMath (windows). [online] Retrieved from: <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/hh437833(v=vs.85).aspx" title="DirectXMath" target="_blank">http://msdn.microsoft.com/en-us/library/windows/desktop/hh437833(v=vs.85).aspx</a> [Accessed: 11 Mar 2014].</p>
<p><a id="XAudio2"></a>[10] Msdn.microsoft.com. (2014). Xaudio2 APIs (windows). [online] Retrieved from: <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/hh405049(v=vs.85).aspx" title="XAudio2" target="_blank">http://msdn.microsoft.com/en-us/library/windows/desktop/hh405049(v=vs.85).aspx</a> [Accessed: 11 Mar 2014].</p>
<p><a id="XInput"></a>[11] Msdn.microsoft.com. (2014). XInput game controller APIs (windows). [online] Retrieved from: <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/hh405053(v=vs.85).aspx" title="XInput" target="_blank">http://msdn.microsoft.com/en-us/library/windows/desktop/hh405053(v=vs.85).aspx</a> [Accessed: 11 Mar 2014].</p>
<p><a id="DXGI"></a>[12] Msdn.microsoft.com. (2014). DXGI overview (windows). [online] Retrieved from: <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/bb205075(v=vs.85).aspx" title="DXGI" target="_blank">http://msdn.microsoft.com/en-us/library/windows/desktop/bb205075(v=vs.85).aspx</a> [Accessed: 11 Mar 2014].</p>
<p><a id="DirectX_Pipeline"></a>[13] Msdn.microsoft.com. (2014). Graphics pipeline (windows). [online] Retrieved from: <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff476882(v=vs.85).aspx" title="DirectX Pipeline" target="_blank">http://msdn.microsoft.com/en-us/library/windows/desktop/ff476882(v=vs.85).aspx</a> [Accessed: 11 Mar 2014].</p>
<p><a id="Tessellation"></a>[14] Msdn.microsoft.com. (2014). Tessellation overview (windows). [online] Retrieved from: <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff476340(v=vs.85).aspx" title="Tessellation" target="_blank">http://msdn.microsoft.com/en-us/library/windows/desktop/ff476340(v=vs.85).aspx</a> [Accessed: 11 Mar 2014].</p>
<p><a id="Shader_Stages"></a>[15] Msdn.microsoft.com. (2014). Shader stages (windows). [online] Retrieved from: <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/bb205146(v=vs.85).aspx#Pixel_Shader_Stage" title="Pixel-Shader Stage" target="_blank">http://msdn.microsoft.com/en-us/library/windows/desktop/bb205146(v=vs.85).aspx#Pixel_Shader_Stage</a> [Accessed: 11 Mar 2014].</p>
<p><a id="WNDCLASSEX"></a>[16] Msdn.microsoft.com. (2014). Wndclassex structure (windows). [online] Retrieved from: <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ms633577(v=vs.85).aspx" title="WNDCLASSEX" target="_blank">http://msdn.microsoft.com/en-us/library/windows/desktop/ms633577(v=vs.85).aspx</a> [Accessed: 14 Mar 2014].</p>
<p><a id="SAL"></a>[17] Msdn.microsoft.com. (2014). Annotating function parameters and return values. [online] Retrieved from: <a href="http://msdn.microsoft.com/en-us/library/hh916382.aspx" title="Semantic Annotation Language" target="_blank">http://msdn.microsoft.com/en-us/library/hh916382.aspx</a> [Accessed: 14 Mar 2014].</p>
<p><a id="CreateWindow"></a>[18] Msdn.microsoft.com. (2014). Createwindow function (windows). [online] Retrieved from: <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ms632679(v=vs.85).aspx" title="CreateWindow function" target="_blank">http://msdn.microsoft.com/en-us/library/windows/desktop/ms632679(v=vs.85).aspx</a> [Accessed: 14 Mar 2014].</p>
<p><a id="DXGI_SWAP_CHAIN_DESC"></a>[19] Msdn.microsoft.com. (2014). Dxgi_swap_chain_desc structure (windows). [online] Retrieved from: <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/bb173075(v=vs.85).aspx" title="DXGI_SWAP_CHAIN_DESC structure" target="_blank">http://msdn.microsoft.com/en-us/library/windows/desktop/bb173075(v=vs.85).aspx</a> [Accessed: 14 Mar 2014].</p>
<p><a id="DXGI_FORMAT"></a>[20] Msdn.microsoft.com. (2014). Dxgi_format enumeration (windows). [online] Retrieved from: <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/bb173059(v=vs.85).aspx" title="DXGI_FORMAT enumeration" target="_blank">http://msdn.microsoft.com/en-us/library/windows/desktop/bb173059(v=vs.85).aspx</a> [Accessed: 14 Mar 2014].</p>
<p><a id="DXGI_MODE_SCANLINE_ORDER"></a>[21] Msdn.microsoft.com. (2014). Dxgi_mode_scanline_order enumeration (windows). [online] Retrieved from: <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/bb173067(v=vs.85).aspx" title="DXGI_MODE_SCANLINE_ORDER enumeration" target="_blank">http://msdn.microsoft.com/en-us/library/windows/desktop/bb173067(v=vs.85).aspx</a> [Accessed: 14 Mar 2014].</p>
<p><a id="DXGI_MODE_SCALING"></a>[22] Msdn.microsoft.com. (2014). Dxgi_mode_scaling enumeration (windows). [online] Retrieved from: <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/bb173066(v=vs.85).aspx" title="DXGI_MODE_SCALING enumeration" target="_blank">http://msdn.microsoft.com/en-us/library/windows/desktop/bb173066(v=vs.85).aspx</a> [Accessed: 14 Mar 2014].</p>
<p><a id="DXGI_SAMPLE_DESC"></a>[23] Msdn.microsoft.com. (2014). Dxgi_sample_desc structure (windows). [online] Retrieved from: <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/bb173072(v=vs.85).aspx" title="DXGI_SAMPLE_DESC structure" target="_blank">http://msdn.microsoft.com/en-us/library/windows/desktop/bb173072(v=vs.85).aspx</a> [Accessed: 14 Mar 2014].</p>
<p><a id="DXGI_USAGE"></a>[24] Msdn.microsoft.com. (2014). Dxgi_usage (windows). [online] Retrieved from: <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/bb173078(v=vs.85).aspx" title="DXGI_USAGE" target="_blank">http://msdn.microsoft.com/en-us/library/windows/desktop/bb173078(v=vs.85).aspx</a> [Accessed: 14 Mar 2014].</p>
<p><a id="DXGI_SWAP_EFFECT"></a>[25] Msdn.microsoft.com. (2014). Dxgi_swap_effect enumeration (windows). [online] Retrieved from: <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/bb173077(v=vs.85).aspx" title="DXGI_SWAP_EFFECT enumeration" target="_blank">http://msdn.microsoft.com/en-us/library/windows/desktop/bb173077(v=vs.85).aspx</a> [Accessed: 14 Mar 2014].</p>
<p><a id="D3D11_CREATE_DEVICE_FLAG"></a>[26] Msdn.microsoft.com. (2014). D3d11_create_device_flag enumeration (windows). [online] Retrieved from: <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff476107(v=vs.85).aspx" title="D3D11_CREATE_DEVICE_FLAG enumeration" target="_blank">http://msdn.microsoft.com/en-us/library/windows/desktop/ff476107(v=vs.85).aspx</a> [Accessed: 17 Mar 2014].</p>
<p><a id="D3D11CreateDeviceAndSwapChain"></a>[27] Msdn.microsoft.com. (2014). D3d11createdeviceandswapchain function (windows). [online] Retrieved from: http://msdn.microsoft.com/en-us/library/windows/desktop/ff476083(v=vs.85).aspx [Accessed: 17 Mar 2014].</p>
<p><a id="D3D_DRIVER_TYPE"></a>[28] Msdn.microsoft.com. (2014). D3d_driver_type enumeration (windows). [online] Retrieved from: <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff476328(v=vs.85).aspx" title="D3D_DRIVER_TYPE enumeration" target="_blank">http://msdn.microsoft.com/en-us/library/windows/desktop/ff476328(v=vs.85).aspx</a> [Accessed: 17 Mar 2014].</p>
<p><a id="CreateRenderTargetView"></a>[29] Msdn.microsoft.com. (2014). Id3d11device::createrendertargetview method (windows). [online] Retrieved from: <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff476517(v=vs.85).aspx" title="ID3D11Device::CreateRenderTargetView method" target="_blank">http://msdn.microsoft.com/en-us/library/windows/desktop/ff476517(v=vs.85).aspx</a> [Accessed: 17 Mar 2014].</p>
<p><a id="D3D11_TEXTURE2D_DESC"></a>[30] Msdn.microsoft.com. (2014). D3d11_texture2d_desc structure (windows). [online] Retrieved from: <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff476253(v=vs.85).aspx" title="D3D11_TEXTURE2D_DESC structure" target="_blank">http://msdn.microsoft.com/en-us/library/windows/desktop/ff476253(v=vs.85).aspx</a> [Accessed: 17 Mar 2014].</p>
<p><a id="D3D11_USAGE"></a>[31] Msdn.microsoft.com. (2014). D3d11_usage enumeration (windows). [online] Retrieved from: <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff476259(v=vs.85).aspx" title="D3D11_USAGE enumeration" target="_blank">http://msdn.microsoft.com/en-us/library/windows/desktop/ff476259(v=vs.85).aspx</a> [Accessed: 17 Mar 2014].</p>
<p><a id="CreateTexture2D"></a>[32] Msdn.microsoft.com. (2014). Id3d11device::createtexture2d method (windows). [online] Retrieved from: <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff476521(v=vs.85).aspx" title="ID3D11Device::CreateTexture2D method" target="_blank">http://msdn.microsoft.com/en-us/library/windows/desktop/ff476521(v=vs.85).aspx</a> [Accessed: 17 Mar 2014].</p>
<p><a id="CreateDepthStencilView"></a>[33] Msdn.microsoft.com. (2014). Id3d11device::createdepthstencilview method (windows). [online] Retrieved from: <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff476507(v=vs.85).aspx" title="ID3D11Device::CreateDepthStencilView method" target="_blank">http://msdn.microsoft.com/en-us/library/windows/desktop/ff476507(v=vs.85).aspx</a> [Accessed: 17 Mar 2014].</p>
<p><a id="D3D11_DEPTH_STENCIL_DESC"></a>[34] Msdn.microsoft.com. (2014). D3d11_depth_stencil_desc structure (windows). [online] Retrieved from: <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff476110(v=vs.85).aspx" title="D3D11_DEPTH_STENCIL_DESC structure" target="_blank">http://msdn.microsoft.com/en-us/library/windows/desktop/ff476110(v=vs.85).aspx</a> [Accessed: 17 Mar 2014].</p>
<p><a id="D3D11_DEPTH_WRITE_MASK"></a>[35] Msdn.microsoft.com. (2014). D3d11_depth_write_mask enumeration (windows). [online] Retrieved from: <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff476113(v=vs.85).aspx" title="D3D11_DEPTH_WRITE_MASK enumeration" target="_blank">http://msdn.microsoft.com/en-us/library/windows/desktop/ff476113(v=vs.85).aspx</a> [Accessed: 17 Mar 2014].</p>
<p><a id="CreateDepthStencilState"></a>[36] Msdn.microsoft.com. (2014). Id3d11device::createdepthstencilstate method (windows). [online] Retrieved from: <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff476506(v=vs.85).aspx" title="ID3D11Device::CreateDepthStencilState method" target="_blank">http://msdn.microsoft.com/en-us/library/windows/desktop/ff476506(v=vs.85).aspx</a> [Accessed: 17 Mar 2014].</p>
<p><a id="D3D11_RASTERIZER_DESC"></a>[37] Msdn.microsoft.com. (2014). D3d11_rasterizer_desc structure (windows). [online] Retrieved from: <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff476198(v=vs.85).aspx" title="D3D11_RASTERIZER_DESC structure" target="_blank">http://msdn.microsoft.com/en-us/library/windows/desktop/ff476198(v=vs.85).aspx</a> [Accessed: 17 Mar 2014].</p>
<p><a id="D3D11_FILL_MODE"></a>[38] Msdn.microsoft.com. (2014). D3d11_fill_mode enumeration (windows). [online] Retrieved from:<a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff476131(v=vs.85).aspx" title="D3D11_FILL_MODE enumeration" target="_blank"> http://msdn.microsoft.com/en-us/library/windows/desktop/ff476131(v=vs.85).aspx</a> [Accessed: 17 Mar 2014].</p>
<p><a id="D3D11_CULL_MODE"></a>[39] Msdn.microsoft.com. (2014). D3d11_cull_mode enumeration (windows). [online] Retrieved from: <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff476108(v=vs.85).aspx" title="D3D11_CULL_MODE enumeration" target="_blank">http://msdn.microsoft.com/en-us/library/windows/desktop/ff476108(v=vs.85).aspx</a> [Accessed: 17 Mar 2014].</p>
<p><a id="CreateRasterizerState"></a>[40] Msdn.microsoft.com. (2014). Id3d11device::createrasterizerstate method (windows). [online] Retrieved from: <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff476516(v=vs.85).aspx" title="ID3D11Device::CreateRasterizerState method" target="_blank">http://msdn.microsoft.com/en-us/library/windows/desktop/ff476516(v=vs.85).aspx</a> [Accessed: 17 Mar 2014].</p>
<p><a id="D3D11_VIEWPORT"></a>[41] Msdn.microsoft.com. (2014). D3d11_viewport structure (windows). [online] Retrieved from: <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff476260(v=vs.85).aspx" title="D3D11_VIEWPORT structure" target="_blank">http://msdn.microsoft.com/en-us/library/windows/desktop/ff476260(v=vs.85).aspx</a> [Accessed: 17 Mar 2014].</p>
<p><a id="SystemValueSemantics"></a>[42] Msdn.microsoft.com. (2014). Semantics (windows). [online] Retrieved from: <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/bb509647(v=vs.85).aspx#System_Value" title="System-value semantics" target="_blank">http://msdn.microsoft.com/en-us/library/windows/desktop/bb509647(v=vs.85).aspx#System_Value</a> [Accessed: 18 Mar 2014]. </p>
<p><a id="FeatureLevels"></a>[43] Msdn.microsoft.com. (2014). Direct3D feature levels (Windows). [online] Retrieved from: <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff476876(v=vs.85).aspx" title="Direct3D feature levels" target="_blank">http://msdn.microsoft.com/en-us/library/windows/desktop/ff476876(v=vs.85).aspx</a> [Accessed: 18 Mar 2014].</p>
<p><a id="D3DCompileFromFile"></a>[44] Msdn.microsoft.com. (2014). D3DCompileFromFile function (Windows). [online] Retrieved from: <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/hh446872(v=vs.85).aspx" title="D3DCompileFromFile function" target="_blank">http://msdn.microsoft.com/en-us/library/windows/desktop/hh446872(v=vs.85).aspx</a> [Accessed: 19 Mar 2014].</p>
<p><a id="D3D11_BUFFER_DESC"></a>[45] Msdn.microsoft.com. (2014). D3D11_BUFFER_DESC structure (Windows). [online] Retrieved from: <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff476092(v=vs.85).aspx" title="D3D11_BUFFER_DESC structure" target="_blank">http://msdn.microsoft.com/en-us/library/windows/desktop/ff476092(v=vs.85).aspx</a> [Accessed: 19 Mar 2014].</p>
<p><a id="D3D11_SUBRESOURCE_DATA"></a>[46] Msdn.microsoft.com. (2014). D3D11_SUBRESOURCE_DATA structure (Windows). [online] Retrieved from: <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff476220(v=vs.85).aspx" title="D3D11_SUBRESOURCE_DATA structure" target="_blank">http://msdn.microsoft.com/en-us/library/windows/desktop/ff476220(v=vs.85).aspx</a> [Accessed: 19 Mar 2014].</p>
<p><a id="CreateBuffer"></a>[47] Msdn.microsoft.com. (2014). ID3D11Device::CreateBuffer method (Windows). [online] Retrieved from: <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff476501(v=vs.85).aspx" title="ID3D11Device::CreateBuffer method" target="_blank">http://msdn.microsoft.com/en-us/library/windows/desktop/ff476501(v=vs.85).aspx</a> [Accessed: 19 Mar 2014].</p>
<p><a id="CreateInputLayout"></a>[48] Msdn.microsoft.com. (2014). ID3D11Device::CreateInputLayout method (Windows). [online] Retrieved from: <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff476512(v=vs.85).aspx" title="ID3D11Device::CreateInputLayout method" target="_blank">http://msdn.microsoft.com/en-us/library/windows/desktop/ff476512(v=vs.85).aspx</a> [Accessed: 19 Mar 2014].</p>
<p><a id="D3D11_INPUT_ELEMENT_DESC"></a>[49] Msdn.microsoft.com. (2014). D3D11_INPUT_ELEMENT_DESC structure (Windows). [online] Retrieved from: <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff476180(v=vs.85).aspx" title="D3D11_INPUT_ELEMENT_DESC structure" target="_blank">http://msdn.microsoft.com/en-us/library/windows/desktop/ff476180(v=vs.85).aspx</a> [Accessed: 19 Mar 2014].</p>
<p><a id="D3D11_INPUT_CLASSIFICATION"></a>[50] Msdn.microsoft.com. (2014). D3D11_INPUT_CLASSIFICATION enumeration (Windows). [online] Retrieved from: <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff476179(v=vs.85).aspx" title="D3D11_INPUT_CLASSIFICATION enumeration" target="_blank">http://msdn.microsoft.com/en-us/library/windows/desktop/ff476179(v=vs.85).aspx</a> [Accessed: 19 Mar 2014].</p>
<p><a id="UpdateSubresource"></a>[51] Msdn.microsoft.com. (2014). ID3D11DeviceContext::UpdateSubresource method (Windows). [online] Retrieved from: <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff476486(v=vs.85).aspx" title="ID3D11DeviceContext::UpdateSubresource method" target="_blank">http://msdn.microsoft.com/en-us/library/windows/desktop/ff476486(v=vs.85).aspx</a> [Accessed: 20 Mar 2014].</p>
<p><a id="WindowProc"></a>[52] Msdn.microsoft.com. (2014). WindowProc callback function (Windows). [online] Retrieved from: <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ms633573(v=vs.85).aspx" title="WindowProc callback function" target="_blank">http://msdn.microsoft.com/en-us/library/windows/desktop/ms633573(v=vs.85).aspx</a> [Accessed: 20 Mar 2014].</p>
<p><a id="TranslateMessage"></a>[53] Msdn.microsoft.com. (2014). TranslateMessage function (Windows). [online] Retrieved from: <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ms644955(v=vs.85).aspx" title="TranslateMessage function" target="_blank">http://msdn.microsoft.com/en-us/library/windows/desktop/ms644955(v=vs.85).aspx</a> [Accessed: 20 Mar 2014].</p>
<p><a id="DispatchMessage"></a>[54] Msdn.microsoft.com. (2014). DispatchMessage function (Windows). [online] Retrieved from: <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ms644934(v=vs.85).aspx" title="DispatchMessage function" target="_blank">http://msdn.microsoft.com/en-us/library/windows/desktop/ms644934(v=vs.85).aspx</a> [Accessed: 20 Mar 2014].</p>
<p><a id="Present"></a>[55] Msdn.microsoft.com. (2014). IDXGISwapChain::Present method (Windows). [online] Retrieved from: <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/bb174576(v=vs.85).aspx" title="IDXGISwapChain::Present method" target="_blank">http://msdn.microsoft.com/en-us/library/windows/desktop/bb174576(v=vs.85).aspx</a> [Accessed: 21 Mar 2014].</p>
<p><a id="IASetVertexBuffers"></a>[56] Msdn.microsoft.com. (2014). ID3D11DeviceContext::IASetVertexBuffers method (Windows). [online] Retrieved from: <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff476456(v=vs.85).aspx" title="ID3D11DeviceContext::IASetVertexBuffers method" target="_blank">http://msdn.microsoft.com/en-us/library/windows/desktop/ff476456(v=vs.85).aspx</a> [Accessed: 21 Mar 2014].</p>
<p><a id="IASetIndexBuffer"></a>[57] Msdn.microsoft.com. (2014). ID3D11DeviceContext::IASetIndexBuffer method (Windows). [online] Retrieved from: <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff476453(v=vs.85).aspx" title="ID3D11DeviceContext::IASetIndexBuffer method" target="_blank">http://msdn.microsoft.com/en-us/library/windows/desktop/ff476453(v=vs.85).aspx</a> [Accessed: 21 Mar 2014].</p>
<p><a id="VSSetShader"></a>[58] Msdn.microsoft.com. (2014). ID3D11DeviceContext::VSSetShader method (Windows). [online] Retrieved from: <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff476493(v=vs.85).aspx" title="ID3D11DeviceContext::VSSetShader method" target="_blank">http://msdn.microsoft.com/en-us/library/windows/desktop/ff476493(v=vs.85).aspx</a> [Accessed: 21 Mar 2014].</p>
<p><a id="RSSetViewports"></a>[59] Msdn.microsoft.com. (2014). ID3D11DeviceContext::RSSetViewports method (Windows). [online] Retrieved from: <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff476480(v=vs.85).aspx" title="ID3D11DeviceContext::RSSetViewports method" target="_blank">http://msdn.microsoft.com/en-us/library/windows/desktop/ff476480(v=vs.85).aspx</a> [Accessed: 21 Mar 2014]. </p>
<p><a id="OMSetRenderTargets"></a>[60] Msdn.microsoft.com. (2014). ID3D11DeviceContext::OMSetRenderTargets method (Windows). [online] Retrieved from: <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff476464(v=vs.85).aspx" title="ID3D11DeviceContext::OMSetRenderTargets method" target="_blank">http://msdn.microsoft.com/en-us/library/windows/desktop/ff476464(v=vs.85).aspx</a> [Accessed: 21 Mar 2014]. </p>
<p><a id="OMSetDepthStencilState"></a>[61] Msdn.microsoft.com. (2014). ID3D11DeviceContext::OMSetDepthStencilState method (Windows). [online] Retrieved from: <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ff476463(v=vs.85).aspx" title="ID3D11DeviceContext::OMSetDepthStencilState method" target="_blank">http://msdn.microsoft.com/en-us/library/windows/desktop/ff476463(v=vs.85).aspx</a> [Accessed: 21 Mar 2014]. </p>
<p><a id="DrawIndexed&gt;&lt;/a&gt;[62] Msdn.microsoft.com. (2014). ID3D11DeviceContext::DrawIndexed method (Windows). [online] Retrieved from: &lt;a href=" http:="" msdn.microsoft.com="" en-us="" library="" windows="" desktop="" ff476409(v="vs.85).aspx&quot;" title="ID3D11DeviceContext::DrawIndexed method" target="_blank">http://msdn.microsoft.com/en-us/library/windows/desktop/ff476409(v=vs.85).aspx</a> [Accessed: 21 Mar 2014].</p>
<p><a id="DX11_Game_Programming"></a>[63] Sherrod, A. &amp; Jones, W. (2012). Beginning directx 11 game programming. Boston, MA: Course Technology.</p>
</div>
<footer class="entry-meta">
This entry was posted in <a href="https://www.3dgep.com/category/graphics-programming/directx/" rel="category tag">DirectX</a>, <a href="https://www.3dgep.com/category/graphics-programming/" rel="category tag">Graphics Programming</a> and tagged <a href="https://www.3dgep.com/tag/3d/" rel="tag">3D</a>, <a href="https://www.3dgep.com/tag/constant-buffer/" rel="tag">Constant Buffer</a>, <a href="https://www.3dgep.com/tag/direct3d/" rel="tag">Direct3D</a>, <a href="https://www.3dgep.com/tag/directx-11/" rel="tag">DirectX 11</a>, <a href="https://www.3dgep.com/tag/games/" rel="tag">games</a>, <a href="https://www.3dgep.com/tag/graphics/" rel="tag">Graphics</a>, <a href="https://www.3dgep.com/tag/hlsl/" rel="tag">HLSL</a>, <a href="https://www.3dgep.com/tag/index-buffer/" rel="tag">Index Buffer</a>, <a href="https://www.3dgep.com/tag/input-assembler/" rel="tag">Input-Assembler</a>, <a href="https://www.3dgep.com/tag/pixel-shader/" rel="tag">Pixel Shader</a>, <a href="https://www.3dgep.com/tag/programming/" rel="tag">Programming</a>, <a href="https://www.3dgep.com/tag/vertex-buffer/" rel="tag">Vertex Buffer</a>, <a href="https://www.3dgep.com/tag/vertex-shader/" rel="tag">Vertex Shader</a> by <a href="https://www.3dgep.com/author/jeremiah/">Jeremiah van Oosten</a>. Bookmark the <a href="https://www.3dgep.com/introduction-to-directx-11/" title="Permalink to Introduction to DirectX 11" rel="bookmark">permalink</a>.
</footer>
</article>
<div id="comments">
<h2 id="comments-title">
20 thoughts on “<span>Introduction to DirectX 11</span>” </h2>
<ol class="commentlist">
<li class="comment even thread-even depth-1" id="li-comment-24172">
<article id="comment-24172" class="comment">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt="" src="./Introduction to DirectX 113D Game Engine Programming_files/9f14ab112e96943a469b6b9f3d92cc6f" srcset="https://secure.gravatar.com/avatar/9f14ab112e96943a469b6b9f3d92cc6f?s=136&amp;d=mm&amp;r=g 2x" class="avatar avatar-68 photo" height="68" width="68"><span class="fn">John Smith</span> on <a href="https://www.3dgep.com/introduction-to-directx-11/#comment-24172"><time datetime="2014-06-12T01:59:08+00:00">June 12, 2014 at 1:59 am</time></a> <span class="says">said:</span>
</div>
</footer>
<div class="comment-content"><p>Damn, you really put some effort into thing, gj.</p>
</div>
<div class="reply">
<a rel="nofollow" class="comment-reply-link" href="https://www.3dgep.com/introduction-to-directx-11/?replytocom=24172#respond" onclick="return addComment.moveForm( &quot;comment-24172&quot;, &quot;24172&quot;, &quot;respond&quot;, &quot;5553&quot; )" aria-label="Reply to John Smith">Reply <span>↓</span></a> </div>
</article>
</li>
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-24957">
<article id="comment-24957" class="comment">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt="" src="./Introduction to DirectX 113D Game Engine Programming_files/9b8a47fe0ece93d54dfbb0fa17e15384" srcset="https://secure.gravatar.com/avatar/9b8a47fe0ece93d54dfbb0fa17e15384?s=136&amp;d=mm&amp;r=g 2x" class="avatar avatar-68 photo" height="68" width="68"><span class="fn"><a href="http://www.volgogradetzzz.blogspot.com/" rel="external nofollow" class="url">nikita</a></span> on <a href="https://www.3dgep.com/introduction-to-directx-11/#comment-24957"><time datetime="2014-07-02T23:07:28+00:00">July 2, 2014 at 11:07 pm</time></a> <span class="says">said:</span>
</div>
</footer>
<div class="comment-content"><p>Wow. One of the best tutorials I’ve ever seen on subject. Please, don’t stop. Great job!</p>
</div>
<div class="reply">
<a rel="nofollow" class="comment-reply-link" href="https://www.3dgep.com/introduction-to-directx-11/?replytocom=24957#respond" onclick="return addComment.moveForm( &quot;comment-24957&quot;, &quot;24957&quot;, &quot;respond&quot;, &quot;5553&quot; )" aria-label="Reply to nikita">Reply <span>↓</span></a> </div>
</article>
</li>
<li class="comment even thread-even depth-1" id="li-comment-34280">
<article id="comment-34280" class="comment">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt="" src="./Introduction to DirectX 113D Game Engine Programming_files/8d4da6e3c442152de06d514a69ad5dc0" srcset="https://secure.gravatar.com/avatar/8d4da6e3c442152de06d514a69ad5dc0?s=136&amp;d=mm&amp;r=g 2x" class="avatar avatar-68 photo" height="68" width="68"><span class="fn">Haris</span> on <a href="https://www.3dgep.com/introduction-to-directx-11/#comment-34280"><time datetime="2014-10-24T02:02:02+00:00">October 24, 2014 at 2:02 am</time></a> <span class="says">said:</span>
</div>
</footer>
<div class="comment-content"><p>This is just great. Thank you so much. Using C# and various frameworks (XNA, libGDX), also Unity engine. I decided to take a look at Direct3D API. If you have some tips to share on terrain rendering please add it to your todo (if your time allows). </p>
<p>But this intro only is worth a lot. Thank you once again.</p>
</div>
<div class="reply">
<a rel="nofollow" class="comment-reply-link" href="https://www.3dgep.com/introduction-to-directx-11/?replytocom=34280#respond" onclick="return addComment.moveForm( &quot;comment-34280&quot;, &quot;34280&quot;, &quot;respond&quot;, &quot;5553&quot; )" aria-label="Reply to Haris">Reply <span>↓</span></a> </div>
</article>
</li>
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-39151">
<article id="comment-39151" class="comment">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt="" src="./Introduction to DirectX 113D Game Engine Programming_files/e639d1bbeb63c77899d704abe6fc98a7" srcset="https://secure.gravatar.com/avatar/e639d1bbeb63c77899d704abe6fc98a7?s=136&amp;d=mm&amp;r=g 2x" class="avatar avatar-68 photo" height="68" width="68"><span class="fn">Spyter</span> on <a href="https://www.3dgep.com/introduction-to-directx-11/#comment-39151"><time datetime="2014-12-29T16:34:09+00:00">December 29, 2014 at 4:34 pm</time></a> <span class="says">said:</span>
</div>
</footer>
<div class="comment-content"><p>Awesome tutorial! Been looking all over the web for something like this – its fantastic! Thanks for taking the time to write it and document out all the details, its very easy to follow and very well written! This is what every C++ game programming book *should* start with! Kudos!!</p>
</div>
<div class="reply">
<a rel="nofollow" class="comment-reply-link" href="https://www.3dgep.com/introduction-to-directx-11/?replytocom=39151#respond" onclick="return addComment.moveForm( &quot;comment-39151&quot;, &quot;39151&quot;, &quot;respond&quot;, &quot;5553&quot; )" aria-label="Reply to Spyter">Reply <span>↓</span></a> </div>
</article>
</li>
<li class="comment even thread-even depth-1" id="li-comment-40146">
<article id="comment-40146" class="comment">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt="" src="./Introduction to DirectX 113D Game Engine Programming_files/ff07f8499b18e58a28098e08c0f11ee9" srcset="https://secure.gravatar.com/avatar/ff07f8499b18e58a28098e08c0f11ee9?s=136&amp;d=mm&amp;r=g 2x" class="avatar avatar-68 photo" height="68" width="68"><span class="fn"><a href="http://www.greenygames.com/" rel="external nofollow" class="url">Dale Green</a></span> on <a href="https://www.3dgep.com/introduction-to-directx-11/#comment-40146"><time datetime="2015-01-27T15:54:55+00:00">January 27, 2015 at 3:54 pm</time></a> <span class="says">said:</span>
</div>
</footer>
<div class="comment-content"><p>Thanks for this awesome tutorial!</p>
<p>Thought you’d like to know, I’m a University student and we’re in the process of moving from Dx9 to Dx11 and we’ve all been pointer here to get started.</p>
<p>Again, many thanks for such an in-depth tutorial on the subject. <img draggable="false" class="emoji" alt="🙂" src="./Introduction to DirectX 113D Game Engine Programming_files/1f642.svg"></p>
</div>
<div class="reply">
<a rel="nofollow" class="comment-reply-link" href="https://www.3dgep.com/introduction-to-directx-11/?replytocom=40146#respond" onclick="return addComment.moveForm( &quot;comment-40146&quot;, &quot;40146&quot;, &quot;respond&quot;, &quot;5553&quot; )" aria-label="Reply to Dale Green">Reply <span>↓</span></a> </div>
</article>
</li>
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-40225">
<article id="comment-40225" class="comment">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt="" src="./Introduction to DirectX 113D Game Engine Programming_files/3796f43233da8cc92fedf67d51490ac9" srcset="https://secure.gravatar.com/avatar/3796f43233da8cc92fedf67d51490ac9?s=136&amp;d=mm&amp;r=g 2x" class="avatar avatar-68 photo" height="68" width="68"><span class="fn"><a href="http://thanksalotforyourhelp%21/" rel="external nofollow" class="url">Nick</a></span> on <a href="https://www.3dgep.com/introduction-to-directx-11/#comment-40225"><time datetime="2015-01-30T02:38:42+00:00">January 30, 2015 at 2:38 am</time></a> <span class="says">said:</span>
</div>
</footer>
<div class="comment-content"><p>If you follow this tutorial and are a beginer like me, you may hane some issues, here’s the ones I got. Include , and go to (VS) Tools-&gt;Options-&gt;Debugging-&gt;Symbols, then check “Microsoft Symbol Servers”. You may also have some issues with precompiling headers, for the sake of following the tutorial completely I disabled it. Great tutorial ! Thanks a lot !</p>
</div>
<div class="reply">
<a rel="nofollow" class="comment-reply-link" href="https://www.3dgep.com/introduction-to-directx-11/?replytocom=40225#respond" onclick="return addComment.moveForm( &quot;comment-40225&quot;, &quot;40225&quot;, &quot;respond&quot;, &quot;5553&quot; )" aria-label="Reply to Nick">Reply <span>↓</span></a> </div>
</article>
</li>
<li class="comment even thread-even depth-1" id="li-comment-40226">
<article id="comment-40226" class="comment">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt="" src="./Introduction to DirectX 113D Game Engine Programming_files/3796f43233da8cc92fedf67d51490ac9" srcset="https://secure.gravatar.com/avatar/3796f43233da8cc92fedf67d51490ac9?s=136&amp;d=mm&amp;r=g 2x" class="avatar avatar-68 photo" height="68" width="68"><span class="fn"><a href="http://thanksalotforyourhelp%21/" rel="external nofollow" class="url">Nick</a></span> on <a href="https://www.3dgep.com/introduction-to-directx-11/#comment-40226"><time datetime="2015-01-30T02:39:58+00:00">January 30, 2015 at 2:39 am</time></a> <span class="says">said:</span>
</div>
</footer>
<div class="comment-content"><p>I meant include alogrithm header.</p>
</div>
<div class="reply">
<a rel="nofollow" class="comment-reply-link" href="https://www.3dgep.com/introduction-to-directx-11/?replytocom=40226#respond" onclick="return addComment.moveForm( &quot;comment-40226&quot;, &quot;40226&quot;, &quot;respond&quot;, &quot;5553&quot; )" aria-label="Reply to Nick">Reply <span>↓</span></a> </div>
</article>
<ul class="children">
<li class="comment byuser comment-author-jeremiah bypostauthor odd alt depth-2" id="li-comment-44814">
<article id="comment-44814" class="comment">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt="" src="./Introduction to DirectX 113D Game Engine Programming_files/00f2d6dcb1d4602c73bb571194789ab0" srcset="https://secure.gravatar.com/avatar/00f2d6dcb1d4602c73bb571194789ab0?s=78&amp;d=mm&amp;r=g 2x" class="avatar avatar-39 photo" height="39" width="39"><span class="fn"><a href="http://3dgep.com/" rel="external nofollow" class="url">Jeremiah van Oosten</a></span> on <a href="https://www.3dgep.com/introduction-to-directx-11/#comment-44814"><time datetime="2015-07-20T09:45:07+00:00">July 20, 2015 at 9:45 am</time></a> <span class="says">said:</span>
</div>
</footer>
<div class="comment-content"><p>Nick,</p>
<p>Yes, the &lt;algorithm&gt; header was not required when I initially wrote this article using Visual Studio 2012 (I suppose it was included by another header with VS2012). When switching to Visual Studio 2013, the &lt;algorithm&gt; header needed to be explicitly included for the std::min and std::max functions.</p>
</div>
<div class="reply">
<a rel="nofollow" class="comment-reply-link" href="https://www.3dgep.com/introduction-to-directx-11/?replytocom=44814#respond" onclick="return addComment.moveForm( &quot;comment-44814&quot;, &quot;44814&quot;, &quot;respond&quot;, &quot;5553&quot; )" aria-label="Reply to Jeremiah van Oosten">Reply <span>↓</span></a> </div>
</article>
</li>
</ul>
</li>
<li class="comment even thread-odd thread-alt depth-1" id="li-comment-40261">
<article id="comment-40261" class="comment">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt="" src="./Introduction to DirectX 113D Game Engine Programming_files/a7a10f38f77bae8565f96a91c12dddd4" srcset="https://secure.gravatar.com/avatar/a7a10f38f77bae8565f96a91c12dddd4?s=136&amp;d=mm&amp;r=g 2x" class="avatar avatar-68 photo" height="68" width="68"><span class="fn">Arvid</span> on <a href="https://www.3dgep.com/introduction-to-directx-11/#comment-40261"><time datetime="2015-01-30T20:22:46+00:00">January 30, 2015 at 8:22 pm</time></a> <span class="says">said:</span>
</div>
</footer>
<div class="comment-content"><p>I am still learning but I live this tutorial. Instead of using VS2012 I use VS2013 Community.<br>
In order for me to get the code working I needed to include the library “#include &lt;algorithm&gt;”. Without I was not able to use ‘std::min’</p>
</div>
<div class="reply">
<a rel="nofollow" class="comment-reply-link" href="https://www.3dgep.com/introduction-to-directx-11/?replytocom=40261#respond" onclick="return addComment.moveForm( &quot;comment-40261&quot;, &quot;40261&quot;, &quot;respond&quot;, &quot;5553&quot; )" aria-label="Reply to Arvid">Reply <span>↓</span></a> </div>
</article>
</li>
<li class="comment odd alt thread-even depth-1" id="li-comment-40842">
<article id="comment-40842" class="comment">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt="" src="./Introduction to DirectX 113D Game Engine Programming_files/62fff18b42f9cd9db7b67c782ec8339a" srcset="https://secure.gravatar.com/avatar/62fff18b42f9cd9db7b67c782ec8339a?s=136&amp;d=mm&amp;r=g 2x" class="avatar avatar-68 photo" height="68" width="68"><span class="fn">Chris</span> on <a href="https://www.3dgep.com/introduction-to-directx-11/#comment-40842"><time datetime="2015-02-17T14:02:51+00:00">February 17, 2015 at 2:02 pm</time></a> <span class="says">said:</span>
</div>
</footer>
<div class="comment-content"><p>Best DirectX 11 introduction!! Thanks a lot!</p>
</div>
<div class="reply">
<a rel="nofollow" class="comment-reply-link" href="https://www.3dgep.com/introduction-to-directx-11/?replytocom=40842#respond" onclick="return addComment.moveForm( &quot;comment-40842&quot;, &quot;40842&quot;, &quot;respond&quot;, &quot;5553&quot; )" aria-label="Reply to Chris">Reply <span>↓</span></a> </div>
</article>
</li>
<li class="comment even thread-odd thread-alt depth-1" id="li-comment-44748">
<article id="comment-44748" class="comment">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt="" src="./Introduction to DirectX 113D Game Engine Programming_files/2d525ac597fb7284e701bb0cdd9e93ed" srcset="https://secure.gravatar.com/avatar/2d525ac597fb7284e701bb0cdd9e93ed?s=136&amp;d=mm&amp;r=g 2x" class="avatar avatar-68 photo" height="68" width="68"><span class="fn">Julien</span> on <a href="https://www.3dgep.com/introduction-to-directx-11/#comment-44748"><time datetime="2015-07-17T18:37:41+00:00">July 17, 2015 at 6:37 pm</time></a> <span class="says">said:</span>
</div>
</footer>
<div class="comment-content"><p>Hi, thanks for a great tutorial!</p>
<p>Have you got any example at loading a shader directly from .hlsl source ?</p>
<p>I am stuck with using the LoadShader function because then the CreateInputLayout function requires a shader blob. How do I get it ??</p>
<p>Additionnaly is there a way to compile a shader from a string input like OpenGL does ?</p>
<p>Thanks.</p>
</div>
<div class="reply">
<a rel="nofollow" class="comment-reply-link" href="https://www.3dgep.com/introduction-to-directx-11/?replytocom=44748#respond" onclick="return addComment.moveForm( &quot;comment-44748&quot;, &quot;44748&quot;, &quot;respond&quot;, &quot;5553&quot; )" aria-label="Reply to Julien">Reply <span>↓</span></a> </div>
</article>
<ul class="children">
<li class="comment byuser comment-author-jeremiah bypostauthor odd alt depth-2" id="li-comment-44813">
<article id="comment-44813" class="comment">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt="" src="./Introduction to DirectX 113D Game Engine Programming_files/00f2d6dcb1d4602c73bb571194789ab0" srcset="https://secure.gravatar.com/avatar/00f2d6dcb1d4602c73bb571194789ab0?s=78&amp;d=mm&amp;r=g 2x" class="avatar avatar-39 photo" height="39" width="39"><span class="fn"><a href="http://3dgep.com/" rel="external nofollow" class="url">Jeremiah van Oosten</a></span> on <a href="https://www.3dgep.com/introduction-to-directx-11/#comment-44813"><time datetime="2015-07-20T09:39:27+00:00">July 20, 2015 at 9:39 am</time></a> <span class="says">said:</span>
</div>
</footer>
<div class="comment-content"><p>Julien,</p>
<p>The example to compile a shader from a file at runtime is explained here:<br>
<a href="http://www.3dgep.com/introduction-to-directx-11/#Runtime_Compiled_Shader" rel="nofollow">http://www.3dgep.com/introduction-to-directx-11/#Runtime_Compiled_Shader</a><br>
<a href="http://www.3dgep.com/introduction-to-directx-11/#Load_and_Compile_at_Runtime" rel="nofollow">http://www.3dgep.com/introduction-to-directx-11/#Load_and_Compile_at_Runtime</a></p>
<p>And to build the input layout from the shader blob:</p>
<p><a href="http://www.3dgep.com/introduction-to-directx-11/#Input_Layout" rel="nofollow">http://www.3dgep.com/introduction-to-directx-11/#Input_Layout</a></p>
<p>To load a shader from a string you use the <strong>D3DCompile</strong> function:</p>
<p><a href="https://msdn.microsoft.com/en-us/library/dd607324(v=vs.85).aspx" target="_blank" rel="nofollow"></a><a href="https://msdn.microsoft.com/en-us/library/dd607324(v=vs.85)" rel="nofollow">https://msdn.microsoft.com/en-us/library/dd607324(v=vs.85)</a>.aspx</p>
</div>
<div class="reply">
<a rel="nofollow" class="comment-reply-link" href="https://www.3dgep.com/introduction-to-directx-11/?replytocom=44813#respond" onclick="return addComment.moveForm( &quot;comment-44813&quot;, &quot;44813&quot;, &quot;respond&quot;, &quot;5553&quot; )" aria-label="Reply to Jeremiah van Oosten">Reply <span>↓</span></a> </div>
</article>
<ul class="children">
<li class="comment even depth-3" id="li-comment-44841">
<article id="comment-44841" class="comment">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt="" src="./Introduction to DirectX 113D Game Engine Programming_files/2d525ac597fb7284e701bb0cdd9e93ed(1)" srcset="https://secure.gravatar.com/avatar/2d525ac597fb7284e701bb0cdd9e93ed?s=78&amp;d=mm&amp;r=g 2x" class="avatar avatar-39 photo" height="39" width="39"><span class="fn">Julien</span> on <a href="https://www.3dgep.com/introduction-to-directx-11/#comment-44841"><time datetime="2015-07-21T01:13:51+00:00">July 21, 2015 at 1:13 am</time></a> <span class="says">said:</span>
</div>
</footer>
<div class="comment-content"><p>What I don’t understand is : at the point of calling the g_d3dDevice-&gt;CreateInputLayout function, we don’t have a shader blob available (if using the LoadShader func.) because the shader blob is created inside the LoadShader func. and gone at the time a call is made to g_d3dDevice-&gt;CreateInputLayout.</p>
<p>I can’t just do this right : hr = g_d3dDevice-&gt;CreateInputLayout(vertexLayoutDesc, _countof(vertexLayoutDesc), &amp;g_d3dVertexShader, sizeof(g_d3dVertexShader), &amp;g_d3dInputLayout); ???</p>
</div>
<div class="reply">
<a rel="nofollow" class="comment-reply-link" href="https://www.3dgep.com/introduction-to-directx-11/?replytocom=44841#respond" onclick="return addComment.moveForm( &quot;comment-44841&quot;, &quot;44841&quot;, &quot;respond&quot;, &quot;5553&quot; )" aria-label="Reply to Julien">Reply <span>↓</span></a> </div>
</article>
<ul class="children">
<li class="comment byuser comment-author-jeremiah bypostauthor odd alt depth-4" id="li-comment-45661">
<article id="comment-45661" class="comment">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt="" src="./Introduction to DirectX 113D Game Engine Programming_files/00f2d6dcb1d4602c73bb571194789ab0" srcset="https://secure.gravatar.com/avatar/00f2d6dcb1d4602c73bb571194789ab0?s=78&amp;d=mm&amp;r=g 2x" class="avatar avatar-39 photo" height="39" width="39"><span class="fn"><a href="http://3dgep.com/" rel="external nofollow" class="url">Jeremiah van Oosten</a></span> on <a href="https://www.3dgep.com/introduction-to-directx-11/#comment-45661"><time datetime="2015-08-12T18:45:10+00:00">August 12, 2015 at 6:45 pm</time></a> <span class="says">said:</span>
</div>
</footer>
<div class="comment-content"><p>Julien,</p>
<p>In this tutorial I simply wanted to show you how you could load and compile a shader at runtime. If you look at the LoadContent function, you will see that I’m not actually using LoadShader function (it’s commented out). You are correct about the CreateInputLayout function. It needs the shader blob (not the Shader object that you get back from ID3D11Device::CreateVertexShader).</p>
<p>The problem is that the LoadShader function would need to know about the layout of the input attributes but it can’t know that without reflecting the shader object. This is possible, but I didn’t do that in this tutorial because I wanted to keep it simple.</p>
<p>For a detailed method to generate the input layout automatically using shader reflection, see this clip I made on pastebin:</p>
<p><a href="http://pastebin.com/YvW9Zhs3" rel="nofollow">http://pastebin.com/YvW9Zhs3</a></p>
<p>Keep in mind, there are some drawbacks to using this method to automatically build the input layout. The biggest drawback being that the reflection library can’t tell if something is a per-vertex attribute or a per-instance attribute. </p>
<p>Another drawback is that the reflection library can’t know your buffer layout. I just send each attribute in a separate buffer so each buffer will have a unique input slot.</p>
<p>I hope this helps.</p>
</div>
<div class="reply">
<a rel="nofollow" class="comment-reply-link" href="https://www.3dgep.com/introduction-to-directx-11/?replytocom=45661#respond" onclick="return addComment.moveForm( &quot;comment-45661&quot;, &quot;45661&quot;, &quot;respond&quot;, &quot;5553&quot; )" aria-label="Reply to Jeremiah van Oosten">Reply <span>↓</span></a> </div>
</article>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="comment even thread-even depth-1" id="li-comment-55353">
<article id="comment-55353" class="comment">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt="" src="./Introduction to DirectX 113D Game Engine Programming_files/13eb43ce33780f21509219eb907b434a" srcset="https://secure.gravatar.com/avatar/13eb43ce33780f21509219eb907b434a?s=136&amp;d=mm&amp;r=g 2x" class="avatar avatar-68 photo" height="68" width="68"><span class="fn">Soslan</span> on <a href="https://www.3dgep.com/introduction-to-directx-11/#comment-55353"><time datetime="2017-02-22T21:22:10+00:00">February 22, 2017 at 9:22 pm</time></a> <span class="says">said:</span>
</div>
</footer>
<div class="comment-content"><p>Excellent tutorial! But link to source code doesn’t work.</p>
</div>
<div class="reply">
<a rel="nofollow" class="comment-reply-link" href="https://www.3dgep.com/introduction-to-directx-11/?replytocom=55353#respond" onclick="return addComment.moveForm( &quot;comment-55353&quot;, &quot;55353&quot;, &quot;respond&quot;, &quot;5553&quot; )" aria-label="Reply to Soslan">Reply <span>↓</span></a> </div>
</article>
<ul class="children">
<li class="comment byuser comment-author-jeremiah bypostauthor odd alt depth-2" id="li-comment-55360">
<article id="comment-55360" class="comment">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt="" src="./Introduction to DirectX 113D Game Engine Programming_files/00f2d6dcb1d4602c73bb571194789ab0" srcset="https://secure.gravatar.com/avatar/00f2d6dcb1d4602c73bb571194789ab0?s=78&amp;d=mm&amp;r=g 2x" class="avatar avatar-39 photo" height="39" width="39"><span class="fn"><a href="http://3dgep.com/" rel="external nofollow" class="url">Jeremiah van Oosten</a></span> on <a href="https://www.3dgep.com/introduction-to-directx-11/#comment-55360"><time datetime="2017-02-23T13:42:10+00:00">February 23, 2017 at 1:42 pm</time></a> <span class="says">said:</span>
</div>
</footer>
<div class="comment-content"><p>Soslan,</p>
<p>Thanks for pointing this out. I’ve updated the link. It should work now.</p>
</div>
<div class="reply">
<a rel="nofollow" class="comment-reply-link" href="https://www.3dgep.com/introduction-to-directx-11/?replytocom=55360#respond" onclick="return addComment.moveForm( &quot;comment-55360&quot;, &quot;55360&quot;, &quot;respond&quot;, &quot;5553&quot; )" aria-label="Reply to Jeremiah van Oosten">Reply <span>↓</span></a> </div>
</article>
<ul class="children">
<li class="comment even depth-3" id="li-comment-55389">
<article id="comment-55389" class="comment">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt="" src="./Introduction to DirectX 113D Game Engine Programming_files/85b2313f4db3e279295cb4a89f9feb28" srcset="https://secure.gravatar.com/avatar/85b2313f4db3e279295cb4a89f9feb28?s=78&amp;d=mm&amp;r=g 2x" class="avatar avatar-39 photo" height="39" width="39"><span class="fn">Soslan</span> on <a href="https://www.3dgep.com/introduction-to-directx-11/#comment-55389"><time datetime="2017-02-24T22:06:47+00:00">February 24, 2017 at 10:06 pm</time></a> <span class="says">said:</span>
</div>
</footer>
<div class="comment-content"><p>Sorce code does’t comply with Article.</p>
</div>
<div class="reply">
<a rel="nofollow" class="comment-reply-link" href="https://www.3dgep.com/introduction-to-directx-11/?replytocom=55389#respond" onclick="return addComment.moveForm( &quot;comment-55389&quot;, &quot;55389&quot;, &quot;respond&quot;, &quot;5553&quot; )" aria-label="Reply to Soslan">Reply <span>↓</span></a> </div>
</article>
<ul class="children">
<li class="comment byuser comment-author-jeremiah bypostauthor odd alt depth-4" id="li-comment-55593">
<article id="comment-55593" class="comment">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt="" src="./Introduction to DirectX 113D Game Engine Programming_files/00f2d6dcb1d4602c73bb571194789ab0" srcset="https://secure.gravatar.com/avatar/00f2d6dcb1d4602c73bb571194789ab0?s=78&amp;d=mm&amp;r=g 2x" class="avatar avatar-39 photo" height="39" width="39"><span class="fn"><a href="http://3dgep.com/" rel="external nofollow" class="url">Jeremiah van Oosten</a></span> on <a href="https://www.3dgep.com/introduction-to-directx-11/#comment-55593"><time datetime="2017-03-07T12:45:28+00:00">March 7, 2017 at 12:45 pm</time></a> <span class="says">said:</span>
</div>
</footer>
<div class="comment-content"><p>Soslan,</p>
<p>Sorry about that! I had 2 files with the same name and I accidentally linked the wrong one. The link has now been fixed (really this time).</p>
</div>
<div class="reply">
<a rel="nofollow" class="comment-reply-link" href="https://www.3dgep.com/introduction-to-directx-11/?replytocom=55593#respond" onclick="return addComment.moveForm( &quot;comment-55593&quot;, &quot;55593&quot;, &quot;respond&quot;, &quot;5553&quot; )" aria-label="Reply to Jeremiah van Oosten">Reply <span>↓</span></a> </div>
</article>
</li>
</ul>
</li>
<li class="comment even depth-3" id="li-comment-55428">
<article id="comment-55428" class="comment">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt="" src="./Introduction to DirectX 113D Game Engine Programming_files/8ca34daa5f218b08dbef83e77c3045fa" srcset="https://secure.gravatar.com/avatar/8ca34daa5f218b08dbef83e77c3045fa?s=78&amp;d=mm&amp;r=g 2x" class="avatar avatar-39 photo" height="39" width="39"><span class="fn">Kurt</span> on <a href="https://www.3dgep.com/introduction-to-directx-11/#comment-55428"><time datetime="2017-03-01T14:25:09+00:00">March 1, 2017 at 2:25 pm</time></a> <span class="says">said:</span>
</div>
</footer>
<div class="comment-content"><p>Hi JvO,<br>
your tutorial is really very helpful , but –<br>
the ‘updated’ link seems to point to a wrong file, please check again.</p>
<p>Thanks<br>
Kurt</p>
</div>
<div class="reply">
<a rel="nofollow" class="comment-reply-link" href="https://www.3dgep.com/introduction-to-directx-11/?replytocom=55428#respond" onclick="return addComment.moveForm( &quot;comment-55428&quot;, &quot;55428&quot;, &quot;respond&quot;, &quot;5553&quot; )" aria-label="Reply to Kurt">Reply <span>↓</span></a> </div>
</article>
<ul class="children">
<li class="comment byuser comment-author-jeremiah bypostauthor odd alt depth-4" id="li-comment-55578">
<article id="comment-55578" class="comment">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt="" src="./Introduction to DirectX 113D Game Engine Programming_files/00f2d6dcb1d4602c73bb571194789ab0" srcset="https://secure.gravatar.com/avatar/00f2d6dcb1d4602c73bb571194789ab0?s=78&amp;d=mm&amp;r=g 2x" class="avatar avatar-39 photo" height="39" width="39"><span class="fn"><a href="http://3dgep.com/" rel="external nofollow" class="url">Jeremiah van Oosten</a></span> on <a href="https://www.3dgep.com/introduction-to-directx-11/#comment-55578"><time datetime="2017-03-07T11:51:10+00:00">March 7, 2017 at 11:51 am</time></a> <span class="says">said:</span>
</div>
</footer>
<div class="comment-content"><p>Oops! You are right! That was the link to my DX9 template project <img draggable="false" class="emoji" alt="🙁" src="./Introduction to DirectX 113D Game Engine Programming_files/1f641.svg"></p>
<p>I’ve updated the link (again) and now with the correct link.</p>
</div>
<div class="reply">
<a rel="nofollow" class="comment-reply-link" href="https://www.3dgep.com/introduction-to-directx-11/?replytocom=55578#respond" onclick="return addComment.moveForm( &quot;comment-55578&quot;, &quot;55578&quot;, &quot;respond&quot;, &quot;5553&quot; )" aria-label="Reply to Jeremiah van Oosten">Reply <span>↓</span></a> </div>
</article>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ol>
<div id="respond" class="comment-respond">
<h3 id="reply-title" class="comment-reply-title">Leave a Reply <small><a rel="nofollow" id="cancel-comment-reply-link" href="https://www.3dgep.com/introduction-to-directx-11/#respond" style="display:none;">Cancel reply</a></small></h3> <form action="https://www.3dgep.com/wp-comments-post.php" method="post" id="commentform" class="comment-form">
<p class="comment-notes"><span id="email-notes">Your email address will not be published.</span> Required fields are marked <span class="required">*</span></p><p class="comment-form-comment"><label for="comment">Comment</label> <textarea id="comment" name="comment" cols="45" rows="8" maxlength="65525" aria-required="true" required="required"></textarea></p><p class="comment-form-author"><label for="author">Name <span class="required">*</span></label> <input id="author" name="author" type="text" value="" size="30" maxlength="245" aria-required="true" required="required"></p>
<p class="comment-form-email"><label for="email">Email <span class="required">*</span></label> <input id="email" name="email" type="text" value="" size="30" maxlength="100" aria-describedby="email-notes" aria-required="true" required="required"></p>
<p class="comment-form-url"><label for="url">Website</label> <input id="url" name="url" type="text" value="" size="30" maxlength="200"></p>
<p class="form-submit"><input name="submit" type="submit" id="submit" class="submit" value="Post Comment"> <input type="hidden" name="comment_post_ID" value="5553" id="comment_post_ID">
<input type="hidden" name="comment_parent" id="comment_parent" value="0">
</p><p style="display: none;"><input type="hidden" id="akismet_comment_nonce" name="akismet_comment_nonce" value="60bbbf8c99"></p><p style="display: none;"></p> <input type="hidden" id="ak_js" name="ak_js" value="1504517727143"></form>
</div>
</div>
</div>
</div>
</div>
<footer id="colophon" role="contentinfo">
<div id="supplementary" class="two">
<div id="first" class="widget-area" role="complementary">
<aside id="text-3" class="widget widget_text"> <div class="textwidget"><a href="http://made.nhtv.nl/" title="my Academy for Digital Entertainment">
<img src="./Introduction to DirectX 113D Game Engine Programming_files/MADE-logo-320x90.gif" width="320" height="89"></a>
</div>
</aside> </div>
<div id="third" class="widget-area" role="complementary">
<aside id="text-4" class="widget widget_text"> <div class="textwidget"><a href="http://www.nhtv.nl/ENG/home.html" title="Breda University of Applied Sciences">
<img src="./Introduction to DirectX 113D Game Engine Programming_files/NHTV-logo-300x90.gif" width="158" height="90" align="right">
</a>
</div>
</aside> </div>
</div>
<div id="site-generator">
<a href="http://wordpress.org/" title="Semantic Personal Publishing Platform">Proudly powered by WordPress</a>
</div>
</footer>
</div>
<script type="text/javascript" src="./Introduction to DirectX 113D Game Engine Programming_files/form.js.download"></script>
<script type="text/javascript" src="./Introduction to DirectX 113D Game Engine Programming_files/jquery.prettyPhoto.min.js.download"></script>
<script type="text/javascript" src="./Introduction to DirectX 113D Game Engine Programming_files/comment-reply.min.js.download"></script>
<script type="text/javascript">
/* <![CDATA[ */
var MTBrushParams = {"baseUrl":"https:\/\/www.3dgep.com\/wp-content\/plugins\/syntax-highlighter-mt"};
/* ]]> */
</script>
<script type="text/javascript" src="./Introduction to DirectX 113D Game Engine Programming_files/brushTypes.js.download"></script>
<script type="text/javascript" src="./Introduction to DirectX 113D Game Engine Programming_files/wp-embed.min.js.download"></script>
<script>
jQuery(function($) {
$('a[rel^="prettyPhoto"]').prettyPhoto();
});
</script>


</body></html>