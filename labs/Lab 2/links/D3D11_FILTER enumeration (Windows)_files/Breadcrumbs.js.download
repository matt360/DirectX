epx=window.epx||{};epx.library=window.epx.library||{};epx.library.breadcrumbs=function(){function LoadAndShowBreadcrumbDropDown(href,object){var $menu=$("#breadcrumbDropDownMenu"),href;$menu.is(":empty")&&!loading?(loading=!0,href=epx.library.toc.buildTocHref(href),$.ajax({type:"GET",async:!0,url:href,cache:!1,dataType:"json",success:function(r){var currentTitle,html,i;if(!r||r.length<1){window.epx.utilities.log("TOC web service returned 0 nodes.");return}for(window.epx.utilities.log("TOC web service returned "+r.length+" node(s), processing..."),currentTitle=object.attr("title").trim(),html="<ul>",i=0;i<r.length;i++)html+=r[i].Title.trim()==currentTitle?'<li class="current">':"<li>",html+='<a href="'+r[i].Href+'" Title="'+r[i].ToolTip+'">'+window.epx.utilities.htmlEncode(r[i].Title)+"<\/a>",html+="<\/li>";html+="<\/ul>";$menu.append(html);loading=!1;ShowBreadcrumbDropDown(object,"breadcrumbDropDownMenu")},error:function(){window.epx.utilities.log("TOC web service returned error.");loading=!1}})):ShowBreadcrumbDropDown(object,"breadcrumbDropDownMenu")}function ShowBreadcrumbDropDown(object,menuId){var $menu=$("#"+menuId),pos=object.position(),width=object.outerWidth(),height=object.outerHeight(),menuWidth=$menu.outerWidth(),windowWidth=$("div#breadcrumbs").width(),windowHeight=$(window).height(),menuTop=pos.top+height,intent=15;$("html").attr("dir")=="rtl"?$menu.css({top:menuTop+"px",right:Math.max(windowWidth-pos.left-menuWidth,intent)+"px","max-height":menuTop>windowHeight-200?"200px":windowHeight-100-menuTop+"px"}):$menu.css({top:pos.top+height+"px",left:Math.max(pos.left+width-menuWidth,intent)+"px","max-height":menuTop>windowHeight-200?"200px":windowHeight-100-menuTop+"px"});$menu.animate({height:"toggle"},66,"swing",function(){$menu.css({display:"block"})});object.attr("aria-expanded","true")}function HideBreadcrumbDropDown(){$("#breadcrumbDropDownMenu").hide();$("#breadcrumbDropDownButton").attr("aria-expanded","false");$("#tocDropDownMenu").hide();$("#tocDropDownButton").attr("aria-expanded","false");$("#tocPopupMenu").hide();$("#tocPopupButton").attr("aria-expanded","false");$("div#content").css("display","");$("#breadcrumbMobile").css("display","");$("div#rightNavigationMenuThumbnail").css("display","")}function ShowTocPopup(object){$("#tocPopupMenu").show();$("#breadcrumbMobile").hide();$("div#content").hide();$("div#rightNavigationMenuThumbnail").hide();object.attr("aria-expanded","true")}var loading=!1;return{LoadAndShowBreadcrumbDropDown:LoadAndShowBreadcrumbDropDown,ShowBreadcrumbDropDown:ShowBreadcrumbDropDown,HideBreadcrumbDropDown:HideBreadcrumbDropDown,ShowTocPopup:ShowTocPopup}}();$(document).ready(function(){$("#mobileButtons").length>0&&($("#breadcrumbTablet").append($("#mobileButtons #navigationButtons")),$("#breadcrumbMobile").append($("#navigationButtons").clone()));$("#breadcrumbDropDownButton").attr({role:"button","aria-expanded":"false"});$("#breadcrumbDropDownButton").bind("click",function(e){var targetHref=$(this).attr("targetHref");return epx.library.breadcrumbs.LoadAndShowBreadcrumbDropDown(targetHref,$(this)),e.stopPropagation(),!1});$("#tocDropDownButton").attr({role:"button","aria-expanded":"false"});$("#tocDropDownButton").bind("click",function(e){return $("#tocnav").removeAttr("style"),epx.library.breadcrumbs.ShowBreadcrumbDropDown($(this),"tocDropDownMenu"),e.stopPropagation(),!1});$("#tocPopupButton").attr({role:"button","aria-expanded":"false"});$("#tocPopupButton").bind("click",function(e){return $("#tocnav").removeAttr("style"),epx.library.breadcrumbs.ShowTocPopup($(this)),e.stopPropagation(),!1});$("#breadcrumbDropDownMenu, #tocDropDownMenu").bind("click",function(e){return e.stopPropagation(),!0});$("#page").bind("click",function(){epx.library.responsive.getCurrentViewType()!=epx.library.responsive.viewTypes.Mobile&&epx.library.breadcrumbs.HideBreadcrumbDropDown()});$(document).on("keyup",function(event){switch(event.keyCode){case 27:epx.library.breadcrumbs.HideBreadcrumbDropDown();break}});$("#tocPopMenuClose").attr({role:"button","aria-label":"Close Popup Menu",tabindex:"0"});$("#tocPopMenuClose").bind("click",function(){epx.library.breadcrumbs.HideBreadcrumbDropDown()});$("#tocPopMenuClose").on("keyup",function(event){switch(event.keyCode){case 13:epx.library.breadcrumbs.HideBreadcrumbDropDown();break}})});